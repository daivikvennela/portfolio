/*! For license information please see 140.4a673728.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{14940:function(e,t,i){"use strict";var n=i(13035);i.d(t,"a",(function(){return n.a})),i.d(t,"b",(function(){return n.b}))},20126:function(e,t,i){"use strict";i.d(t,"i",(function(){return a})),i.d(t,"g",(function(){return o})),i.d(t,"h",(function(){return s})),i.d(t,"f",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return h})),i.d(t,"k",(function(){return d})),i.d(t,"j",(function(){return p})),i.d(t,"d",(function(){return m})),i.d(t,"e",(function(){return g}));var n=i(13120),r=i(16744);function a(e,t,i){return Object(r.X)(e,t,i)||Object(r.D)(e,t,i)&&Object(r.kb)(e,t,i)}function o(e,t,i){return!(!s(e,t,i)||!i.isCapabilitySupported(t.currentEnvironmentName,n.b.isRpaBoxCrossGeoAdminEnabled))}function s(e,t,i){return!(!e.enableRpaBoxCrossGeoSupport||!i.isCapabilitySupported(t.currentEnvironmentName,n.b.isRpaBoxCrossGeoEnabled))}var c=(e,t)=>!!e.currentEnvironmentName&&t.isRpaBoxAdminEnabled(e.currentEnvironmentName);function u(e,t){return!!t.isCapabilitySupported(e.currentEnvironmentName,n.b.isHostedGroupsAdminEnabled)}function l(e,t,i){return((e,t,i)=>Object(r.E)(e,t,i)&&e.enableAADHostedGroup)(e,t,i)&&i.isAADHostedGroupEnabled(t.currentEnvironmentName)}function h(e,t,i){return e.enableCaptureVmImage&&g(t,i)}function d(e,t,i){return h(e,t,i)&&function(e,t){return t.isCapabilitySupported(e.currentEnvironmentName,n.b.isMachineImageVersionGeneralizationLogsFieldSupported)}(t,i)}function p(e,t){return t.isCapabilitySupported(e.currentEnvironmentName,n.b.isMachineImageDeprecationFieldsSupported)}function m(e,t){return t.isCapabilitySupported(e.currentEnvironmentName,n.b.isImageSourceMachineIdSupported)}function g(e,t){return t.isCapabilitySupported(e.currentEnvironmentName,n.b.isMachineImageProvisioningFieldsSupported)}},20665:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n=function(e){return e.CredentialsPage="CredentialsPage",e}({}),r=function(e){return e.CredentialsPage="DF_CM_Page_CredentialsPage",e.CreateNewCredentialsButton_Clicked="DF_CM_UI_CreateNewCredentialsButton_Clicked",e.CredentialDisplayNameAnchor_Clicked="DF_CM_UI_CredentialDisplayNameAnchor_Clicked",e.CredentialsList_SortBy_Clicked="DF_CM_UI_CredentialsList_SortBy_Clicked",e.CreateNewCredentialButton_Clicked="DF_CM_UI_CreateNewCredentialButton_Clicked",e.CreateNewMappingCredentialButton_Clicked="DF_CM_UI_CreateNewMappingCredentialButton_Clicked",e.CreateNewUserMappingCredentialButton_Clicked="DF_CM_UI_CreateNewUserMappingCredentialButton_Clicked",e.CreateNewMappingCredentialFromOtherPage_Clicked="DF_CM_UI_CreateNewMappingCredentialFromOtherPage_Clicked",e.EditCredentialButton_Clicked="DF_CM_UI_EditCredentialButton_Clicked",e.SaveForEditCredentialButton_Clicked="DF_CM_UI_SaveForEditCredentialButton_Clicked",e.SaveForCreateCredentialButton_Clicked="DF_CM_UI_SaveForCreateCredentialButton_Clicked",e.DeleteCredentialButton_Clicked="DF_CM_UI_DeleteCredentialButton_Clicked",e.DeleteCredentialDialogDismissButton_Clicked="DF_CM_UI_DeleteCredentialDialogDismissButton_Clicked",e.ManageCredentialAccessButton_Clicked="DF_CM_UI_ManageCredentialAccessButton_Clicked",e.ViewDependenciesButton_Clicked="DF_CM_UI_ViewDependenciesButton_Clicked",e.CredentialsList_ItemSelected="DF_CM_UI_CredentialsList_ItemSelected",e.CredentialsList_ItemUnselected="DF_CM_UI_CredentialsList_ItemUnselected",e.CredentialPanel_NameField_Changed="DF_CM_UI_CredentialPanel_NameField_Changed",e.CredentialPanel_DescriptionField_Changed="DF_CM_UI_CredentialPanel_DescriptionField_Changed",e.CredentialPanel_UserEnvironmentVariablePicker_SelectionChanged="DF_CM_UI_CredentialPanel_UserEnvironmentVariablePicker_SelectionChanged",e.CredentialPanel_UserEnvironmentVariablePicker_ShowMoreClicked="DF_CM_UI_CredentialPanel_UserEnvironmentVariablePicker_ShowMoreClicked",e.CredentialPanel_PasswordEnvironmentVariablePicker_SelectionChanged="DF_CM_UI_CredentialPanel_PasswordEnvironmentVariablePicker_SelectionChanged",e.ShowDependenciesPanel_DimissButton_Clicked="DF_CM_UI_ShowDependenciesPanel_DimissButton_Clicked",e.ShowDependenciesPanel_CloseButton_Clicked="DF_CM_UI_ShowDependenciesPanel_CloseButton_Clicked",e.CredentialPanel_EnvironmentVariablePicker_SelectionChanged="DF_CM_UI_CredentialPanel_EnvironmentVariablePicker_SelectionChanged",e.CredentialPanel_EnvironmentVariableDisplayName_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableDisplayName_Changed",e.CredentialPanel_EnvironmentVariableSchemaName_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableSchemaName_Changed",e.CredentialPanel_EnvironmentVariableValue_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableValue_Changed",e.CredentialPanel_EnvironmentVariableSubscriptionId_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableSubscriptionId_Changed",e.CredentialPanel_EnvironmentVariableResourceGroup_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableResourceGroup_Changed",e.CredentialPanel_EnvironmentVariableAzureKeyVaultName_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableAzureKeyVaultName_Changed",e.CredentialPanel_EnvironmentVariableSecretName_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableSecretName_Changed",e.CredentialPanel_EnvironmentVariableStoreName_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableStoreName_Changed",e.CredentialPanel_EnvironmentVariableServerAddress_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableServerAddress_Changed",e.CredentialPanel_EnvironmentVariableApplicationId_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableApplicationId_Changed",e.CredentialPanel_EnvironmentVariableSafe_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableSafe_Changed",e.CredentialPanel_EnvironmentVariableFolder_Changed="DF_CM_UI_CredentialPanel_EnvironmentVariableFolder_Changed",e.MappingPanel_DefaultCredential_Changed="DF_CM_UI_MappingPanel_DefaultCredential_Changed",e.MappingPanel_UserMapping_UserCredential_Changed="DF_CM_UI_MappingPanel_UserMapping_UserCredential_Changed",e.MappingPanel_UserMapping_FlowCredential_Changed="DF_CM_UI_MappingPanel_UserMapping_FlowCredential_Changed",e.MappingPanel_AddMappingButton_Clicked="DF_CM_UI_MappingPanel_AddMappingButton_Clicked",e.MappingPanel_EditMappingButton_Clicked="DF_CM_UI_MappingPanel_EditMappingButton_Clicked",e.MappingPanel_DeleteMappingButton_Clicked="DF_CM_UI_MappingPanel_DeleteMappingButton_Clicked",e.MappingPanel_EditUserMappingButton_Clicked="DF_CM_UI_MappingPanel_EditUserMappingButton_Clicked",e.MappingPanel_DeleteUserMappingButton_Clicked="DF_CM_UI_MappingPanel_DeleteUserMappingButton_Clicked",e.MappingPanel_ValidateMappingButton_Clicked="DF_CM_UI_MappingPanel_ValidateMappingButton_Clicked",e.MappingPanel_CancelMappingButton_Clicked="DF_CM_UI_MappingPanel_CancelMappingButton_Clicked",e.MappingPanel_UserMapping_CancelMappingButton_Clicked="DF_CM_UI_MappingPanel_UserMapping_CancelMappingButton_Clicked",e.MappingPanel_MappingCredentials_Changed="DF_CM_UI_MappingPanel_MappingCredentials_Changed",e.MappingPanel_MappingMachine_Changed="DF_CM_UI_MappingPanel_MappingMachine_Changed",e.RetrieveCredentialUserAccessRights="DF_CM_Fetch_RetrieveCredentialUserAccessRights",e.RetrieveCredentialAccess="DF_CM_Fetch_RetrieveCredentialAccess",e.BatchCurrentUserCredentialsAccessRights="DF_CM_Fetch_BatchCurrentUserCredentialsAccessRights",e.BatchCredentialChangeAccess="DF_CM_Fetch_BatchCredentialChangeAccess",e.ConnectionParameter_CredentialMappingParsed="DF_CM_UI_ConnectionParameter_CredentialMappingParsed",e.CredentialPicker_SelectionChanged="DF_CM_UI_CredentialPicker_SelectionChanged",e.CredentialPicker_NewCredentialButton_Clicked="DF_CM_UI_CredentialPicker_NewCredentialButton_Clicked",e.CredentialMappingTeachingBubble_LearnMoreLink_Clicked="DF_CM_UI_CredentialMappingTeachingBubble_LearnMoreLink_Clicked",e.CredentialMappingTeachingBubble_GoToCredentialsButton_Clicked="DF_CM_UI_CredentialMappingTeachingBubble_GoToCredentialsButton_Clicked",e.CredentialMappingTeachingBubble_DismissButton_Clicked="DF_CM_UI_CredentialMappingTeachingBubble_DismissButton_Clicked",e.ConnectionParameter_CredentialMappingParsedInV3="DF_CM_UI_ConnectionParameter_CredentialMappingParsedInV3",e.ConnectionParameter_ToggleCredentialClickedInV3="DF_CM_UI_ConnectionParameter_ToggleCredentialClickedInV3",e}({})},20706:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return u})),i.d(t,"d",(function(){return l})),i.d(t,"e",(function(){return h}));var n=i(12366),r=i(20707),a=i(17275),o=i(15395),s=function(e){return e.name="name",e.description="description",e.modifiedon="modifiedon",e}({}),c=[s.name,s.description],u={key:s.name,direction:a.a.asc};function l(e,t,i,n){return t.map(t=>({requestType:o.a.GET,path:"/systemusers(".concat(e,")/Microsoft.Dynamics.CRM.RetrievePrincipalAccess(Target=@Target)?@Target={'").concat(i,"':'").concat(t,"','@odata.type':'").concat(n,"'}")}))}function h(e){var t={},i=[];e.search&&e.search.columns.length>0&&(i=[(t=Object(r.a)(e.search.value,e.search.columns)).$filter]);var a=e.filters.accessList||[];if(1===a.length&&a[0]!==n.a.All&&null!=e&&e.currentUserId){var o="eq";a[0]===n.a.SharedWithMe&&(o="ne"),i.push("(_owninguser_value ".concat(o," '").concat(e.currentUserId,"')"))}i.sort();var s=i.filter(Boolean).join(" and ");return s&&(t.$filter=s),t.$orderby="".concat(e.orderBy.key," ").concat(e.orderBy.direction),t}},20707:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(14827),r=i(15420),a=(e,t)=>{if(0===t.length)return{};var i={};i.$filter="(".concat(t.map(e=>"contains(".concat(e,", ").concat(r.f,")")).join(" or "),")");var a=Object(n.b)(e);return i["".concat(r.f)]="'".concat(a,"'"),i}},20708:function(e,t,i){"use strict";i.d(t,"a",(function(){return w})),i.d(t,"b",(function(){return S}));var n,r,a,o,s,c,u,l,h,d,p,m,g=i(11773),v=i(12366),f=i(12347),C=i(20709),y=i(20711);function _(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function b(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function M(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function k(e,t,i,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var w=function(e){return e.Machines="Machines",e.AllMachinesUsedInRuns="AllMachinesUsedInRuns",e.AllMachineGroupsUsedInRuns="AllMachineGroupsUsedInRuns",e}({}),S=(r=k((n=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.xrmIdentityStore=t,this.xrmSharingStore=i,_(this,"machines",r,this),_(this,"machineGroups",a,this),_(this,"accessRights",o,this),_(this,"machineGroupsMemberCount",s,this),_(this,"machineStatuses",c,this),_(this,"machineStatusesV2",u,this),_(this,"vmImages",l,this),_(this,"usingMachineImage",h,this),_(this,"usingVirtualNetwork",d,this),_(this,"machineImageAccessRights",p,this),_(this,"virtualNetworks",m,this),Object(g.runInAction)(()=>{this.machines=new f.a({getKey:e=>e.name}),this.machineGroups=new f.a({getKey:e=>e.name}),this.accessRights=new f.a({getKey:e=>e.targetId}),this.machineGroupsMemberCount=new f.a({getKey:e=>e.machineGroupName}),this.machineStatuses=new f.a({getKey:e=>e.machineId}),this.machineStatusesV2=new f.a({getKey:e=>e.machineId}),this.vmImages=new f.a({getKey:e=>e.id}),this.machineImageAccessRights=new f.a({getKey:e=>e.machineImageId}),this.virtualNetworks=new f.a({getKey:e=>e.name}),this.usingMachineImage=new f.a({getKey:e=>e.id}),this.usingVirtualNetwork=new f.a({getKey:e=>e.id})})}var t,i,n;return t=e,n=[{key:"getTargetsCollectionType",value:function(e){var t="",i=e.filters.accessList||[];return 1===i.length&&i[0]!==v.a.All&&(t+="?accessList=".concat(i[0])),e.search&&e.search.columns.length>0&&(t+="?search=".concat(e.search.value),t+=":".concat(e.search.columns.join(","))),t+="?order=".concat(e.orderBy.key,":").concat(e.orderBy.direction)}},{key:"getMachinesCollectionType",value:function(t){var i="",n="";if(t){var r=(null==t?void 0:t.filters.parentGroupNames)||[];null!=t&&t.filters.includeDefaultGroups&&(r=r.concat("defaultGroups")),i=r.length>0?"?parentGroupNames=".concat(r.sort().join("&")):"",void 0!==t.filters.machineType&&(i+="?machineType=".concat(t.filters.machineType)),n=e.getTargetsCollectionType(t)}return"MachineList".concat(i).concat(n)}},{key:"getMachineImagesCollectionType",value:function(t){var i="",n="";if(t){var r,a;if(null!==(r=t.filters)&&void 0!==r&&r.scenario){var o=t.filters.scenario.sort().join(",");i=o?"?supportedscenario=".concat(o):""}if(null!==(a=t.filters)&&void 0!==a&&a.imageType){var s=t.filters.imageType.sort().join(",");i=s?"".concat(i,"?imageType=").concat(s):i}n=e.getTargetsCollectionType(t)}return"MachineImages".concat(i).concat(n,"}")}},{key:"getMachineGroupCollectionType",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="",r="",a=t.filters.machineGroupTypes||[];n=a.length>0?"?machineGroupTypes=".concat(a.sort().join("&")):"";var o=t.filters.groupCapacity||[];1===o.length&&(n+="?groupCapacity=".concat(o[0]));var s=t.filters.managementType||[];return 1===s.length&&(n+="?managementType=".concat(s[0])),r=e.getTargetsCollectionType(t),i||(r+="/all"),"MachineGroupList".concat(n).concat(r)}},{key:"getVirtualNetworkCollectionType",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="";if(t.filters.virtualNetworkTypes&&t.filters.virtualNetworkTypes.length>0){var r=t.filters.virtualNetworkTypes.sort().join("&");n+="?virtualNetworkTypes=".concat(r)}if(t.filters.scenario&&t.filters.scenario.length>0){var a=t.filters.scenario.sort().join(",");n+="?supportedscenario=".concat(a)}var o=e.getTargetsCollectionType(t);return i||(o+="/all"),"VirtualNetworkList".concat(n).concat(o)}}],(i=[{key:"getMachineGroupSharedWithPrincipals",value:function(e){var t=this.machineGroups.getEntity(e);return this.xrmSharingStore.getEntitySharedWithIdsWithOwner(e,t)}},{key:"isUserOwnerOfTargetAndSharingToDeactivatedUser",value:function(e,t){var i=this.xrmSharingStore.entitySharedPrincipalAndAccess.getEntity(t.name);if(!i)return!1;var n=this.accessRights.getEntity(t.name);if(!e||!n)return!1;var r=Object(y.a)(e,t,n.value);return this.xrmSharingStore.isSharedToDeactivatedUser(i)&&Object(C.a)(r)}},{key:"getMachineImageSharedWithPrincipals",value:function(e){var t=this.vmImages.getEntity(e);return this.xrmSharingStore.getEntitySharedWithIdsWithOwner(e,t)}},{key:"getVirtualNetworkSharedWithPrincipals",value:function(e){var t=this.virtualNetworks.getEntity(e);return this.xrmSharingStore.getEntitySharedWithIdsWithOwner(e,t)}}])&&b(t.prototype,i),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"machines",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=k(n.prototype,"machineGroups",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=k(n.prototype,"accessRights",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=k(n.prototype,"machineGroupsMemberCount",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=k(n.prototype,"machineStatuses",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=k(n.prototype,"machineStatusesV2",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=k(n.prototype,"vmImages",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=k(n.prototype,"usingMachineImage",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=k(n.prototype,"usingVirtualNetwork",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=k(n.prototype,"machineImageAccessRights",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=k(n.prototype,"virtualNetworks",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n)},20709:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(20710);function r(e){return e===n.a.coOwner||e===n.a.owner}},20710:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e.owner="owner",e.coOwner="co-owner",e.user="user",e.userPlusShare="user-plus-share",e.notSpecified="not-specified",e}({})},20711:function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return u}));var n=i(20710),r=i(20712),a=i(16792),o=[a.a.ReadAccess,a.a.AppendToAccess],s=[a.a.AppendAccess,a.a.AppendToAccess,a.a.AssignAccess,a.a.CreateAccess,a.a.DeleteAccess,a.a.ReadAccess,a.a.ShareAccess,a.a.WriteAccess],c=[{accessType:n.a.user,accessMask:o},{accessType:n.a.coOwner,accessMask:s}];function u(e,t,i){return Object(r.b)(e,t,i,c)}},20712:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return s}));var n=i(20710),r=i(12324);function a(e,t,i,a){if(t){if(t.xrmOwner.ownerid===e)return n.a.owner;var o=a.filter(e=>function(e,t){var i=Object(r.uniq)(t),n=Object(r.uniq)(e);if(n.length<i.length)return!1;return i.every(e=>n.findIndex(t=>t===e)>-1)}(i,e.accessMask));return o.length>0?o.sort((e,t)=>e.accessMask.length-t.accessMask.length).reverse()[0].accessType:n.a.notSpecified}return n.a.notSpecified}function o(e,t){return t&&e.map(e=>e.accessType).includes(t)&&(null===(i=e.find(e=>e.accessType===t))||void 0===i?void 0:i.accessMask)||[];var i}function s(e,t){if(t)switch(t){case n.a.owner:return e.Owner.Title;case n.a.coOwner:return e.CoOwner.Title;case n.a.user:return e.User.Title;case n.a.userPlusShare:return e.UserPlusShare.Title;case n.a.notSpecified:return;default:throw new Error("Unhandled accessType: ".concat(t))}}},20718:function(e,t,i){"use strict";i.d(t,"a",(function(){return C})),i.d(t,"b",(function(){return y})),i.d(t,"c",(function(){return _})),i.d(t,"d",(function(){return b})),i.d(t,"e",(function(){return k}));var n=i(16744),r=i(15395),a=i(16841),o=i(15985),s=i(20719),c=i(20706),u=i(20720),l=i(20721),h=i(20126);function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){m(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function m(e,t,i){return(t=f(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(e,t,i,n,r,a,o){try{var s=e[a](o),c=s.value}catch(u){return void i(u)}s.done?t(c):Promise.resolve(c).then(n,r)}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var C=function(e){return e.Empty="Empty",e.NotEmpty="NotEmpty",e.NotEmptyNotBadStateOrProvisionedHostedGroup="NotEmptyNotBadStateOrProvisionedHostedGroup",e}({}),y=function(){function e(t,i,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.httpClient=t,this.featureFlags=i,this.environmentStore=n,this.environmentCapabilityStore=r,this.loggingService=a}var t,i,d,m,f;return t=e,(i=[{key:"browseVmImages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.isMachineGroupManagedTypeSupported?this.httpClient.retrieveMultiple(s.o,M(e,this.isRpaBoxEnabled,this.isManagedSupportEnabled,this.isProvisioningFieldSupported,this.isImageDeprecationSupported,this.isImageSourceMachineIdSupported,t)):Promise.reject(new Error("Machine group management type is not supported with the current solution."))}},{key:"getMachineImageDetails",value:function(e){return this.httpClient.retrieveRecord(s.o,e,Object(s.f)(this.isRpaBoxEnabled,this.isManagedSupportEnabled,this.isProvisioningFieldSupported,this.isImageDeprecationSupported,this.isImageSourceMachineIdSupported))}},{key:"getMachineImageVersionGeneralizationLogs",value:(m=function*(e){if(this.isGeneralizationLogsSupported)try{return yield this.httpClient.retrieveRecordFile(s.r,e,"generalizationlogs").then(e=>{var t;return e.ok&&null!==(t=e.data)&&void 0!==t&&t.value?e.data.value:null})}catch(t){this.loggingService.logInfo("No generalization logs found for the activeimageversionid",e)}return null},f=function(){var e=this,t=arguments;return new Promise((function(i,n){var r=m.apply(e,t);function a(e){g(r,i,n,a,o,"next",e)}function o(e){g(r,i,n,a,o,"throw",e)}a(void 0)}))},function(e){return f.apply(this,arguments)})},{key:"getMachineIdsUsingImage",value:function(e){var t={$select:"flowmachineid",$filter:"".concat(s.n," and FlowMachineImageVersionId/_flowmachineimage_value eq '").concat(e,"'"),$expand:"FlowMachineImageVersionId($select=_flowmachineimage_value)"};return this.httpClient.retrieveMultiple(s.g,t)}},{key:"deleteMachineImage",value:function(e){return this.httpClient.deleteRecord(s.o,e)}},{key:"createVmImageAndVersion",value:function(e,t,i,n,r,a){var o={name:e,reference:t,version:i};this.isRpaBoxEnabled&&(o.supportedscenario=a);var c={name:e,description:n||null,source:r,flowmachineimage_flowmachineimageversion:[o]};return this.httpClient.createRecord(s.o,c,void 0,!0)}},{key:"browseMachines",value:function(e){return this.httpClient.retrieveMultiple(s.g,Object(l.a)(e,this.isMachineGroupManagedTypeSupported,this.isReuseWindowsSessionSupported,this.isAADManagedMachineGroupSupported,this.isGroupKeyRotationSupported,this.isMachineKeyExpirationSupported,this.isRpaBoxSupportedBySolution,this.isVirtualNetworkScenarioSupported,this.isMultiUserSessionSupportEnabled,this.isProvisioningFieldSupported,this.isMachineGroupUsageTypeSupported),s.b)}},{key:"browseMachinesMore",value:function(e){return this.httpClient.retrieveMore(e,s.b)}},{key:"browseMachinesUsedInRuns",value:function(){return this.httpClient.retrieveMultiple(s.g,p(p({},this.defaultMachineParameters),{},{$filter:"flowmachine_flowsession_MachineId/any()",$orderby:"name asc"}))}},{key:"browseMachinesUsedInRunsMore",value:function(e){return this.httpClient.retrieveMore(e)}},{key:"getMachineDetails",value:function(e){return this.httpClient.retrieveRecord(s.g,e,this.defaultMachineParameters)}},{key:"editMachineDetails",value:function(e,t,i,n){var r={name:t,description:i};return void 0!==n&&this.environmentCapabilityStore.isMachineMaintenanceSupported(this.environmentStore.currentEnvironmentName)&&(r.statecode=n,n===o.h.Maintenance?r.statuscode=o.i.ManualMaintenance:n===o.h.Active&&(r.statuscode=o.i.Active)),this.httpClient.updateRecord(s.g,e,r,this.defaultMachineParameters,!0)}},{key:"deleteMachine",value:function(e){return this.httpClient.deleteRecord(s.g,e)}},{key:"fetchFirstMachineGroupWithoutPrimaryKeyPackages",value:function(){var e={$select:"flowmachinegroupid",$filter:"primarykeypackage eq null and flowgrouptype eq ".concat(o.b.Standard)},t={Prefer:"odata.maxpagesize=1"};return this.httpClient.retrieveMultiple(s.i,e,t)}},{key:"fetchFirstHostedMachineGroup",value:function(e,t){var i={$select:"flowmachinegroupid",$filter:"".concat(Object(l.c)(e)," and (managementtype eq ").concat(o.g.Managed,")").concat(void 0!==t?" and (maxmanagedmachinecount gt ".concat(t,")"):"")},n={Prefer:"odata.maxpagesize=1"};return this.httpClient.retrieveMultiple(s.i,i,n)}},{key:"fetchFirstRpaBox",value:function(){var e={$select:"flowmachineid",$filter:"hostingtype eq ".concat(o.g.CloudPc)},t={Prefer:"odata.maxpagesize=1"};return this.httpClient.retrieveMultiple(s.g,e,t)}},{key:"fetchFirstMachineWithKeyExpired",value:function(e){var t="keydeliverystatus eq ".concat(o.f.keyExpired);e&&(t+=" and _flowmachinegroupid_value eq '".concat(e,"'"));var i={$select:"flowmachineid",$filter:t},n={Prefer:"odata.maxpagesize=1"};return this.httpClient.retrieveMultiple(s.g,i,n)}},{key:"browseMachineGroups",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.httpClient.retrieveMultiple(s.i,Object(l.b)(e,this.isMachineGroupManagedTypeSupported,this.isReuseWindowsSessionSupported,this.isAADManagedMachineGroupSupported,this.isGroupKeyRotationSupported,this.featureFlags,this.isVirtualNetworkScenarioSupported,this.isMultiUserSessionSupportEnabled,this.isManagedSupportEnabled,this.isImageDeprecationSupported,this.isMachineGroupUsageTypeSupported),t?s.b:void 0)}},{key:"browseMachineGroupsUsedInRuns",value:function(){return this.httpClient.retrieveMultiple(s.i,p(p({},this.defaultMachineGroupParameters),{},{$filter:"flowmachinegroup_flowsession_MachineGroupId/any()",$orderby:"name asc"}))}},{key:"browseMachineGroupsMore",value:function(e){return this.httpClient.retrieveMore(e,s.b)}},{key:"getMachineGroupDetails",value:function(e){return this.httpClient.retrieveRecord(s.i,e,this.defaultMachineGroupParameters)}},{key:"editMachineGroupDetails",value:function(e,t,i,r,c,u,l,h,d){var p={};return void 0!==t&&(p.name=t),void 0!==i&&(p.description=i),void 0!==r&&this.isReuseWindowsSessionSupported&&null!==r&&(p.trytoreusewindowssession=r),void 0!==c&&c.managementType===a.o.Managed&&(p.maxmanagedmachinecount=c.maxParallelHostedRuns),void 0!==u&&this.environmentCapabilityStore.isMachineMaintenanceSupported(this.environmentStore.currentEnvironmentName)&&(p.statecode=u,u===o.h.Maintenance?p.statuscode=o.a.ManualMaintenance:u===o.h.Active&&(p.statuscode=o.a.Active)),void 0!==l&&Object(n.J)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)&&(p.preferredqueuingtype=l?o.j.ExtendedQueuePrioritization:o.j.FIFO),void 0!==d&&Object(n.G)(this.environmentStore,this.environmentCapabilityStore)&&(p.usagetype=d?o.c.CuaOnly:o.c.RpaOnly),void 0!==h&&(p.groupmetadata=h),this.httpClient.updateRecord(s.i,e,p,this.defaultMachineGroupParameters,!0)}},{key:"editMachineGroupAccountDetails",value:function(e,t){return this.httpClient.postCustomActionOnRecord("Microsoft.Dynamics.CRM.UpdateAccountCredentials","UpdateAccountCredentials",s.i,e,{groupCredentials:t})}},{key:"editMachineImageDetails",value:function(e,t,i){var n={name:t,description:i};return this.httpClient.updateRecord(s.o,e,n,Object(s.f)(this.isRpaBoxEnabled,!1,this.isProvisioningFieldSupported,this.isImageDeprecationSupported,this.isImageSourceMachineIdSupported),!0)}},{key:"deleteMachineGroup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?this.httpClient.postCustomActionOnRecord("Microsoft.Dynamics.CRM.DeleteFlowMachineGroup","ForceDeleteFlowMachineGroup",s.i,e):this.httpClient.deleteRecord(s.i,e)}},{key:"createMachineGroup",value:function(e,t,i,r){var a=p(p({name:e,flowgrouptype:o.b.Keyless,description:t},this.isReuseWindowsSessionSupported&&null!==i?{trytoreusewindowssession:i}:void 0),null!==r&&Object(n.G)(this.environmentStore,this.environmentCapabilityStore)?{usagetype:r?o.c.CuaOnly:o.c.RpaOnly}:void 0);return this.httpClient.createRecord(s.i,a,this.defaultMachineGroupParameters,!0)}},{key:"createRpaBox",value:function(e,t,i,n){var r={machineName:e,machineDescription:t,machineImageVersionId:"/".concat(s.r,"(").concat(i,")")};return n&&(r.machineNetworkId="/".concat(u.c,"(").concat(n,")")),this.httpClient.postCustomAction("CreateRpaBox","CREATERPABOX",r)}},{key:"createHostedMachineGroup",value:function(e,t,i){var n={groupName:e,groupDescription:t,groupCredentials:i.groupCredentials,groupImage:i.vmImage,groupDomainSetting:i.groupDomainSetting,groupMaximumMachineCount:i.maxParallelHostedRuns,groupCapacityCount:i.groupCapacityCount};return this.isVirtualNetworkScenarioSupported&&i.groupMachineNetworkId&&(n.groupMachineNetworkId="/".concat(u.c,"(").concat(i.groupMachineNetworkId,")")),this.httpClient.postCustomAction("CreateHostedFlowMachineGroup","CREATEHOSTEDFLOWMACHINEGROUP",n)}},{key:"retrieveMachineGroupPrincipalAccess",value:function(e,t){return this.httpClient.retrieveRecordPrincipalAccess(e,"flowmachinegroupid","Microsoft.Dynamics.CRM.flowmachinegroup",t)}},{key:"retrieveMachinePrincipalAccess",value:function(e,t){return this.httpClient.retrieveRecordPrincipalAccess(e,"flowmachineid","Microsoft.Dynamics.CRM.flowmachine",t)}},{key:"retrieveMachineImagePrincipalAccess",value:function(e,t){return this.httpClient.retrieveRecordPrincipalAccess(e,s.q,s.p,t)}},{key:"batchMachineImagesPrincipalAccess",value:function(e,t){var i=function(e,t){return Object(c.d)(e,t,s.q,s.p)}(e,t);return this.httpClient.batchRequests(i)}},{key:"batchFetchMachines",value:function(e){var t=Object(r.c)(s.g,e,"?$select=".concat(this.defaultMachineParameters.$select,"&$expand=").concat(this.defaultMachineParameters.$expand));return this.httpClient.batchRequests(t)}},{key:"batchFetchMachineGroups",value:function(e){var t=Object(r.c)(s.i,e,"?"+new URLSearchParams(this.defaultMachineGroupParameters).toString());return this.httpClient.batchRequests(t)}},{key:"batchMachinesPrincipalAccess",value:function(e,t){var i=function(e,t){return Object(c.d)(e,t,s.m,s.h)}(e,t);return this.httpClient.batchRequests(i)}},{key:"batchMachineGroupsPrincipalAccess",value:function(e,t){var i=function(e,t){return Object(c.d)(e,t,s.k,s.j)}(e,t);return this.httpClient.batchRequests(i)}},{key:"batchGetMachineStatus",value:function(e){var t={machineIds:JSON.stringify(e)};return this.httpClient.postCustomAction(s.a,"BATCHGETFLOWMACHINESTATUS",t).then(e=>{if(e)return p(p({},e),{},{data:e.data&&{machineStatuses:e.data.machineStatuses?JSON.parse(e.data.machineStatuses):[]}});throw new Error("BatchedMachineStatusesResponse is null or undefined")})}},{key:"batchGetMachineStatusV2",value:function(e){var t={version:"2",machineIds:JSON.stringify(e)};return this.httpClient.postCustomAction(s.a,"BATCHGETFLOWMACHINESTATUS",t).then(e=>{if(e)return p(p({},e),{},{data:e.data&&{machineStatuses:e.data.machineStatuses?JSON.parse(e.data.machineStatuses):[]}});throw new Error("BatchedMachineStatusesResponse is null or undefined")})}},{key:"leaveMachineGroup",value:function(e){return this.httpClient.postCustomAction("".concat(s.g,"(").concat(e,")/Microsoft.Dynamics.CRM.LeaveGroup"),"FLOWMACHINES(MACHINENAME)/MICROSOFT.DYNAMICS.CRM.LEAVEGROUP")}},{key:"isMultiUserSessionSupportEnabled",get:function(){return Object(n.J)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)}},{key:"isMachineGroupUsageTypeSupported",get:function(){return Object(n.G)(this.environmentStore,this.environmentCapabilityStore)}},{key:"isManagedSupportEnabled",get:function(){return Object(n.fb)(this.featureFlags)}},{key:"isProvisioningFieldSupported",get:function(){return Object(h.e)(this.environmentStore,this.environmentCapabilityStore)}},{key:"isVirtualNetworkScenarioSupported",get:function(){return Object(n.kb)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)}},{key:"isMachineGroupManagedTypeSupported",get:function(){return Object(n.E)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)}},{key:"isReuseWindowsSessionSupported",get:function(){return Object(n.W)(this.environmentStore,this.environmentCapabilityStore)}},{key:"isAADManagedMachineGroupSupported",get:function(){return this.environmentCapabilityStore.isHostedMachineGroupSupported(this.environmentStore.currentEnvironmentName)}},{key:"isGroupKeyRotationSupported",get:function(){return Object(n.C)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)}},{key:"isMachineKeyExpirationSupported",get:function(){return Object(n.B)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)}},{key:"isRpaBoxSupportedBySolution",get:function(){return Object(n.Z)(this.environmentStore,this.environmentCapabilityStore)}},{key:"isRpaBoxEnabled",get:function(){return Object(n.Y)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)}},{key:"isImageDeprecationSupported",get:function(){return Object(h.j)(this.environmentStore,this.environmentCapabilityStore)}},{key:"isImageSourceMachineIdSupported",get:function(){return Object(h.d)(this.environmentStore,this.environmentCapabilityStore)}},{key:"isGeneralizationLogsSupported",get:function(){return Object(h.k)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)}},{key:"defaultMachineGroupParameters",get:function(){return Object(s.c)(this.isMachineGroupManagedTypeSupported,this.isReuseWindowsSessionSupported,this.isAADManagedMachineGroupSupported,this.isGroupKeyRotationSupported,this.isVirtualNetworkScenarioSupported,this.isMultiUserSessionSupportEnabled,this.isManagedSupportEnabled,this.isImageDeprecationSupported,this.isMachineGroupUsageTypeSupported)}},{key:"defaultMachineParameters",get:function(){return Object(s.d)(this.isMachineGroupManagedTypeSupported,this.isReuseWindowsSessionSupported,this.isAADManagedMachineGroupSupported,this.isGroupKeyRotationSupported,this.isMachineKeyExpirationSupported,this.isRpaBoxSupportedBySolution,this.isVirtualNetworkScenarioSupported,this.isMultiUserSessionSupportEnabled,this.isProvisioningFieldSupported,this.isMachineGroupUsageTypeSupported)}}])&&v(t.prototype,i),d&&v(t,d),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return{filters:{parentGroupNames:e?[e]:[],accessList:[],machineType:void 0},currentUserId:void 0,orderBy:c.b}}function b(){return{filters:{machineGroupTypes:[o.b.Standard,o.b.Keyless],accessList:[],groupCapacity:[],managementType:[],machineGroupUsageType:[]},currentUserId:void 0,orderBy:c.b}}function M(e,t,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=Object(s.f)(t,i,n,r,a),l=(u=p(p({},u),Object(c.e)(e))).$filter?[u.$filter]:[];if(t&&e.filters.scenario&&e.filters.scenario.length>0){var h=e.filters.scenario.map(e=>"none"===e?"v/supportedscenario eq null":"v/supportedscenario eq ".concat(e)).join(" or ");l.push("(flowmachineimage_flowmachineimageversion/any(v: ".concat(h,"))"))}if(e.filters.imageType&&e.filters.imageType.length>0){var d=e.filters.imageType.map(e=>"source eq ".concat(e)).join(" or ");l.push("(".concat(d,")"))}l.sort();var m=l.filter(Boolean).join(" and ");return m&&(u.$filter=m),o&&r&&(u.$orderby="deprecationdate asc"),u}function k(){return{filters:{accessList:[]},currentUserId:void 0,orderBy:c.b}}},20719:function(e,t,i){"use strict";i.d(t,"q",(function(){return a})),i.d(t,"o",(function(){return o})),i.d(t,"p",(function(){return s})),i.d(t,"r",(function(){return c})),i.d(t,"g",(function(){return u})),i.d(t,"h",(function(){return l})),i.d(t,"m",(function(){return h})),i.d(t,"i",(function(){return d})),i.d(t,"j",(function(){return p})),i.d(t,"k",(function(){return m})),i.d(t,"a",(function(){return g})),i.d(t,"l",(function(){return v})),i.d(t,"b",(function(){return f})),i.d(t,"f",(function(){return b})),i.d(t,"n",(function(){return j})),i.d(t,"d",(function(){return N})),i.d(t,"c",(function(){return B})),i.d(t,"e",(function(){return T}));var n=i(17268),r=i(15985),a="flowmachineimageid",o="flowmachineimages",s="Microsoft.Dynamics.CRM.flowmachineimage",c="flowmachineimageversions",u="flowmachines",l="Microsoft.Dynamics.CRM.flowmachine",h="flowmachineid",d="flowmachinegroups",p="Microsoft.Dynamics.CRM.flowmachinegroup",m="flowmachinegroupid",g="BatchGetFlowMachineStatus",v="flowmachinegroup_flowmachine",f={Prefer:"odata.maxpagesize=".concat(50)},C="".concat(n.d,",").concat(n.c),y=["flowmachineimageversionid","version","reference","statecode"],_=[a,"name","description","source","_owningteam_value","_owninguser_value","createdon"];function b(e,t,i,n,r){var a=e?[...y,"supportedscenario"]:y;i&&a.push("provisioningerror","statuscode"),r&&a.push("_sourcemachineid_value");var o=_;t&&(o=[...o,"ismanaged","iscustomizable","solutionid"]),n&&(o=[...o,"deprecationdate","endofsupportdate"]);var s=[...new Set(a)],c="$select=".concat(s.join(",")),u="flowmachineimage_flowmachineimageversion(".concat(c,")");return{$expand:"".concat(u,",").concat(C,",").concat("flowmachinegroup_flowmachineimage($select=flowmachinegroupid)"),$select:o.join(",")}}var M=["name","description","flowgrouptype","_owningteam_value","_owninguser_value","statecode","statuscode","primarykeypackage","groupmetadata"],k=["name","description","type","subnet","_owningteam_value","_owninguser_value"],w=["managementtype","provisioningstate","provisioningerror","maxmanagedmachinecount","_flowmachineimage_value"],S=["trytoreusewindowssession"],A=["domainsetting"],I=["passwordchangeddate"],D=["_flowmachinenetwork_value"],P=["preferredqueuingtype"],F=["usagetype"],R=["ismanaged","iscustomizable","solutionid"];function E(e,t,i,n,r,a,o,s){var c=M;return e&&(c=c.concat(w)),t&&(c=c.concat(S)),i&&(c=c.concat(A)),n&&(c=c.concat(I)),r&&e&&(c=c.concat(D)),a&&(c=c.concat(P)),s&&(c=c.concat(F)),o&&(c=c.concat(R)),c}var U=["name","description","_flowmachinegroupid_value","_owningteam_value","_owninguser_value","agentversion","createdon","machinemetadata","statecode","statuscode"],W=["_flowmachinenetworkid_value","hostingtype","hostedmachineerror"],O=["keydeliverystatus"],j="(FlowMachineGroupId/managementtype ne ".concat(r.g.Managed,")");function G(e,t,i){var n=U;return e&&(n=n.concat(W)),t&&(n=n.concat(O)),i&&(n=[...n,"snapshotstartedat"]),n}function N(e,t,i,n,r,a,o,s,c,u){var l={$expand:"FlowMachineGroupId($select=".concat(E(e,t,i,n,o,s,!1,u).join(","),";$expand=").concat(C,"),").concat(C),$select:G(a,r,c).join(","),$count:"true"};return e&&(l.$filter=j),a&&(l.$expand="".concat(l.$expand,",FlowMachineImageVersionId($select=_flowmachineimage_value)")),l}function B(e,t,i,n,r,a,o,s,c){var u="".concat(v,"($select=flowmachineid),").concat(C);return e&&s&&(u+=",".concat("flowmachineimage","($select=deprecationdate)")),{$expand:u,$select:E(e,t,i,n,r,a,o,c).join(",")}}function T(e,t,i,n){var r=[...k],a=[C,"flowmachine_flowmachinenetwork($select=flowmachineid)"];return e&&(r.push("supportedscenario"),a.push("flowmachinegroup_flowmachinenetwork($select=flowmachinegroupid)")),t&&(r.push("statuserrormessage"),r.push("provisioningstate"),n&&(r.push("networkmetadata"),a.push("CredentialId($select=credentialid)"))),i&&(r.push("ismanaged"),r.push("iscustomizable"),r.push("solutionid")),{$expand:a.join(","),$select:r.join(",")}}},20720:function(e,t,i){"use strict";i.d(t,"c",(function(){return m})),i.d(t,"a",(function(){return g})),i.d(t,"b",(function(){return v}));var n=i(12362),r=i.n(n),a=i(15985),o=i(20719),s=i(20706),c=i(16744);function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function h(e,t,i){return(t=p(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var m="flowmachinenetworks",g=function(){function e(t,i,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.httpClient=t,this.featureFlags=i,this.environmentStore=n,this.environmentCapabilityStore=r}var t,i,n;return t=e,(i=[{key:"createVirtualNetwork",value:function(e,t,i,n){var r={name:e,type:a.m.AzureAdJoin,description:t||null,subnet:i};return this.isVirtualNetworkScenarioSupported&&void 0!==n&&(r.supportedscenario=n),this.httpClient.createRecord(m,r,this.defaultVirtualNetworksParameters,!0)}},{key:"browseVirtualNetworks",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.httpClient.retrieveMultiple(m,f(e,this.isVirtualNetworkScenarioSupported,this.isVirtualNetworkHybridJoinEnabled,this.isManagedSupportEnabled),t?o.b:void 0)}},{key:"browseVirtualNetworksMore",value:function(e){return this.httpClient.retrieveMore(e,o.b)}},{key:"getVirtualNetworkDetails",value:function(e){return this.httpClient.retrieveRecord(m,e,Object(o.e)(this.isVirtualNetworkScenarioSupported,this.isVirtualNetworkHybridJoinEnabled,this.isManagedSupportEnabled))}},{key:"editVirtualNetworkDetails",value:function(e,t,i){var n={};return void 0!==t&&(n.name=t),void 0!==i&&(n.description=i),this.httpClient.updateRecord(m,e,n,this.defaultVirtualNetworksParameters,!0)}},{key:"deleteVirtualNetwork",value:function(e){return this.httpClient.deleteRecord(m,e)}},{key:"retrieveVirtualNetworkPrincipalAccess",value:function(e,t){return this.httpClient.retrieveRecordPrincipalAccess(e,"flowmachinenetworkid","Microsoft.Dynamics.CRM.flowmachinenetwork",t)}},{key:"batchVirtualNetworksPrincipalAccess",value:function(e,t){var i=function(e,t){return Object(s.d)(e,t,"flowmachinenetworkid","Microsoft.Dynamics.CRM.flowmachinenetwork")}(e,t);return this.httpClient.batchRequests(i)}},{key:"defaultVirtualNetworksParameters",get:function(){return Object(o.e)(this.isVirtualNetworkScenarioSupported,this.isVirtualNetworkHybridJoinEnabled,!1)}},{key:"isVirtualNetworkScenarioSupported",get:function(){return Object(c.kb)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)}},{key:"isVirtualNetworkHybridJoinEnabled",get:function(){return Object(c.ib)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)}},{key:"isManagedSupportEnabled",get:function(){return Object(c.fb)(this.featureFlags)}}])&&d(t.prototype,i),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(){return{filters:{virtualNetworkTypes:[],accessList:[]},currentUserId:void 0,orderBy:s.b}}function f(e,t,i,n){var a=Object(o.e)(t,i,n),c=(a=l(l({},a),Object(s.e)(e))).$filter?[a.$filter]:[];c.push("(statecode eq 0)");var u=r()((null==e?void 0:e.filters.virtualNetworkTypes)||[]).sort();if(u.length>0&&c.push("(".concat(u.map(e=>"type eq ".concat(e)).join(" or "),")")),t&&e.filters.scenario&&e.filters.scenario.length>0){var h=r()(e.filters.scenario).sort().map(e=>"none"===e?"supportedscenario eq null":"supportedscenario eq ".concat(e)).join(" or ");c.push("(".concat(h,")"))}if(e.filters.provisioningState&&e.filters.provisioningState.length>0){var d=r()(e.filters.provisioningState).sort().map(e=>"provisioningstate eq ".concat(e)).join(" or ");c.push("(".concat(d,")"))}c.sort();var p=c.filter(Boolean).join(" and ");return p&&(a.$filter=p),a}},20721:function(e,t,i){"use strict";i.d(t,"c",(function(){return m})),i.d(t,"b",(function(){return g})),i.d(t,"a",(function(){return v}));var n=i(12362),r=i.n(n),a=i(12366),o=i(20706),s=i(20718),c=i(15985),u=i(20719),l=i(16749);function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m(e){return Object(l.a)()||e.enableSupportOfGroupKeyRotationPhase2?"(statecode ne 1 or (flowgrouptype eq 545940001 and statuscode eq 4) or statuscode eq 2)":"(statecode ne 1 or statuscode eq 2)"}function g(e,t,i,n,l,h,p,g,v,f,C){var y=Object(u.c)(t,i,n,l,p,g,v,f,C);y=d(d({},y),Object(o.e)(e));var _=m(h),b=y.$filter?[y.$filter]:[];b.push(_);var M=r()((null==e?void 0:e.filters.machineGroupTypes)||[]).sort();M.length>0&&b.push("(".concat(M.map(e=>"flowgrouptype eq ".concat(e)).join(" or "),")"));var k=e.filters.groupCapacity||[];if(1===k.length)switch(k[0]){case s.a.Empty:b.push("(not ".concat(u.l,"/any())"));break;case s.a.NotEmpty:b.push("(".concat(u.l,"/any())"));break;case s.a.NotEmptyNotBadStateOrProvisionedHostedGroup:b.push("(".concat(u.l,"/any(m:\n            m/Microsoft.Dynamics.CRM.NotIn(\n              PropertyName='statuscode',\n              PropertyValues=[\n                '").concat(c.i.Inactive,"',\n                '").concat(c.i.ManualMaintenance,"',\n                '").concat(c.i.Error,"',\n                '").concat(c.i.Provisioning,"'\n              ]\n            )\n          )\n          ").concat(t?" or (\n                  managementtype eq ".concat(c.g.Managed,"\n                  and provisioningstate eq ").concat(c.k.Provisioned,"\n                  and Microsoft.Dynamics.CRM.NotIn(\n                    PropertyName='statuscode',\n                    PropertyValues=[\n                      '").concat(c.a.Inactive,"',\n                      '").concat(c.a.ManualMaintenance,"'\n                    ]\n                  )\n                )"):"",")"))}if(t){var w=e.filters.managementType||[];1===w.length&&w[0]!==a.r.All&&b.push("(managementtype eq ".concat(c.g[w[0]],")"))}if(C){var S,A=(null===(S=e.filters)||void 0===S?void 0:S.machineGroupUsageType)||[];A.length>0&&b.push("(".concat(A.map(e=>"usagetype eq ".concat(e)).join(" or "),")"))}b.sort();var I=b.filter(Boolean).join(" and ");return I&&(y.$filter=I),y}function v(e,t,i,n,r,a,s,l,h,p,m){var g=Object(u.d)(t,i,n,r,a,s,l,h,p,m),v=Object(o.e)(e),f=d(d({},g),v),C=function(e,t,i,n){var r=e.$filter?[e.$filter]:[];if(t.$filter&&r.push(t.$filter),i.filters.parentGroupNames.length>0||!!i.filters.includeDefaultGroups){var a=i.filters.parentGroupNames.map(e=>"_flowmachinegroupid_value eq '".concat(e,"'"));i.filters.includeDefaultGroups&&a.push("FlowMachineGroupId/flowgrouptype eq ".concat(c.b.Default)),r.push("(".concat(a.join(" or "),")"))}return n&&void 0!==i.filters.machineType&&r.push("(hostingtype eq ".concat(i.filters.machineType,")")),r.sort(),r.filter(Boolean).join(" and ")||void 0}(g,v,e,s);return C&&(f.$filter=C),f.$count="true",f}},20903:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(20904),r=i(20906),a=new(i(20708).b)(n.a,r.a)},20904:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=new(i(20905).a)},20905:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n,r,a,o=i(11773),s=i(12348);function c(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function l(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function d(e,t,i,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var p=(r=d((n=l((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"xrmTeams",r,this),c(this,"xrmUsers",a,this),Object(o.runInAction)(()=>{this.xrmTeams=new s.a({getKey:e=>e.teamid}),this.xrmUsers=new s.a({getKey:e=>e.systemuserid})})}))).prototype,"xrmTeams",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=d(n.prototype,"xrmUsers",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n)},20906:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(20904),r=new(i(20907).a)(n.a)},20907:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n,r,a,o=i(11773),s=i(12347),c=i(15427),u=i(15431);function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var d,p,m,g,v,f,C=((a=function(){function e(t){var i,n,a,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.xrmIdentityStore=t,i=this,n="entitySharedPrincipalAndAccess",c=this,(a=r)&&Object.defineProperty(i,n,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(c):void 0}),this.userEntityAccessRights=void 0,this.userPrivileges=void 0,this.hasPrivileges=e=>{var t=this.userPrivileges.entities.getEntity(e);return!!(t&&t.length>0)},Object(o.runInAction)(()=>{this.entitySharedPrincipalAndAccess=new s.a({getKey:e=>e.entityId}),this.userEntityAccessRights=new s.a({getKey:e=>e.entityId}),this.userPrivileges=new s.a({getKey:e=>e[0].PrivilegeName})})}var t,i,n;return t=e,(i=[{key:"getEntitySharedToWhomByType",value:function(e,t){var i=this.entitySharedPrincipalAndAccess.entities.getEntity(e);return i?i.value.filter(e=>e.Principal["@odata.type"]===t).map(e=>e.Principal.ownerid):[]}},{key:"getEntitySharedWithIdsWithOwner",value:function(e,t){if(!t)return[];var i=t.xrmOwner,n=this.getEntitySharedWithPrincipals(e);return Object(u.c)([i].concat(n.filter(e=>e.ownerid!==i.ownerid)))}},{key:"getEntitySharedWithIds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.getEntitySharedToWhomByType(e,c.l.Team).map(e=>{var i=this.xrmIdentityStore.xrmTeams.getEntity(e);return i&&(t?i.teamid:i.azureactivedirectoryobjectid)}),n=this.getEntitySharedToWhomByType(e,c.l.SystemUser).map(e=>{var i=this.xrmIdentityStore.xrmUsers.getEntity(e);return i&&(t?i.systemuserid:i.azureactivedirectoryobjectid)});return Object(u.c)(i.concat(n))}},{key:"getEntitySharedWithPrincipals",value:function(e){var t;return(null===(t=this.entitySharedPrincipalAndAccess.entities.getEntity(e))||void 0===t?void 0:t.value.map(e=>e.Principal))||[]}},{key:"isSharedToDeactivatedUser",value:function(e){return Object(u.c)(e.value.map(e=>this.xrmIdentityStore.xrmUsers.getEntity(e.Principal.ownerid))).filter(e=>e.isdisabled&&!e.islicensed).length>0}}])&&l(t.prototype,i),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()).userPrivilegesDefaultCollectionKey="UserPrivileges",d=(n=a).prototype,p="entitySharedPrincipalAndAccess",m=[o.observable],g={configurable:!0,enumerable:!0,writable:!0,initializer:null},f={},Object.keys(g).forEach((function(e){f[e]=g[e]})),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=m.slice().reverse().reduce((function(e,t){return t(d,p,e)||e}),f),v&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(v):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(d,p,f),f=null),r=f,n)},20990:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(20991),r=i(20906),a=i(15460),o=i(17448),s=i(13087),c=i(20995),u=new n.a(a.b,r.a,c.a,o.a,s.a)},20991:function(e,t,i){"use strict";i.d(t,"a",(function(){return w})),i.d(t,"c",(function(){return D})),i.d(t,"b",(function(){return P}));var n=i(12362),r=i.n(n),a=i(20992),o=i(20706),s=i(17269),c=i(20993),u=i(20665),l=i(20994),h=i(15419),d=i(13009),p=i(15992),m=i(16792),g=i(15427),v=i(15959),f=i(15388),C=i(15395),y=i(15396);function _(e,t,i,n,r,a,o){try{var s=e[a](o),c=s.value}catch(u){return void i(u)}s.done?t(c):Promise.resolve(c).then(n,r)}function b(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){_(a,n,r,o,s,"next",e)}function s(e){_(a,n,r,o,s,"throw",e)}o(void 0)}))}}function M(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function k(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var w=function(){function e(t,i,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.httpClient=t,this.store=i,this.xrmIdentityService=n,this.graphService=r,this.loggingService=o,this.entityManagerServiceHelper=void 0,this.workflowKeyAttributeName="workflowid",this.workflowFullyQualifiedLogicalName="Microsoft.Dynamics.CRM.workflow",this.workflowEntityLogicalName="workflows",this.machineGroupAttributeName="flowmachinegroupid",this.machineGroupFullyQualifiedLogicalName="Microsoft.Dynamics.CRM.flowmachinegroup",this.machineGroupEntityLogicalName="flowmachinegroups",this.machineImageAttributeName="flowmachineimageid",this.machineImageFullyQualifiedLogicalName="Microsoft.Dynamics.CRM.flowmachineimage",this.machineImageEntityLogicalName="flowmachineimages",this.virtualNetworkAttributeName="flowmachinenetworkid",this.virtualNetworkFullyQualifiedLogicalName="Microsoft.Dynamics.CRM.flowmachinenetwork",this.virtualNetworkEntityLogicalName="flowmachinenetworks",this.WorkQueueAttributeName="workqueueid",this.WorkQueueFullyQualifiedLogicalName="Microsoft.Dynamics.CRM.workqueue",this.WorkQueueEntityLogicalName="workqueues",this.CredentialAttributeName="credentialid",this.CredentialFullyQualifiedLogicalName="Microsoft.Dynamics.CRM.credential",this.CredentialEntityLogicalName=v.c.entitySetName,this.CredentialApplicationAttributeName="flowcredentialapplicationid",this.CredentialApplicationFullyQualifiedLogicalName="Microsoft.Dynamics.CRM.flowcredentialapplication",this.CredentialApplicationEntityLogicalName=v.b.entitySetName,this.DesktopFlowModuleAttributeName="desktopflowmoduleid",this.DesktopFlowModuleFullyQualifiedLogicalName="Microsoft.Dynamics.CRM.desktopflowmodule",this.DesktopFlowModuleEntityLogicalName="desktopflowmodules",this.changeDesktopFlowAccess=(e,t,i)=>this.changeEntityAccess(this.workflowEntityLogicalName,e,t,i,this.batchChangeAccess,h.b.BatchDesktopFlowChangeAccess,h.a.DesktopFlowsDetails,()=>this.retrieveDesktopFlowSharedPrincipalAndAccess(e,!0)),this.changeMachineGroupAccess=(e,t,i)=>this.changeEntityAccess(this.machineGroupEntityLogicalName,e,t,i,this.batchChangeAccess,s.b.BatchMachineGroupChangeAccess,s.a.TargetDetails,()=>this.retrieveMachineGroupSharedPrincipalAndAccess(e,!0)),this.changeMachineImageAccess=(e,t,i)=>this.changeEntityAccess(this.machineImageEntityLogicalName,e,t,i,this.batchChangeAccess,s.b.BatchMachineImageChangeAccess,s.a.TargetDetails,()=>this.retrieveMachineImageSharedPrincipalAndAccess(e,!0)),this.changeVirtualNetworkAccess=(e,t,i)=>this.changeEntityAccess(this.virtualNetworkEntityLogicalName,e,t,i,this.batchChangeAccess,s.b.BatchVirtualNetworkChangeAccess,s.a.TargetDetails,()=>this.retrieveVirtualNetworkSharedPrincipalAndAccess(e,!0)),this.batchChangeAccess=(e,t,i,n)=>this.httpClient.batchChangeEntityAccess(e,t,[],i.map(I),n),this.changeWorkQueueAccess=(e,t,i)=>this.changeEntityAccess(this.WorkQueueEntityLogicalName,e,t,i,this.batchChangeAccess,a.b.BatchWorkQueueChangeAccess,a.a.WorkQueueDetails,()=>this.retrieveWorkQueueSharedPrincipalAndAccess(e,!0)),this.changeCredentialAccess=(e,t,i)=>this.changeEntityAccess(this.CredentialEntityLogicalName,e,t,i,this.batchChangeAccess,u.b.BatchCredentialChangeAccess,u.a.CredentialsPage,()=>this.retrieveCredentialSharedPrincipalAndAccess(e,!0)),this.changeCredentialApplicationAccess=(e,t,i,n)=>this.changeEntityAccess(this.CredentialApplicationEntityLogicalName,e,i,n,this.batchChangeAccess,c.b.BatchCredentialChangeAccess,t,()=>this.retrieveCredentialApplicationSharedPrincipalAndAccess(e,t,!0)),this.changeDesktopFlowModuleAccess=(e,t,i)=>this.changeEntityAccess(this.DesktopFlowModuleEntityLogicalName,e,t,i,this.batchChangeAccess,l.b.BatchDesktopFlowModuleChangeAccess,l.a.CustomActionsPage,()=>this.retrieveDesktopFlowModuleSharedPrincipalAndAccess(e,!0)),this.retrieveEntitySharedPrincipalAndAccess=(e,t,i,n,r,a,o)=>this.entityManagerServiceHelper.fetchEntity(this.store.entitySharedPrincipalAndAccess,e,()=>this.httpClient.retrieveSharedPrincipalsAndAccess(t,i,e).then(t=>t&&t.data&&{entityId:e,value:t.data.PrincipalAccesses.map(A)}),n,r,a,o,()=>{P(e,this.xrmIdentityService,this.store,this.graphService)},p.i),this.entityManagerServiceHelper=new f.a(o)}var t,i,n;return t=e,(i=[{key:"retrieveUserPrivilegeByName",value:function(e,t,i,n){return this.entityManagerServiceHelper.fetchEntity(this.store.userPrivileges,t,()=>this.httpClient.retrieveUserPrivilegesByName(e,t).then(e=>e.data.RolePrivileges||[]),"retrieveUserPrivilegesByName",l.b.FetchUsersPrivilegesByName,i,n)}},{key:"retrieveDesktopFlowSharedPrincipalAndAccess",value:function(e,t){return this.retrieveEntitySharedPrincipalAndAccess(e,this.workflowKeyAttributeName,this.workflowFullyQualifiedLogicalName,"retrieveDesktopFlowSharedPrincipalAndAccess",h.b.RetrieveDesktopFlowAccess,h.a.DesktopFlowsDetails,t)}},{key:"retrieveDesktopFlowUserAccessRights",value:function(e,t,i){return this.entityManagerServiceHelper.fetchEntity(this.store.userEntityAccessRights,t,()=>this.httpClient.retrieveRecordPrincipalAccess(e,this.workflowKeyAttributeName,this.workflowFullyQualifiedLogicalName,t).then(e=>e&&e.data&&{entityId:t,value:D(e.data.AccessRights)}),"retrieveDesktopFlowUserAccessRights",h.b.RetrieveUserDesktopFlowAccessRights,h.a.DesktopFlowsDetails,i)}},{key:"retrieveMachineGroupSharedPrincipalAndAccess",value:function(e,t){return this.retrieveEntitySharedPrincipalAndAccess(e,this.machineGroupAttributeName,this.machineGroupFullyQualifiedLogicalName,"retrieveMachineGroupSharedPrincipalAndAccess",s.b.RetrieveMachineGroupAccess,s.a.TargetDetails,t)}},{key:"retrieveMachineImageSharedPrincipalAndAccess",value:function(e,t){return this.retrieveEntitySharedPrincipalAndAccess(e,this.machineImageAttributeName,this.machineImageFullyQualifiedLogicalName,"retrieveMachineImageSharedPrincipalAndAccess",s.b.RetrieveMachineImageAccess,s.a.TargetDetails,t)}},{key:"retrieveVirtualNetworkSharedPrincipalAndAccess",value:function(e,t){return this.retrieveEntitySharedPrincipalAndAccess(e,this.virtualNetworkAttributeName,this.virtualNetworkFullyQualifiedLogicalName,"retrieveVirtualNetworkSharedPrincipalAndAccess",s.b.RetrieveVirtualNetworkAccess,s.a.TargetDetails,t)}},{key:"retrieveWorkQueueUserAccessRights",value:function(e,t,i){return this.entityManagerServiceHelper.fetchEntity(this.store.userEntityAccessRights,t,()=>this.httpClient.retrieveRecordPrincipalAccess(e,this.WorkQueueAttributeName,this.WorkQueueFullyQualifiedLogicalName,t).then(e=>e&&e.data&&{entityId:t,value:D(e.data.AccessRights)}),"retrieveWorkQueueUserAccessRights",a.b.RetrieveWorkQueueUserAccessRights,a.a.WorkQueueDetails,i,void 0,p.i)}},{key:"retrieveWorkQueueSharedPrincipalAndAccess",value:function(e,t){return this.retrieveEntitySharedPrincipalAndAccess(e,this.WorkQueueAttributeName,this.WorkQueueFullyQualifiedLogicalName,"retrieveWorkQueueSharedPrincipalAndAccess",a.b.RetrieveWorkQueueAccess,a.a.WorkQueueDetails,t)}},{key:"batchCurrentUserWorkQueuesAccessRights",value:function(e,t){return this.entityManagerServiceHelper.batchFetchEntity(this.store.userEntityAccessRights,t,t=>this.httpClient.batchRequests(Object(o.d)(e,t,this.WorkQueueAttributeName,this.WorkQueueFullyQualifiedLogicalName)).then(e=>Object(C.i)(t,e,S)),"batchCurrentUserWorkQueuesAccessRights",a.b.BatchCurrentUserWorkQueuesAccessRights,a.a.WorkQueueList)}},{key:"retrieveCredentialUserAccessRights",value:function(e,t,i){return this.entityManagerServiceHelper.fetchEntity(this.store.userEntityAccessRights,t,()=>this.httpClient.retrieveRecordPrincipalAccess(e,this.CredentialAttributeName,this.CredentialFullyQualifiedLogicalName,t).then(e=>e&&e.data&&{entityId:t,value:D(e.data.AccessRights)}),"retrieveCredentialUserAccessRights",u.b.RetrieveCredentialUserAccessRights,u.a.CredentialsPage,i)}},{key:"retrieveCredentialSharedPrincipalAndAccess",value:function(e,t){return this.retrieveEntitySharedPrincipalAndAccess(e,this.CredentialAttributeName,this.CredentialFullyQualifiedLogicalName,"retrieveCredentialSharedPrincipalAndAccess",u.b.RetrieveCredentialAccess,u.a.CredentialsPage,t)}},{key:"batchCurrentUserCredentialsAccessRights",value:function(e,t){return this.entityManagerServiceHelper.batchFetchEntity(this.store.userEntityAccessRights,t,t=>this.httpClient.batchRequests(Object(o.d)(e,t,this.CredentialAttributeName,this.CredentialFullyQualifiedLogicalName)).then(e=>Object(C.i)(t,e,S)),"batchCurrentUserCredentialsAccessRights",u.b.BatchCurrentUserCredentialsAccessRights,u.a.CredentialsPage)}},{key:"retrieveCredentialApplicationUserAccessRights",value:function(e,t,i,n){return this.entityManagerServiceHelper.fetchEntity(this.store.userEntityAccessRights,t,()=>this.httpClient.retrieveRecordPrincipalAccess(e,this.CredentialApplicationAttributeName,this.CredentialApplicationFullyQualifiedLogicalName,t).then(e=>e&&e.data&&{entityId:t,value:D(e.data.AccessRights)}),"retrieveCredentialApplicationUserAccessRights",c.b.RetrieveCredentialUserAccessRights,i,n)}},{key:"retrieveCredentialApplicationSharedPrincipalAndAccess",value:function(e,t,i){return this.retrieveEntitySharedPrincipalAndAccess(e,this.CredentialApplicationAttributeName,this.CredentialApplicationFullyQualifiedLogicalName,"retrieveCredentialApplicationSharedPrincipalAndAccess",c.b.RetrieveCredentialAccess,t,i)}},{key:"batchCurrentUserCredentialsApplicationAccessRights",value:function(e,t,i){return this.entityManagerServiceHelper.batchFetchEntity(this.store.userEntityAccessRights,t,t=>this.httpClient.batchRequests(Object(o.d)(e,t,this.CredentialApplicationAttributeName,this.CredentialApplicationFullyQualifiedLogicalName)).then(e=>Object(C.i)(t,e,S)),"batchCurrentUserCredentialApplicationsAccessRights",c.b.BatchCurrentUserCredentialsAccessRights,i)}},{key:"retrieveDesktopFlowModuleUserAccessRights",value:function(e,t,i){return this.entityManagerServiceHelper.fetchEntity(this.store.userEntityAccessRights,t,()=>this.httpClient.retrieveRecordPrincipalAccess(e,this.DesktopFlowModuleAttributeName,this.DesktopFlowModuleFullyQualifiedLogicalName,t).then(e=>e&&e.data&&{entityId:t,value:D(e.data.AccessRights)}),"retrieveDesktopFlowModuleUserAccessRights",l.b.RetrieveCustomActionUserAccessRights,l.a.CustomActionsPage,i,void 0,p.i)}},{key:"batchCurrentUserDesktopFlowModulesAccessRights",value:function(e,t){return this.entityManagerServiceHelper.batchFetchEntity(this.store.userEntityAccessRights,t,t=>this.httpClient.batchRequests(Object(o.d)(e,t,this.DesktopFlowModuleAttributeName,this.DesktopFlowModuleFullyQualifiedLogicalName)).then(e=>Object(C.i)(t,e,S)),"batchCurrentUserDesktopFlowModulesAccessRight",l.b.BatchCurrentUserDesktopFlowModulesAccessRights,l.a.CustomActionsPage,!1,C.e,void 0,p.i)}},{key:"retrieveDesktopFlowModuleSharedPrincipalAndAccess",value:function(e,t){return this.retrieveEntitySharedPrincipalAndAccess(e,this.DesktopFlowModuleAttributeName,this.DesktopFlowModuleFullyQualifiedLogicalName,"retrieveDesktopFlowModuleSharedPrincipalAndAccess",l.b.RetrieveDesktopFlowModuleSharedAndPrincipalAccess,l.a.CustomActionsPage,t)}},{key:"changeEntityAccess",value:function(e,t,i,n,a,o,s,c){if(i.length>0||n.length>0){var u=a(e,t,i,n).then(e=>{var t=(e.data||[]).filter(e=>e.statusCode>=300).map(e=>JSON.parse(e.payload)),i=r()(t.map(e=>e.error.code)).join(",");if(t.length>0)throw new d.a(p.a.InnerBatchErrors,i,t)});return Object(y.d)({loggingService:this.loggingService,promise:u,eventName:o,sourcePage:s,getStatus:p.b,eventData:{entity:e,recordId:t,accessToModify:i,accessToRevoke:n}}).then(c)}return Promise.resolve()}}])&&M(t.prototype,i),n&&M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e,t){return{entityId:t,value:D(e.AccessRights)}}function A(e){return{AccessMask:D(e.AccessMask),Principal:e.Principal}}function I(e){return{AccessMask:e.AccessMask.join(","),Principal:e.Principal}}function D(e){var t=[];return e.split(",").forEach(e=>{var i=e.trim();Object.values(m.a).indexOf(i)>=0&&t.push(i)}),t}function P(e,t,i,n){return F.apply(this,arguments)}function F(){return(F=b((function*(e,t,i,n){var r=t.batchFetchUsers(i.getEntitySharedToWhomByType(e,g.l.SystemUser)),a=t.batchFetchTeams(i.getEntitySharedToWhomByType(e,g.l.Team));yield Promise.all([r,a]);var o=i.getEntitySharedWithIds(e);for(var s of o)n.getThumbnailPhoto(s)}))).apply(this,arguments)}},20992:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n=function(e){return e.WorkQueueList="WorkQueueList",e.WorkQueueDetails="WorkQueueDetails",e.WorkQueueItemList="WorkQueueItemList",e.WorkQueueItemDetails="WorkQueueItemDetails",e.WorkQueueRunList="WorkQueueRunList",e.WorkQueueAutomationCenter="WorkQueueAutomationCenter",e}({}),r=function(e){return e.FetchWorkQueueList="CC_DWM_Fetch_FetchWorkQueueList",e.FetchMoreWorkQueues="CC_DWM_Fetch_FetchMoreWorkQueues",e.FetchWorkQueue="CC_DWM_Fetch_FetchWorkQueue",e.FetchWorkQueueItem="CC_DWM_Fetch_FetchWorkQueueItem",e.UpdateWorkQueue="CC_DWM_Action_UpdateWorkQueue",e.UpdateWorkQueueStatus="CC_DWM_Action_UpdateWorkQueueStatus",e.UpdateWorkQueueItem="CC_DWM_Action_UpdateWorkQueueItem",e.FetchWorkQueueItemHook="CC_DWM_Fetch_FetchWorkQueueItemHook",e.BatchUpdateWorkQueueItems="CC_DWM_Action_BatchUpdateWorkQueueItems",e.FetchWorkQueueItemList="CC_DWM_Fetch_FetchWorkQueueItemList",e.FetchWorkQueuesItemsCountPerState="CC_DWM_Fetch_FetchWorkQueuesItemsCountPerState",e.FetchWorkQueuesItemsCountPerSlaStatus="CC_DWM_Fetch_FetchWorkQueuesItemsCountPerSlaStatus",e.CreateWorkQueue="CC_DWM_Action_CreateWorkQueue",e.DeleteWorkQueue="CC_DWM_Action_DeleteWorkQueue",e.CreateWorkQueueItem="CC_DWM_Action_CreateWorkQueueItem",e.DeleteWorkQueueItem="CC_DWM_Action_DeleteWorkQueueItem",e.ClearWorkQueue="CC_DWM_Action_ClearWorkQueue",e.BatchDeleteWorkQueueItems="CC_DWM_Action_BatchDeleteWorkQueueItems",e.RetrieveWorkQueueAccess="CC_DWM_Fetch_RetrieveWorkQueueAccess",e.RetrieveWorkQueueUserAccessRights="CC_DWM_Fetch_RetrieveWorkQueueUserAccessRights",e.BatchWorkQueueChangeAccess="CC_DWM_Action_BatchWorkQueueChangeAccess",e.BatchCurrentUserWorkQueuesAccessRights="CC_DWM_Fetch_BatchCurrentUserWorkQueuesAccessRights",e.HydrateMachineProcessor="CC_DWM_Fetch_HydrateMachineProcessor",e.HydrateCloudFlowProcessor="CC_DWM_Fetch_HydrateCloudFlowProcessor",e.HydrateMachineListProcessor="CC_DWM_Fetch_HydrateMachineListProcessor",e.HydrateCloudFlowListProcessor="CC_DWM_Fetch_HydrateCloudFlowListProcessor",e.HydrateAllConsumersAndProcessors="CC_DWM_Fetch_HydrateAllConsumersAndProcessors",e.RetrieveWorkItemsProcessors="CC_DWM_Fetch_RetrieveWorkItemsProcessors",e.RetrieveWorkItemsProcessingUser="CC_DWM_Fetch_RetrieveWorkItemsProcessingUser",e.RetrieveWorkItemsMachineUser="CC_DWM_Fetch_RetrieveWorkItemsMachineUser",e.RetrieveWorkItemsRetryCount="CC_DWM_Fetch_RetrieveWorkItemsRetryCount",e.RetrieveWorkQueueItemCount="CC_DWM_Fetch_RetrieveWorkQueueItemCount",e.ClearQueueItemCount="CC_DWM_Fetch_ClearQueueItemCount",e.WorkQueuesListRefreshWorkQueue="CC_DWM_Fetch_WorkQueuesListRefreshWorkQueue",e.WorkQueueDetailsPageRefresh="CC_DWM_Fetch_WorkQueueDetailsPageRefresh",e.WorkQueuesItemListPageRefresh="CC_DWM_Fetch_WorkQueuesItemListPageRefresh",e.FetchMoreWorkQueueItems="CC_DWM_Fetch_FetchMoreWorkQueueItems",e.WorkQueuesListPage="CC_DWM_Page_WorkQueuesListPage",e.WorkQueueItemsListCard="CC_DWM_Page_WorkQueueItemsListCard",e.WorkQueuePage="CC_DWM_Page_WorkQueuePage",e.WorkQueueDetailsPage="CC_DWM_Page_WorkQueueDetailsPage",e.WorkQueueItemListPage="CC_DWM_Page_WorkQueueItemListPage",e.WorkQueueItemDetailsPage="CC_DWM_Page_WorkQueueItemDetailsPage",e.WorkQueueDetailsSharedWithCard="CC_DWM_Page_WorkQueueDetailsSharedWithCard",e.WorkQueueItemEditionPanel="CC_DWM_Page_WorkQueueItemEditionPanel",e.WorkQueueSolutionReferenceCardStart="CC_DWM_Card_WorkQueueSolutionReferenceCardStart",e.WorkQueueSolutionReferenceCardEnd="CC_DWM_Card_WorkQueueSolutionReferenceCardEnd",e.WorkQueueItemDetailsCard="CC_DWM_Card_WorkQueueItemDetailsCard",e.WorkQueueItemExecutionContextCard="CC_DWM_Card_WorkQueueItemExecutionContextCard",e.WorkQueueItemNotesCard="CC_DWM_Card_WorkQueueItemNotesCard",e.WorkQueueCreationModalSaveButton_Clicked="CC_DWM_UI_WorkQueueCreation_Clicked",e.CreateNewWorkQueueCommandBarButton_Clicked="CC_DWM_UI_CreateNewWorkQueueCommandBar_Clicked",e.EditWorkQueueCommandBarButton_Clicked="CC_DWM_UI_EditWorkQueueCommandBar_Clicked",e.EditWorkQueueStatusCommandBarButton_Clicked="CC_DWM_UI_EditWorkQueueStatusCommandBar_Clicked",e.DeleteWorkQueueCommandBarButton_Clicked="CC_DWM_UI_DeleteWorkQueueCommandBarButton_Clicked",e.DeleteWorkQueueDialogDismissButton_Clicked="CC_DWM_UI_DeleteWorkQueueDialogDismissButton_Clicked",e.ClearWorkQueueDialogDismissButton_Clicked="CC_DWM_UI_ClearWorkQueueDialogDismissButton_Clicked",e.ManageAccessWorkQueueCommandBarButton_Clicked="CC_DWM_UI_ManageAccessWorkQueueCommandBar_Clicked",e.SeeDetailsWorkQueueCommandBarButton_Clicked="CC_DWM_UI_SeeDetailsWorkQueueCommandBar_Clicked",e.DeleteWorkQueuesCommandBarButton_Clicked="CC_DWM_UI_DeleteWorkQueuesCommandBar_Clicked",e.CreateNewWorkQueueEmptyStateButton_Clicked="CC_DWM_UI_CreateNewWorkQueueEmptyState_Clicked",e.WorkQueueAdvancedDetails_Clicked="CC_DWM_UI_WorkQueueAdvancedDetails_Clicked",e.WorkQueueDetailsAnchor_Clicked="CC_DWM_UI_WorkQueueDetailsAnchor_Clicked",e.WorkQueueDetailsManageAccess_Clicked="CC_DWM_UI_WorkQueueDetailsManageAccess_Clicked_Clicked",e.WorkQueueDetailsSeeAllItems_Clicked="CC_DWM_UI_WorkQueueDetailsSeeAllItems_Clicked",e.WorkQueueDetailsRefresh_Clicked="CC_DWM_UI_WorkQueueDetailsRefresh_Clicked",e.WorkQueueItemListRefresh_Clicked="CC_DWM_UI_WorkQueueItemListRefresh_Clicked",e.WorkQueueRunListRefresh_Clicked="CC_DWM_UI_WorkQueueItemListRefresh_Clicked",e.WorkQueueDetailsCardRefreshItems_Clicked="CC_DWM_UI_WorkQueueDetailsCardRefreshItems_Clicked",e.WorkQueueItemEditionPanel_SaveButton_Clicked="CC_DWM_UI_WorkQueueItemEditionPanel_SaveButton_Clicked",e.CreateNewWorkQueueItemCommandBarButton_Clicked="CC_DWM_UI_CreateNewWorkQueueItemCommandBarButton_Clicked",e.EditWorkQueueItemCommandBarButton_Clicked="CC_DWM_UI_EditWorkQueueItemCommandBarButton_Clicked",e.EditWorkQueueItemStatusCommandBarButton_Clicked="CC_DWM_UI_EditWorkQueueItemStatusCommandBarButton_Clicked",e.BulkEditWorkQueueItemsStatusCommandBarButton_Clicked="CC_DWM_UI_BulkEditWorkQueueItemsStatusCommandBarButton_Clicked",e.SeeDetailsWorkQueueItemCommandBarButton_Clicked="CC_DWM_UI_SeeDetailsWorkQueueItemCommandBarButton_Clicked",e.DeleteWorkQueueItemCommandBarButton_Clicked="CC_DWM_UI_DeleteWorkQueueItemCommandBarButton_Clicked",e.BulkDeleteWorkQueueItemsCommandBarButton_Clicked="CC_DWM_UI_BulkDeleteWorkQueueItemsCommandBarButton_Clicked",e.DeleteWorkQueueItemDialogDismissButton_Clicked="CC_DWM_UI_DeleteWorkQueueItemDialogDismissButton_Clicked",e.WorkQueueItemsList_SortBy_Clicked="CC_DWM_UI_WorkQueueItemsList_SortBy_Clicked",e.WorkQueueItemExecutionContextConsumer_Clicked="CC_DWM_UI_WorkQueueItemExecutionContextConsumer_Clicked",e.WorkQueueItemMachineProcessor_Clicked="CC_DWM_UI_WorkQueueItemMachineProcessor_Clicked",e.WorkQueueItemCloudFlowProcessor_Clicked="CC_DWM_UI_WorkQueueItemCloudFlowProcessor_Clicked",e.WorkQueueItemsList_LoadMore_Clicked="CC_DWM_UI_WorkQueueItemsList_LoadMore_Clicked",e.WorkQueueLinkToAutomationCenter_Clicked="CC_DWM_UI_WorkQueueLinkToAutomationCenter_Clicked",e.WorkQueuePageDetailsTab_Clicked="CC_DWM_UI_WorkQueuePageDetailsTab_Clicked",e.WorkQueuePageItemListTab_Clicked="CC_DWM_UI_WorkQueuePageItemListTab_Clicked",e.WorkQueuePageRunListTab_Clicked="CC_DWM_UI_WorkQueuePageRunListTab_Clicked",e.FlowRunHistoryLink_Clicked="CC_DWM_UI_FlowRunHistoryLink_Clicked",e.MachineDisplayNameCell_Clicked="CC_DWM_UI_MachineDisplayNameCell_Clicked",e}({})},20993:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n=function(e){return e.TargetDetailsPage="TargetDetailsPage",e.TargetListPage="TargetListPage",e}({}),r=function(e){return e.RetrieveCredentialUserAccessRights="DF_CM_Fetch_RetrieveCredentialApplicationUserAccessRights",e.RetrieveCredentialAccess="DF_CM_Fetch_RetrieveCredentialApplicationAccess",e.BatchCurrentUserCredentialsAccessRights="DF_CM_Fetch_BatchCurrentUserCredentialApplicationsAccessRights",e.BatchCredentialChangeAccess="DF_CM_Fetch_BatchCredentialApplicationChangeAccess",e}({})},20994:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n=function(e){return e.CustomActionsPage="CustomActionsPage",e.CustomActionsDetailsPage="CustomActionsDetailsPage",e}({}),r=function(e){return e.CustomActionListPage="DF_Page_CustomActionListPage",e.CustomActionsDetailsList="DF_Page_CustomActionsDetailsList",e.CustomActionsDetailsPage="DF_Page_CustomActionsDetailsPage",e.CreateNewCustomActionCommandBarButton_Clicked="DF_UI_CommandBar_CreateNewCustomAction_Clicked",e.ShareCustomActionCommandBarButton_Clicked="DF_UI_CommandBar_ShareAction_Clicked",e.DeleteCustomActionCommandBarButton_Clicked="DF_UI_CommandBar_DeleteAction_Clicked",e.EditCustomActionCommandBarButton_Clicked="DF_UI_CommandBar_EditAction_Clicked",e.UploadFileCustomActionCommandBarButton_Clicked="DF_UI_CommandBar_UploadFileAction_Clicked",e.UploadCustomAction_Clicked="DF_UI_UploadingCustomAction_Clicked",e.CustomActionsDetailsList_SortBy_Clicked="DF_UI_CustomActionsDetailsList_SortBy_Clicked",e.CustomActionsDetailsList_FilterBy_Clicked="DF_UI_CustomActionsDetailsList_FilterBy_Clicked",e.CustomActionsDetailsList_RemoveFilter_Clicked="DF_UI_CustomActionsDetailsList_RemoveFilter_Clicked",e.UploadCustomActionPanel_Confirm="DF_UI_UploadCustomActionPanel_Confirm",e.UploadCustomActionPanel_Cancel="DF_UI_UploadCustomActionPanel_Cancel",e.EditCustomActionPanel_Save="DF_UI_EditCustomActionPanel_Save_Clicked",e.UpdateFileCustomActionPanel_Save="DF_UI_EditCustomActionPanel_Update_Clicked",e.CustomActionsDetailsCard="DF_UI_CustomActionsDetailsCard",e.CustomActionsDetailsSharedWithCard="DF_UI_CustomActionsDetailsSharedWithCard",e.CustomActionsDetailsManageAccess_Clicked="DF_UI_CustomActionsDetailsManageAccess_Clicked",e.CustomActionSolutionReferenceCardEnd="DF_UI_CustomActionSolutionReferenceCardEnd",e.CustomActionSolutionReferenceCardStart="DF_UI_CustomActionSolutionReferenceCardStart",e.FetchCustomActionsCapabilities="DF_Fetch_FetchCustomActionsCapabilities",e.FetchDesktopFlowModulesList="DF_Fetch_FetchDesktopFlowModulesList",e.FetchDesktopFlowModulesListUsedByDesktopFlow="DF_Fetch_FetchDesktopFlowModulesListUsedByDesktopFlow",e.FetchMoreDesktopFlowModules="DF_Fetch_FetchMoreDesktopFlowModules",e.FetchDesktopFlowModule="DF_Fetch_FetchDesktopFlowModule",e.UploadCustomActionsGroup="DF_Action_UploadCustomActionsGroup",e.DeleteDesktopFlowModule="DF_Action_DeleteDesktopFlowModule",e.UpdateDesktopFlowModule="DF_Action_UpdateDesktopFlowModule",e.UpdateFileCustomActionGroup="DF_Action_UpdateFileCustomActionsGroup",e.RetrieveCustomActionUserAccessRights="DF_Fetch_RetrieveCustomActionUserAccessRights",e.BatchCurrentUserDesktopFlowModulesAccessRights="DF_Fetch_batchCurrentUserDesktopFlowModulesAccessRights",e.RetrieveDesktopFlowModuleSharedAndPrincipalAccess="DF_Fetch_RetrieveDesktopFlowModuleSharedAndPrincipalAccess",e.BatchDesktopFlowModuleChangeAccess="DF_Fetch_BatchDesktopFlowModuleChangeAccess",e.FetchUsersPrivilegesByName="DF_Fetch_UserPrivilegesByName",e.RetrieveUserPrivilege="DF_Fetch_RetrieveUserPrivilege_",e}({})},20995:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(17268),r=i(20904),a=i(15460),o=i(13087),s=new n.a(a.b,r.a,o.a)},21006:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(12811),r=i(12754),a=i(11766),o=i(13260),s=i(12743);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e){var t=Object(n.a)(h.text,e.className),i=Object(s.a)("textWithEllipsisTooltip"),r=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){u(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({style:{overflow:"hidden",textOverflow:"ellipsis"},"data-automation-id":e.textAutomationId},e.additionalAutomationAttributes);return a.createElement(o.b,{styles:{root:t},text:e.tooltipText||e.text,id:i,automationId:e.tooltipAutomationId},e.centerTooltip?a.createElement("span",r,e.text):a.createElement("div",r,e.text))}var h=Object(r.db)({text:{whiteSpace:"nowrap",width:"100%",overflow:"hidden",textOverflow:"ellipsis"}})},21021:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(12339),r=i(15332),a=i(21022),o=i(17448),s=i(13087),c=i(15464),u=i(20904),l=i(21023),h=i(20903),d=new l.a(Object(n.b)(),a.a,h.a,o.a,s.a,r.a,c.a,u.a)},21022:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(20718),r=i(12999),a=i(15459),o=i(12345),s=i(13087),c=i(15460),u=new n.b(c.b,Object(r.a)(),o.a,a.a,s.a)},21023:function(e,t,i){"use strict";i.d(t,"a",(function(){return W})),i.d(t,"b",(function(){return Y}));var n=i(16840),r=i(12328),a=i.n(r),o=i(11773),s=i(12364),c=i(13009),u=i(15992),l=i(15427),h=i(20991),d=i(15455),p=i(15395),m=i(15396),g=i(20718),v=i(16841),f=i(15985),C=i(20708),y=i(17269),_=i(21024),b=i(21025),M=i(15950),k=i(15948),w=i(15974);function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(Object(i),!0).forEach((function(t){I(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function I(e,t,i){return(t=P(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function D(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function P(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}();return function(){var i,n=U(e);if(t){var r=U(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return E(this,i)}}function E(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(l,e);var t,i,n,r=R(l);function l(e,t,i,n,o,s,c,h){var d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(d=r.call(this,e,i,n,o,s,c,h)).httpClient=t,d.toMachineImageArray=e=>e.data?{value:e.data.value.map(e=>N(e,d.loggingService))||[],nextLink:e.data.nextLink,count:e.data.count}:{value:[]},d.toMachineArray=e=>e.data?{value:e.data.value.map(d.toMachineFrom)||[],nextLink:e.data.nextLink,count:e.data.count}:{value:[]},d.getMachineDetails=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return d.entityManagerServiceHelper.fetchEntity(d.store.machines,e,()=>d.httpClient.getMachineDetails(e).then(e=>e&&e.data&&d.toMachineFrom(e.data)),"getMachineDetails",y.b.GetMachineDetails,y.a.TargetDetails,t,e=>d.populateMachineAdditionalDetails(e.from),u.i)},d.batchFetchMachines=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[403,404];return d.entityManagerServiceHelper.batchFetchEntity(d.store.machines,e,e=>d.httpClient.batchFetchMachines(e).then(t=>Object(p.i)(e,t,d.toMachineFrom,i,u.i)),"batchFetchMachines",y.b.BatchFetchMachines,y.a.TargetList,!1,void 0,e=>{t||d.populateMachineAdditionalDetails(e.from)})},d.toGroupMetadata=e=>{var t;try{t=JSON.parse(e._unparsedGroupMetadata)}catch(n){t={}}var i=A(A({},t),{},{HmgLocation:e.hmgLocation,ReprovisioningRequired:e.reprovisioningRequired,IsShutdownSessionsFeatureEnabled:e.isShutdownSessionsFeatureEnabled,IsAutomaticallyShutdownSessionsEnabled:e.isAutomaticallyShutdownSessionsEnabled});return e?JSON.stringify(i):void 0},d.toXrmStateCode=e=>{switch(e){case v.s.Active:return f.h.Active;case v.s.Inactive:return f.h.Inactive;case v.s.Maintenance:return f.h.Maintenance;default:return f.h.Active}},d.createRpaBox=(e,t,i,n,r)=>{var o=Object(m.d)({loggingService:d.loggingService,promise:d.httpClient.createRpaBox(e,t,i,n).then(e=>(a()(e.data,"Empty response received from CreateRpaBox"),e.data.flowMachineId&&d.store.machines.collections.forEach(e=>e.invalidateCache()),r&&(r.invalidateQueries({queryKey:M.a.machineCollections()}),r.invalidateQueries({queryKey:k.a.all})),e.data.flowMachineId)),eventName:y.b.CreateRpaBox,sourcePage:y.a.TargetList,getStatus:u.g});return Object(m.d)({loggingService:d.loggingService,promise:o,eventName:y.b.CreateRpaBoxMSR,sourcePage:y.a.TargetList,getStatus:u.f})},d.createMachineGroup=(e,t,i,n,r,a)=>{if(r.managementType===v.o.Managed){var o=Object(m.d)({loggingService:d.loggingService,promise:d.httpClient.createHostedMachineGroup(e,t,r).then(e=>{var t=e&&e.data&&e.data.flowMachineGroupId;return t&&(d.store.machineGroups.collections.forEach(e=>e.invalidateCache()),a&&(a.invalidateQueries({queryKey:M.a.hostedMachineGroupCollections()}),a.invalidateQueries({queryKey:k.a.all}))),t}).then(e=>i&&e?Object(m.e)({loggingService:d.loggingService,promise:d.httpClient.editMachineGroupDetails(e,void 0,void 0,i,void 0,void 0),eventName:y.b.CreateHostedMachineGroupWithReuseSession,sourcePage:y.a.TargetList}).then(()=>e):e),eventName:y.b.CreateHostedMachineGroup,sourcePage:y.a.TargetList,getStatus:u.d});return Object(m.d)({loggingService:d.loggingService,promise:o,eventName:y.b.CreateHostedMachineGroupMSR,sourcePage:y.a.TargetList,getStatus:u.c})}var s=d.entityManagerServiceHelper.createEntity(d.store.machineGroups,()=>d.httpClient.createMachineGroup(e,t,i,n).then(e=>{var t=e&&e.data&&d.toMachineGroup(e.data);return t&&(d.store.machineGroups.collections.forEach(e=>e.invalidateCache()),d.populateMachineGroupMemberCount(e.data)),t}),"createMachineGroup",y.b.CreateMachineGroup,y.a.TargetList);return Object(m.d)({loggingService:d.loggingService,promise:s,eventName:y.b.CreateMachineGroupMSR,sourcePage:y.a.TargetList,getStatus:u.i})},d.toMachineGroupFrom=e=>A({from:e},d.toMachineGroup(e)),d.toMachineGroup=e=>{var t,i;return{id:e.flowmachinegroupid,name:e.flowmachinegroupid,type:"",xrmOwner:Y(e),properties:{displayName:e.name,description:e.description||void 0,reuseWindowsSession:e.trytoreusewindowssession||void 0,machineImageId:e._flowmachineimage_value||void 0,virtualNetworkId:e._flowmachinenetwork_value||void 0,managementType:Q(e.managementtype),provisioningState:H(e.provisioningstate),provisioningError:q(e.provisioningerror,d.loggingService,v.c.Unknown),type:B(e.flowgrouptype),maxManagedMachineCount:e.maxmanagedmachinecount,domainsetting:z(e.domainsetting),stateCode:L(e.statecode),statusCode:x(e.statuscode),primaryKeyPackage:e.primarykeypackage,passwordChangedDate:e.passwordchangeddate,multiSessionSupport:V(e.preferredqueuingtype),usageTypeOnlyComputerUse:(i=e.usagetype,i===f.c.CuaOnly),groupMetadata:$(e.groupmetadata||void 0),isManaged:e.ismanaged,isCustomizable:e.iscustomizable,solutionId:e.solutionid,machineImageDeprecationDate:null===(t=e.flowmachineimage)||void 0===t?void 0:t.deprecationdate}}},d.toMachineFrom=e=>A({from:e},d.toMachine(e)),d.toMachine=e=>{var t,i,n;if(e.machinemetadata)try{n=JSON.parse(e.machinemetadata)}catch(r){}return{id:e.flowmachineid,name:e.flowmachineid,type:"",xrmOwner:Y(e),properties:{displayName:e.name,description:e.description||void 0,agentVersion:e.agentversion,machineGroupName:e._flowmachinegroupid_value,virtualNetworkName:e._flowmachinenetworkid_value,machineImageName:null===(t=e.FlowMachineImageVersionId)||void 0===t?void 0:t._flowmachineimage_value,statusCode:e.statuscode,stateCode:L(e.statecode),hostingType:Q(e.hostingtype),createdOn:e.createdon,rpaBoxLink:null===(i=n)||void 0===i||null===(i=i.rpaBoxMetadata)||void 0===i?void 0:i.rpaBoxConnectionLink,hostedmachineerror:K(e.hostedmachineerror,d.loggingService),keyDeliveryStatus:T(e.keydeliverystatus),snapshotStartedAt:e.snapshotstartedat}}},d}return t=l,(i=[{key:"createVmImage",value:function(e,t,i){var n,r=y.b.CreateMachineImage,a=y.a.TargetList,o=function(e){switch(e){case v.k.Service:return f.d.Service;case v.k.SharedImageGallery:return f.d.SharedImageGallery;case v.k.Blob:return f.d.Blob;default:return}}(i.type);return void 0===o?Promise.reject(new Error("Invalid machine image type '".concat(i.type,"'."))):this.entityManagerServiceHelper.createEntity(this.store.vmImages,()=>this.httpClient.createVmImageAndVersion(e,i.reference,i.version,t,o,i.compatibility).then(e=>{if(!e.data)throw new c.a(c.c.createVmImageFailedInvalidResponse,"batchFetchCapabilities failed to retrieve capabilities");return j(e.data,this.loggingService)}),"createMachineImage",r,a,u.e).then(e=>(n=e,this.getCurrentUserMachineImageAccessRights(n))).then(()=>this.fetchAndUpdateDefaultMachineImageCollectionAndInvalidateOthersAsync(n)).then(()=>n)}},{key:"fetchVmImages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=C.b.getMachineImagesCollectionType(e);return this.entityManagerServiceHelper.fetchCollection(this.store.vmImages,n,()=>this.httpClient.browseVmImages(e,i).then(this.toMachineImageArray),"browseCdsVmImages",y.b.GetMachineImages,y.a.TargetList,t,e=>{e.value.forEach(e=>{this.populateOwnerAndFetchThumbnails(e.from),this.populateMachineImageUse(e)})})}},{key:"getMachineImageDetails",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.entityManagerServiceHelper.fetchEntity(this.store.vmImages,e,()=>Promise.all([this.httpClient.getMachineImageDetails(e),this.httpClient.getMachineIdsUsingImage(e)]).then(e=>{var[t,i]=e,n=i&&i.data&&i.data&&i.data.value.map(e=>e.flowmachineid)||[];return N(t&&t.data,this.loggingService,n)}),"getMachineImageDetails",y.b.GetMachineImageDetails,y.a.TargetDetails,t,e=>{this.populateOwnerAndFetchThumbnails(e.from),this.populateMachineImageUse(e)},u.i)}},{key:"fetchAndPopulateGeneralizedImageLogs",value:function(e){var t,i,n,r=this.store.vmImages.getEntity(e);return null!=r&&null!==(t=r.properties.activeImageVersion)&&void 0!==t&&t.id&&null!=r&&null!==(i=r.properties.activeImageVersion)&&void 0!==i&&i.sourceMachineId?this.httpClient.getMachineImageVersionGeneralizationLogs(null==r||null===(n=r.properties.activeImageVersion)||void 0===n?void 0:n.id).then(e=>{if(e){var t=A(A({},r),{},{properties:A(A({},null==r?void 0:r.properties),{},{activeImageVersion:A(A({},null==r?void 0:r.properties.activeImageVersion),{},{generalizationLogs:e})})});Object(s.b)(this.store.vmImages.entities,t)}}):Promise.resolve()}},{key:"deleteMachineImage",value:function(e){var t=this.entityManagerServiceHelper.deleteEntity(this.store.vmImages,e,()=>this.httpClient.deleteMachineImage(e),"deleteMachineImage",y.b.DeleteMachineImage,y.a.TargetList,!1,u.k);return Object(m.d)({loggingService:this.loggingService,promise:t,eventName:y.b.DeleteMachineImageMSR,sourcePage:y.a.TargetList,getStatus:u.j})}},{key:"browseMachinesMore",value:function(e,t){var i=C.b.getMachinesCollectionType(e);return this.entityManagerServiceHelper.fetchCollection(this.store.machines,i,()=>this.httpClient.browseMachinesMore(t).then(this.toMachineArray),"browseCdsMachinesMore",y.b.BrowseMachinesMore,y.a.TargetList,!0,e=>{e.value.forEach(e=>this.populateMachineAdditionalDetails(e.from))},{resetList:!1,setCollectionLoadedIfError:!0})}},{key:"browseMachines",value:function(e,t){return this.getCurrentUserId().then(i=>{var n,r=A(A({},e),{},{currentUserId:i});return this.entityManagerServiceHelper.fetchCollection(this.store.machines,C.b.getMachinesCollectionType(r),()=>this.httpClient.browseMachines(r).then(this.toMachineArray),"browseCdsMachines",y.b.BrowseMachines,y.a.TargetList,t,t=>{t.value.forEach(e=>this.populateMachineAdditionalDetails(e.from));var i=t.count;if(1===e.filters.parentGroupNames.length&&!e.filters.includeDefaultGroups&&1!==e.filters.accessList.length&&!e.search&&void 0!==i){var n,r={machineGroupName:null===(n=e.filters)||void 0===n?void 0:n.parentGroupNames[0],memberCount:i},a=this.store.machineGroupsMemberCount.addEntity(r,s.a);this.store.machineGroupsMemberCount.entities.setEntitySuccess(a)}},void 0,{searchValueLength:null===(n=e.search)||void 0===n?void 0:n.value.length,parentMachineGroups:e.filters.parentGroupNames,withSingleMachines:e.filters.includeDefaultGroups})})}},{key:"browseAllMachinesUsedInRuns",value:function(e){return this.entityManagerServiceHelper.fetchCollection(this.store.machines,C.a.AllMachinesUsedInRuns,()=>this.httpClient.browseMachinesUsedInRuns().then(this.toMachineArray),"browseAllMachinesUsedInRuns",y.b.BrowseAllMachinesUsedInRuns,y.a.Runs,e,e=>{e.value.forEach(e=>this.populateMachineAdditionalDetails(e.from,!1))}).then(()=>{var e=this.store.machines.getCollection(C.a.AllMachinesUsedInRuns);return e&&e.nextLink?this.fetchAllRemainingMachinesUsedInRuns(e.nextLink):Promise.resolve()})}},{key:"fetchAllRemainingMachinesUsedInRuns",value:function(e){return this.entityManagerServiceHelper.fetchCollection(this.store.machines,C.a.AllMachinesUsedInRuns,()=>this.httpClient.browseMachinesUsedInRunsMore(e).then(this.toMachineArray),"fetchAllRemainingMachinesUsedInRuns",y.b.BrowseAllMachinesUsedInRuns,y.a.Runs,!0,e=>{e.value.forEach(e=>this.populateMachineAdditionalDetails(e.from,!1))},{resetList:!1}).then(()=>{var e=this.store.machines.getCollection(C.a.AllMachinesUsedInRuns);return e&&e.nextLink?this.fetchAllRemainingMachinesUsedInRuns(e.nextLink):Promise.resolve()})}},{key:"fetchAndUpdateDefaultMachineImageCollectionAndInvalidateOthersAsync",value:function(e){return Object(_.a)({entityKey:e,defaultCollectionKey:C.b.getMachineImagesCollectionType(Object(g.e)()),entities:this.store.vmImages,fetchFunction:()=>this.fetchVmImages(Object(g.e)())})}},{key:"editMachineDetails",value:function(e,t,i,n){var r=this.entityManagerServiceHelper.updateEntity(this.store.machines,e,()=>this.httpClient.editMachineDetails(e,t,i,n&&this.toXrmStateCode(n)).then(e=>e&&e.data&&this.toMachine(e.data)),"editMachineDetails",y.b.EditMachineDetails,y.a.TargetList).then(()=>{this.store.machines.collections.forEach(e=>{e.invalidateCache()})});return Object(m.d)({loggingService:this.loggingService,promise:r,eventName:y.b.EditMachineDetailsMSR,sourcePage:y.a.TargetList,getStatus:u.i})}},{key:"editStandaloneMachineDetails",value:function(e,t,i,n,r,a,o,s,c){return this.editMachineDetails(e,i,n,r).then(()=>void 0===a&&void 0===o&&void 0===s&&void 0===c?Promise.resolve():this.editMachineGroupDetails(t,void 0,void 0,a,void 0,r,o,s,c))}},{key:"batchFetchMachineGroups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.entityManagerServiceHelper.batchFetchEntity(this.store.machineGroups,e,e=>this.httpClient.batchFetchMachineGroups(e).then(i=>Object(p.i)(e,i,this.toMachineGroupFrom,t,u.i)),"batchFetchMachineGroups",y.b.BatchFetchMachineGroups,y.a.TargetList,!1,void 0,e=>{this.populateOwnerAndFetchThumbnails(e.from)})}},{key:"deleteMachine",value:function(e){var t,i=null===(t=this.store.machines.getEntity(e))||void 0===t?void 0:t.properties.machineGroupName,n=this.store.machineGroups.getEntity(i),r=n?n.properties.type===v.j.Default:void 0,a=this.entityManagerServiceHelper.deleteEntity(this.store.machines,e,()=>this.httpClient.deleteMachine(e).then(()=>{if(i&&!r){var e=this.store.machineGroupsMemberCount.getEntity(i);e&&e.memberCount>0&&Object(o.runInAction)(()=>e.memberCount--),this.getMachineGroupDetails(i,!0)}this.store.usingMachineImage.collections.forEach(e=>{e.removeAllEntities()}),this.store.usingVirtualNetwork.collections.forEach(e=>{e.removeAllEntities()})}),"deleteMachine",y.b.DeleteMachine,y.a.TargetList);return Object(m.d)({loggingService:this.loggingService,promise:a,eventName:y.b.DeleteMachineMSR,sourcePage:y.a.TargetList,getStatus:u.i})}},{key:"hasMachineGroupWithoutPrimaryKey",value:function(){return this.httpClient.fetchFirstMachineGroupWithoutPrimaryKeyPackages().then(e=>e.data.value.length>0)}},{key:"hasHostedMachineGroup",value:function(e,t){return this.httpClient.fetchFirstHostedMachineGroup(e,t).then(e=>e.data.value.length>0)}},{key:"hasRpaBox",value:function(){return this.httpClient.fetchFirstRpaBox().then(e=>e.data.value.length>0)}},{key:"hasMachineWithExpiredKey",value:function(e){return this.httpClient.fetchFirstMachineWithKeyExpired(e).then(e=>e.data.value.length>0)}},{key:"browseMachineGroups",value:function(e){var t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.b.getMachineGroupCollectionType(e,i),r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={};return e&&(a.filters=Object.keys(e.filters).filter(t=>void 0!==e.filters[t]).sort().join(",")),null!=e&&null!==(t=e.search)&&void 0!==t&&t.value&&(a.hasSearchValue=!0),this.getCurrentUserId().then(t=>{var o=A(A({},e),{},{currentUserId:t});return this.entityManagerServiceHelper.fetchCollection(this.store.machineGroups,n,()=>this.httpClient.browseMachineGroups(o,i).then(e=>{var t;return{value:(e&&e.data&&e.data.value||[]).map(this.toMachineGroupFrom),nextLink:null===(t=e.data)||void 0===t?void 0:t.nextLink}}),"browseMachineGroups",y.b.BrowseMachineGroups,y.a.TargetList,r,e=>{e.value.forEach(e=>{this.populateOwnerAndFetchThumbnails(e.from),this.populateMachineGroupMemberCount(e.from)})},void 0,a)})}},{key:"browseMachineGroupsMore",value:function(e,t){var i=C.b.getMachineGroupCollectionType(t);return this.entityManagerServiceHelper.fetchCollection(this.store.machineGroups,i,()=>this.httpClient.browseMachineGroupsMore(e).then(e=>{var t;return{value:(e&&e.data&&e.data.value||[]).map(this.toMachineGroupFrom),nextLink:null===(t=e.data)||void 0===t?void 0:t.nextLink}}),"browseMachineGroupsMore",y.b.BrowseMachineGroupsMore,y.a.TargetList,!0,e=>{e.value.forEach(e=>{this.populateOwnerAndFetchThumbnails(e.from),this.populateMachineGroupMemberCount(e.from)})},{resetList:!1,setCollectionLoadedIfError:!0})}},{key:"browseAllMachineGroupsUsedInRuns",value:function(e){return this.entityManagerServiceHelper.fetchCollection(this.store.machineGroups,C.a.AllMachineGroupsUsedInRuns,()=>this.httpClient.browseMachineGroupsUsedInRuns().then(e=>{var t;return{value:(e&&e.data&&e.data.value||[]).map(this.toMachineGroupFrom),nextLink:null===(t=e.data)||void 0===t?void 0:t.nextLink}}),"browseAllMachineGroupsUsedInRuns",y.b.BrowseAllMachineGroupsUsedInRuns,y.a.Runs,e,e=>{e.value.forEach(e=>{this.populateOwnerAndFetchThumbnails(e.from,!1)})}).then(()=>{var e=this.store.machineGroups.getCollection(C.a.AllMachineGroupsUsedInRuns);return e&&e.nextLink?this.fetchAllRemainingMachineGroupsUsedInRuns(e.nextLink):Promise.resolve()})}},{key:"fetchAllRemainingMachineGroupsUsedInRuns",value:function(e){return this.entityManagerServiceHelper.fetchCollection(this.store.machineGroups,C.a.AllMachineGroupsUsedInRuns,()=>this.httpClient.browseMachineGroupsMore(e).then(e=>{var t;return{value:(e&&e.data&&e.data.value||[]).map(this.toMachineGroupFrom),nextLink:null===(t=e.data)||void 0===t?void 0:t.nextLink}}),"fetchAllRemainingMachineGroupsUsedInRuns",y.b.BrowseAllMachineGroupsUsedInRuns,y.a.Runs,!0,e=>{e.value.forEach(e=>{this.populateOwnerAndFetchThumbnails(e.from,!1)})},{resetList:!1}).then(()=>{var e=this.store.machineGroups.getCollection(C.a.AllMachineGroupsUsedInRuns);return e&&e.nextLink?this.fetchAllRemainingMachineGroupsUsedInRuns(e.nextLink):Promise.resolve()})}},{key:"getMachineGroupDetails",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.entityManagerServiceHelper.fetchEntity(this.store.machineGroups,e,()=>this.httpClient.getMachineGroupDetails(e).then(e=>e&&e.data&&this.toMachineGroupFrom(e.data)),"getMachineGroupDetails",y.b.GetMachineGroupDetails,y.a.TargetDetails,t,e=>{this.populateOwnerAndFetchThumbnails(e.from),this.populateMachineGroupMemberCount(e.from);var t=C.b.getMachinesCollectionType(Object(g.c)(e.name)),i=this.store.machines.getCollection(t);i&&!i.nextLink&&i.length!==e.from.flowmachinegroup_flowmachine.length&&i.invalidateCache()},u.i)}},{key:"editMachineGroupDetails",value:function(e,t,i,n,r,a,o,s,c){var l=this.entityManagerServiceHelper.updateEntity(this.store.machineGroups,e,()=>this.httpClient.editMachineGroupDetails(e,t,i,n,r,a&&this.toXrmStateCode(a),o,s?this.toGroupMetadata(s):void 0,c).then(e=>e&&e.data&&this.toMachineGroup(e.data)),"editMachineGroupDetails",y.b.EditMachineGroupDetails,y.a.TargetList).then(()=>{this.store.machineGroups.collections.forEach(e=>{e.invalidateCache()}),this.store.machines.collections.forEach(e=>{e.invalidateCache()})});return Object(m.d)({loggingService:this.loggingService,promise:l,eventName:y.b.EditMachineGroupDetailsMSR,sourcePage:y.a.TargetList,getStatus:u.i})}},{key:"editMachineGroupAccountDetails",value:function(e,t){return Object(m.d)({loggingService:this.loggingService,promise:this.httpClient.editMachineGroupAccountDetails(e,t),eventName:y.b.EditMachineGroupAccountDetails,sourcePage:y.a.TargetList,getStatus:u.i})}},{key:"editMachineImageDetails",value:function(e,t,i){var n=this.entityManagerServiceHelper.updateEntity(this.store.vmImages,e,()=>this.httpClient.editMachineImageDetails(e,t,i).then(e=>e&&e.data&&j(e.data,this.loggingService)),"editMachineImageDetails",y.b.EditMachineImageDetails,y.a.TargetList).then(()=>this.fetchAndUpdateDefaultMachineImageCollectionAndInvalidateOthersAsync(e));return Object(m.d)({loggingService:this.loggingService,promise:n,eventName:y.b.EditMachineImageDetailsMSR,sourcePage:y.a.TargetList,getStatus:u.i})}},{key:"deleteMachineGroup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.entityManagerServiceHelper.deleteEntity(this.store.machineGroups,e,()=>this.httpClient.deleteMachineGroup(e,t),"deleteMachineGroup",t?y.b.DeleteMachineGroupForced:y.b.DeleteMachineGroup,y.a.TargetList).then(()=>{this.store.usingMachineImage.collections.forEach(e=>{e.removeAllEntities()}),this.store.usingVirtualNetwork.collections.forEach(e=>{e.removeAllEntities()})});return Object(m.d)({loggingService:this.loggingService,promise:i,eventName:y.b.DeleteMachineGroupMSR,sourcePage:y.a.TargetList,getStatus:u.i,eventData:{forceDelete:t}})}},{key:"getCurrentUserMachineAccessRights",value:function(e){return this.getCurrentUserId().then(t=>this.entityManagerServiceHelper.fetchEntity(this.store.accessRights,e,()=>this.httpClient.retrieveMachinePrincipalAccess(t,e).then(t=>t&&t.data&&{targetId:e,value:Object(h.c)(t.data.AccessRights)}),"getCurrentUserMachineAccessRights",y.b.RetrieveMachineAccessRights,y.a.TargetList,!1,void 0,u.i))}},{key:"batchGetMachineStatus",value:function(e){return this.entityManagerServiceHelper.batchFetchEntity(this.store.machineStatuses,e,e=>this.httpClient.batchGetMachineStatus(e).then(e=>e&&e.data&&e.data.machineStatuses?e.data.machineStatuses.map(e=>e.errorInfo?{key:e.machineId,value:e,error:e.errorInfo}:{key:e.machineId,value:e}):[]),"batchGetMachineStatus",y.b.BatchGetMachineStatus,y.a.TargetList,!1,this.appSettings.machineManagementRelayBatchStatusLimit)}},{key:"batchGetMachineStatusV2",value:function(e){return this.entityManagerServiceHelper.batchFetchEntity(this.store.machineStatusesV2,e,e=>this.httpClient.batchGetMachineStatusV2(e).then(e=>e&&e.data&&e.data.machineStatuses?e.data.machineStatuses.map(e=>({key:e.machineId,value:e})):[]),"batchGetMachineStatusV2",y.b.BatchGetMachineStatusV2,y.a.TargetList,!1,this.appSettings.machineManagementRelayBatchStatusLimit,u.i)}},{key:"batchCurrentUserMachinesAccessRights",value:function(e){return this.getCurrentUserId().then(t=>this.entityManagerServiceHelper.batchFetchEntity(this.store.accessRights,e,e=>this.httpClient.batchMachinesPrincipalAccess(t,e).then(t=>Object(p.i)(e,t,this.formatAccessRightsBatchResponse,[],u.i)),"batchCurrentUserMachinesAccessRights",y.b.BatchMachineAccessRights,y.a.TargetList))}},{key:"batchCurrentUserMachineGroupsAccessRights",value:function(e){return this.getCurrentUserId().then(t=>this.entityManagerServiceHelper.batchFetchEntity(this.store.accessRights,e,e=>this.httpClient.batchMachineGroupsPrincipalAccess(t,e).then(t=>Object(p.i)(e,t,this.formatAccessRightsBatchResponse,[],u.i)),"batchCurrentUserMachineGroupsAccessRights",y.b.BatchMachineGroupAccessRights,y.a.TargetList))}},{key:"getCurrentUserMachineGroupAccessRights",value:function(e){return this.getCurrentUserId().then(t=>this.entityManagerServiceHelper.fetchEntity(this.store.accessRights,e,()=>this.httpClient.retrieveMachineGroupPrincipalAccess(t,e).then(t=>t&&t.data&&{targetId:e,value:Object(h.c)(t.data.AccessRights)}),"getCurrentUserMachineGroupAccessRights",y.b.RetrieveMachineGroupAccessRights,y.a.TargetList,!1,void 0,u.i))}},{key:"getCurrentUserMachineImageAccessRights",value:function(e){return this.getCurrentUserId().then(t=>this.entityManagerServiceHelper.fetchEntity(this.store.machineImageAccessRights,e,()=>this.httpClient.retrieveMachineImagePrincipalAccess(t,e).then(t=>{var i;return{machineImageId:e,value:Object(h.c)((null==t||null===(i=t.data)||void 0===i?void 0:i.AccessRights)||"")}}),"getCurrentUserMachineImageAccessRights",y.b.RetrieveMachineImageAccessRights,y.a.TargetList,!1,void 0,u.i))}},{key:"batchCurrentUserMachineImageAccessRights",value:function(e){return this.getCurrentUserId().then(t=>this.entityManagerServiceHelper.batchFetchEntity(this.store.machineImageAccessRights,e,e=>this.httpClient.batchMachineImagesPrincipalAccess(t,e).then(t=>Object(p.i)(e,t,this.formatMachineImageAccessRightsBatchResponse,[],u.i)),"batchCurrentUserMachineImageAccessRights",y.b.BatchMachineImageAccessRights,y.a.TargetList))}},{key:"leaveMachineGroup",value:function(e,t){var i=this.store.machines.getEntity(e),n=i&&i.properties.machineGroupName,r=Object(m.d)({loggingService:this.loggingService,promise:this.httpClient.leaveMachineGroup(e),eventName:y.b.LeaveMachineGroup,sourcePage:y.a.TargetDetails}).then(()=>this.getMachineDetails(e,!0)).then(()=>{if(n){var i=this.store.machineGroupsMemberCount.getEntity(n);if(i&&i.memberCount>0&&Object(o.runInAction)(()=>i.memberCount--),t){var r,a=C.b.getMachinesCollectionType(t);null===(r=this.store.machines.getCollection(a))||void 0===r||r.removeEntity(e),this.browseMachines(t,!0)}}});return Object(m.d)({loggingService:this.loggingService,promise:r,eventName:y.b.LeaveMachineGroupMSR,sourcePage:y.a.TargetList,getStatus:u.i})}},{key:"getCurrentUserId",value:function(){var{userDetailsStore:e,userDetailsService:t}=this;return e.xrmUserInfo?Promise.resolve(e.xrmUserInfo.userId):Object(m.d)({promise:t.fetchXrmUserInfo(),loggingService:this.loggingService,eventName:y.b.GetCurrentUser,sourcePage:y.a.TargetList}).then(()=>{if(e.xrmUserInfo)return e.xrmUserInfo.userId;throw new Error("unknown user")})}},{key:"formatMachineImageAccessRightsBatchResponse",value:function(e,t){return{machineImageId:t,value:Object(h.c)(e.AccessRights)}}},{key:"populateMachineAdditionalDetails",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.populateOwnerAndFetchThumbnails(e),e.FlowMachineGroupId?this.populateMachineGroup(e.FlowMachineGroupId,t):e._flowmachinegroupid_value&&this.store.machineGroups.entities.setEntityCachedError(e._flowmachinegroupid_value,Object(d.a)("Unaccessible MachineGroup",403))}},{key:"populateMachineGroup",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.toMachineGroup(e);Object(s.b)(this.store.machineGroups.entities,i),this.populateOwnerAndFetchThumbnails(e,t)}},{key:"populateMachineGroupMemberCount",value:function(e){var t={machineGroupName:e.flowmachinegroupid,memberCount:e.flowmachinegroup_flowmachine.length};Object(s.b)(this.store.machineGroupsMemberCount.entities,t)}},{key:"populateMachineImageUse",value:function(e){this.store.usingMachineImage.setCollectionLoading(e.id),this.store.usingMachineImage.setCollectionLoaded(e.id,e.usedBy,{replaceDupe:s.a,resetList:!0})}}])&&D(t.prototype,i),n&&D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(b.a);function O(e,t){return{id:e.flowmachineimageversionid,reference:e.reference,version:e.version,state:X(e.statecode),statusCode:e.statuscode,supportedscenario:e.supportedscenario,provisioningError:q(e.provisioningerror,t,w.c.Unknown),sourceMachineId:e._sourcemachineid_value}}function j(e,t,i){var n,r;return{id:e.flowmachineimageid,name:e.flowmachineimageid,type:"",properties:{displayName:e.name,description:e.description||void 0,imageType:J(e.source),machineImageVersions:null===(n=e.flowmachineimage_flowmachineimageversion)||void 0===n?void 0:n.map(e=>O(e,t)),activeImageVersion:G(e.flowmachineimage_flowmachineimageversion,t),createdOn:e.createdon,isManaged:e.ismanaged,isCustomizable:e.iscustomizable,solutionId:e.solutionid,deprecationDate:e.deprecationdate,endOfSupportDate:e.endofsupportdate},usedBy:[...i&&i.map(e=>({id:e,type:v.t.Machine}))||[],...(null===(r=e.flowmachinegroup_flowmachineimage)||void 0===r?void 0:r.map(e=>({id:e.flowmachinegroupid,type:v.t.MachineGroup})))||[]],xrmOwner:Y(e)}}function G(e,t){if(e){var i=e.find(e=>e.statecode===f.e.Active||null!==e.provisioningerror&&void 0!==e.provisioningerror);return i&&O(i,t)}}function N(e,t,i){return A({from:e},j(e,t,i))}function B(e){switch(e){case f.b.Keyless:return v.j.Keyless;case f.b.Standard:return v.j.Standard;case f.b.Default:default:return v.j.Default}}function T(e){if(e)switch(e){case f.f.PendingNewKey:return v.h.PendingNewKey;case f.f.keyExpired:return v.h.KeyExpired;case f.f.Default:default:return v.h.Default}}function Q(e){switch(e){case f.g.Managed:return v.o.Managed;case f.g.CloudPc:return v.o.CloudPc;case f.g.Customer:default:return v.o.Customer}}function L(e){switch(e){case f.h.Inactive:return v.s.Inactive;case f.h.Maintenance:return v.s.Maintenance;case f.h.Active:case null:return v.s.Active;default:throw new Error("Unhandled stateCode: ".concat(e))}}function x(e){switch(e){case f.a.Inactive:return v.i.Inactive;case f.a.ManualMaintenance:return v.i.ManualMaintenance;case f.a.Quarantined:return v.i.Quarantined;case f.a.KeyExpired:return v.i.KeyExpired;case f.a.Active:case f.a.Unknown:case void 0:case null:default:return v.i.Unknown}}function V(e){switch(e){case f.j.FIFO:return!1;case f.j.ExtendedQueuePrioritization:return!0;default:return!1}}function H(e){switch(e){case f.k.Created:return v.p.Created;case f.k.Provisioning:return v.p.Provisioning;case f.k.Provisioned:return v.p.Provisioned;case f.k.Error:return v.p.Error;default:return v.p.Unknown}}function z(e){switch(e){case v.v.None:return n.a.None;case v.v.AadJoined:return n.a.AadJoined;case v.v.HybridJoined:return n.a.HybridJoined;case void 0:return;default:return e}}function $(e){if(e)try{var t=JSON.parse(e);if(!t)return;var i={_unparsedGroupMetadata:e};return t.HmgLocation&&(i.hmgLocation=t.HmgLocation),void 0!==t.ReprovisioningRequired&&(i.reprovisioningRequired=t.ReprovisioningRequired),void 0!==t.IsShutdownSessionsFeatureEnabled&&(i.isShutdownSessionsFeatureEnabled=t.IsShutdownSessionsFeatureEnabled),void 0!==t.IsAutomaticallyShutdownSessionsEnabled&&(i.isAutomaticallyShutdownSessionsEnabled=t.IsAutomaticallyShutdownSessionsEnabled),Object.keys(i).length>1?i:void 0}catch(n){return}}function q(e,t,i){if(e){var n={code:i,message:e};try{var r,a=JSON.parse(e);return null!=a&&null!==(r=a.error)&&void 0!==r&&r.code?a.error:(t.logWarning("XrmMachineManagementService.parseProvisioningError","Parsed error does not contain an error code.",{error:e}),n)}catch(o){return t.logWarning("XrmMachineManagementService.parseProvisioningError","Error could not be parsed.",{error:e}),n}}}function K(e,t){if(e){var i={code:v.q.Unknown,message:e};try{var n,r=JSON.parse(e);return null!=r&&null!==(n=r.error)&&void 0!==n&&n.code?r.error:(t.logWarning("XrmMachineManagementService.parseProvisioningError","Parsed error does not contain an error code.",{error:e}),i)}catch(a){return t.logWarning("XrmMachineManagementService.parseProvisioningError","Error could not be parsed.",{error:e}),i}}}function J(e){switch(e){case f.d.Service:return v.k.Service;case f.d.SharedImageGallery:return v.k.SharedImageGallery;case f.d.Blob:default:return v.k.Blob}}function X(e){switch(e){case f.e.Inactive:return v.l.Inactive;case f.e.Active:return v.l.Active;default:return v.l.Inactive}}function Y(e){return e._owningteam_value?{"@odata.type":l.l.Team,ownerid:e._owningteam_value}:{"@odata.type":l.l.SystemUser,ownerid:e._owninguser_value}}},21024:function(e,t,i){"use strict";function n(e,t,i,n,r,a,o){try{var s=e[a](o),c=s.value}catch(u){return void i(u)}s.done?t(c):Promise.resolve(c).then(n,r)}function r(e){return function(){var t=this,i=arguments;return new Promise((function(r,a){var o=e.apply(t,i);function s(e){n(o,r,a,s,c,"next",e)}function c(e){n(o,r,a,s,c,"throw",e)}s(void 0)}))}}function a(e){return o.apply(this,arguments)}function o(){return(o=r((function*(e){var{entityKey:t,defaultCollectionKey:i,entities:n,fetchFunction:r}=e,a=n.getCollection(i);if(n.collections.forEach(e=>{e!==a&&e.invalidateCache()}),a&&a.list)n.removeKeyFromCollection(i,t),n.addKeyToCollection(i,t,!0);else try{yield r(),n.addKeyToCollection(i,t)}catch(o){throw n.setCollectionError(i,o),o}}))).apply(this,arguments)}i.d(t,"a",(function(){return a}))},21025:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(12364),r=i(20991),a=i(15388),o=i(15396),s=i(17269);function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l=function(){function e(t,i,n,r,o,s,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appSettings=t,this.store=i,this.graphService=n,this.loggingService=r,this.userDetailsStore=o,this.userDetailsService=s,this.xrmIdentityStore=c,this.entityManagerServiceHelper=void 0,this.entityManagerServiceHelper=new a.a(r)}var t,i,u;return t=e,(i=[{key:"getCurrentUserId",value:function(){var{userDetailsStore:e,userDetailsService:t}=this;return e.xrmUserInfo?Promise.resolve(e.xrmUserInfo.userId):Object(o.d)({promise:t.fetchXrmUserInfo(),loggingService:this.loggingService,eventName:s.b.GetCurrentUser,sourcePage:s.a.TargetList}).then(()=>{if(e.xrmUserInfo)return e.xrmUserInfo.userId;throw new Error("unknown user")})}},{key:"populateOwnerAndFetchThumbnails",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=e.owninguser;i&&(Object(n.b)(this.xrmIdentityStore.xrmUsers.entities,i),i.azureactivedirectoryobjectid&&t&&this.graphService.getThumbnailPhoto(i.azureactivedirectoryobjectid));var r=e.owningteam;r&&Object(n.b)(this.xrmIdentityStore.xrmTeams.entities,r)}},{key:"formatAccessRightsBatchResponse",value:function(e,t){return{targetId:t,value:Object(r.c)(e.AccessRights)}}}])&&c(t.prototype,i),u&&c(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}]);
//# sourceMappingURL=https://sourcemaps.powerapps.com/srcmaps/static/js/module/140.4a673728.chunk.js.map