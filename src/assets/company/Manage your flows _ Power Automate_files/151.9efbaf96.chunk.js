/*! For license information please see 151.9efbaf96.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{20920:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=new(n(20921).a)},20921:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i,r,s,a=n(11773),o=n(12348);function u(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,l(i.key),i)}}function l(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function d(e,t,n,i,r){var s={};return Object.keys(i).forEach((function(e){s[e]=i[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),s),r&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(r):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}var g=(r=d((i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"licenseRequests",r,this),u(this,"customRequestProcess",s,this),Object(a.runInAction)(()=>{this.licenseRequests=new o.a({getKey:e=>e.requestId})})}var t,n,i;return t=e,(n=[{key:"getRequestIdForLicense",value:function(e,t){var n=this.licenseRequests.getCollection(e);return n&&n.list&&n.list.find(e=>this.licenseRequests.getEntity(e).skuId===t)}}])&&c(t.prototype,n),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"licenseRequests",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=d(i.prototype,"customRequestProcess",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i)},20964:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(20965),r=n(20966),s=n(20920),a=n(13087),o=n(12339),u=n(13e3),c=n(12345),l=new i.a(a.a,r.a,s.a,Object(o.b)(),u.a,c.a)},20965:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(12324),r=n(11773),s=n(12364),a=n(13009),o=n(13158),u=n(15402),c=n(13146),l=n(13085);function d(e,t,n,i,r,s,a){try{var o=e[s](a),u=o.value}catch(c){return void n(c)}o.done?t(u):Promise.resolve(u).then(i,r)}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h(i.key),i)}}function h(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var p=function(){function e(t,n,i,r,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loggingService=t,this.licenseManagementHttpClient=n,this.licenseManagementStore=i,this.appSettings=r,this.sessionStore=s,this.environmentStore=a,this.runFirstPending=Object(c.a)()}var t,n,h,p,v;return t=e,(n=[{key:"getCustomRequestProcess",value:function(){return this.licenseManagementStore.customRequestProcess?Promise.resolve():this.runFirstPending({key:"getCustomRequestProcess",action:()=>{var e=this.loggingService.profileStart(l.a.customRequestProcessLoadStart);return this.licenseManagementHttpClient.getCustomRequestProcess().then(Object(r.action)(e=>{var t=e.data||{policyValue:o.a.Disabled};this.licenseManagementStore.customRequestProcess=t})).then(()=>{var t;this.loggingService.profileEndWithSuccess(e,l.a.customRequestProcessLoadEnd,{customRequestProcess:null===(t=this.licenseManagementStore.customRequestProcess)||void 0===t?void 0:t.policyValue})}).catch(t=>(this.loggingService.profileEnd(e,l.a.customRequestProcessLoadEnd,t),Promise.reject(t)))}})}},{key:"getLicenseRequests",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.licenseManagementStore.licenseRequests.getCollection(e),i=n&&n.lastFetched;return t||Object(s.d)(i)?this.runFirstPending({key:"getLicenseRequests",action:()=>(this.licenseManagementStore.licenseRequests.setCollectionLoading(e),Object(u.b)({loggingService:this.loggingService,eventStartName:l.a.licenseRequestsLoadStart,eventEndName:l.a.licenseRequestsLoadEnd,promise:this.licenseManagementHttpClient.getLicenseRequests(e).then(t=>{this.licenseManagementStore.licenseRequests.setCollectionLoaded(e,t&&t.data&&t.data.value||[],{resetList:!0,replaceDupe:s.a})}).catch(t=>{throw this.licenseManagementStore.licenseRequests.setCollectionError(e,t),t})}))}):Promise.resolve()}},{key:"createOrUpdateRequest",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this.getProductIdFromSkuId(e);return this.getLicenseRequests(s,!0).then(()=>{var a=this.licenseManagementStore.getRequestIdForLicense(s,e);return a?this.updateLicenseRequest(a,t,n,i,r):this.createLicenseRequest(s,e,t,n,i,r)})}},{key:"createLicenseRequest",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=this.environmentStore.currentEnvironmentName;return Object(u.b)({promise:this.licenseManagementHttpClient.postLicenseRequest({productId:e,requestReason:n,skuId:t,assigneeUserIds:this.buildAssigneeUserIds(i,s),licenseSource:o.d.CommerceService,requestedVolume:r},a),loggingService:this.loggingService,eventStartName:l.a.licenseRequestCreateStart,eventEndName:l.a.licenseRequestCreateEnd,eventData:{licenseId:t,nbAdditionalUsers:i.length,requestedVolume:null!=r?r:0}}).then()}},{key:"updateLicenseRequest",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(u.b)({promise:this.licenseManagementHttpClient.patchLicenseRequest(e,{requestReason:t,assigneeUserIds:this.buildAssigneeUserIds(n,r),licenseSource:o.d.CommerceService,requestedVolume:i}),loggingService:this.loggingService,eventStartName:l.a.licenseRequestUpdateStart,eventEndName:l.a.licenseRequestUpdateEnd,eventData:{nbAdditionalUsers:n.length,requestedVolume:null!=i?i:0}}).then()}},{key:"getContextBasedUserLicenseRequest",value:(p=function*(e,t){return(yield Object(u.b)({promise:this.licenseManagementHttpClient.getContextBasedUserLicenseRequest(e,t),loggingService:this.loggingService,eventStartName:l.a.licenseRequestUpdateStart,eventEndName:l.a.licenseRequestUpdateEnd,eventData:{flowContext:e}})).data.userLicenseCategory},v=function(){var e=this,t=arguments;return new Promise((function(n,i){var r=p.apply(e,t);function s(e){d(r,n,i,s,a,"next",e)}function a(e){d(r,n,i,s,a,"throw",e)}s(void 0)}))},function(e,t){return v.apply(this,arguments)})},{key:"buildAssigneeUserIds",value:function(e,t){return this.sessionStore.user&&!t?Object(i.uniq)([...e,this.sessionStore.user.uniqueId]):e}},{key:"getProductIdFromSkuId",value:function(e){switch(e){case this.appSettings.perFlowPlanSkuId:return this.appSettings.perFlowPlanProductId;case this.appSettings.userPlanSkuId:return this.appSettings.userPlanProductId;case this.appSettings.userPlanWithAttendedRPASkuId:return this.appSettings.userPlanWithAttendedRPAProductId;case this.appSettings.unattendedRPSkuId:return this.appSettings.unattendedRPProductId;case this.appSettings.hostedRPSkuId:return this.appSettings.hostedRPProductId;case this.appSettings.powerAutomateProcessSkuId:return this.appSettings.powerAutomateProcessProductId;case this.appSettings.powerAutomatePremiumSkuId:return this.appSettings.powerAutomatePremiumProductId;case this.appSettings.powerAutomateProcessMiningSkuId:return this.appSettings.powerAutomateProcessMiningProductId;default:throw new a.a(a.c.unknownSkuId,'Unknown skuId "'.concat(e,'"'))}}}])&&g(t.prototype,n),h&&g(t,h),Object.defineProperty(t,"prototype",{writable:!1}),e}()},20966:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(20967),r=n(13192),s=n(12339),a=n(12999),o=n(13e3),u=n(13077),c=n(13087),l=n(13198),d=n(13206),g=n(14688),h=new i.a(Object(s.b)(),Object(a.a)(),new r.HttpClient,g.a,c.a,o.a,u.a,l.a,d.a)},20967:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(13217),r=n(13220),s=n(13221),a=n(13224),o=n(13225),u=n(12375),c=n(12381),l=n(13151),d=n(14829);function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h(i.key),i)}}function h(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var p=function(){function e(t,n,c,l,g,h,p,v,S){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appSettings=t,this.featureFlags=n,this.httpClient=c,this.ppapiService=l,this.loggingService=g,this.sessionStore=h,this.tokenService=p,this.userContextChangeMonitoringService=v,this.userContextStore=S,[Object(s.c)(this.loggingService,()=>this.sessionStore.sessionId),Object(i.a)(()=>this.tokenService.getAccessToken(this.appSettings.flowAudience)),Object(r.a)(u.a),Object(o.a)(this.featureFlags.enableB2BLogin,this.userContextStore,this.userContextChangeMonitoringService,this.loggingService),Object(a.a)(g,h),Object(d.b)(this.ppapiService,this.appSettings)].forEach(e=>this.httpClient.addRequestInterceptor(e)),this.httpClient.addResponseInterceptor(Object(s.d)(this.loggingService,this.sessionStore),Object(s.b)(this.loggingService,this.sessionStore))}var t,n,h;return t=e,(n=[{key:"getCustomRequestProcess",value:function(){return this.httpClient.post({eventName:"PROCESSSIMPLE:GET/LICENSEREQUESTS/CUSTOMREQUESTPROCESS",url:this.craftUrl("/customRequestProcess")})}},{key:"getLicenseRequests",value:function(e){var t=new URLSearchParams({productId:e,state:"Pending"});return this.httpClient.get({eventName:"PROCESSSIMPLE:GET/LICENSEREQUESTS",url:this.craftUrl("?".concat(t.toString()))})}},{key:"postLicenseRequest",value:function(e,t){return this.httpClient.post({eventName:"PROCESSSIMPLE:POST/LICENSEREQUESTS",url:this.craftUrl("",t),data:e})}},{key:"patchLicenseRequest",value:function(e,t){return this.httpClient.patch({eventName:"PROCESSSIMPLE:PATCH/LICENSEREQUESTS",url:this.craftUrl("/".concat(e)),data:t})}},{key:"getContextBasedUserLicenseRequest",value:function(e,t){var n={FlowContext:e};return this.httpClient.post({eventName:"PROCESSSIMPLE:POST/CONTEXTBASEDUSERLICENSEREQUESTS",url:this.craftUserContextUrl("",t),data:n})}},{key:"craftUserContextUrl",value:function(){var e=arguments.length>1?arguments[1]:void 0;return Object(c.a)(Object(l.a)({environmentName:e,appSettings:this.appSettings}),"/getContextBasedUserLicenseCategory")}},{key:"craftUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return Object(c.a)(Object(l.a)({environmentName:t,appSettings:this.appSettings}),"/licenseRequests".concat(e))}}])&&g(t.prototype,n),h&&g(t,h),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}]);
//# sourceMappingURL=https://sourcemaps.powerapps.com/srcmaps/static/js/module/151.9efbaf96.chunk.js.map