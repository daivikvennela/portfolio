/*! For license information please see 153.ff5d9a91.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{20978:function(e,r,n){"use strict";n.d(r,"a",(function(){return d}));var t=n(20979),o=n(20982),i=n(12339),a=n(12345),s=n(11795),c=n(13077),u=n(13087),l=n(20983),d=new t.a(l.a,Object(i.b)(),c.a,u.a,a.a,Object(o.d)(Object(s.h)().region))},20979:function(e,r,n){"use strict";n.d(r,"a",(function(){return g}));var t=n(13009),o=n(13085),i=n(15523),a=n(20980);function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){u(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function u(e,r,n){return(r=d(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function l(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,d(t.key),t)}}function d(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}var g=function(){function e(r,n,t,o,i,a){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.rpaNativeClient=r,this.appSettings=n,this.tokenService=t,this.loggingService=o,this.environmentStore=i,this.environment=a}var r,n,s;return r=e,(n=[{key:"getRecordingActionReferencedBinary",value:function(e,r,n,t){return this.sendNativeMessage({startEventName:o.a.rpaGetRecordingActionReferencedBinaryStart,endEventName:o.a.rpaGetRecordingActionReferencedBinaryEnd},n=>({actionType:a.b.GetRecordingActionReferencedBinary,headers:n,parameters:{recordingId:e,binaryId:r,skipToken:t},payload:null}),n)}},{key:"getCurrentUserName",value:function(){return this.sendNativeMessage({startEventName:o.a.rpaGetCurrentUserStart,endEventName:o.a.rpaGetCurrentUserEnd},e=>({actionType:a.b.GetCurrentUser,headers:e,parameters:null,payload:null}))}},{key:"setGatewayRegionName",value:function(e){return this.sendNativeMessage({startEventName:o.a.rpaSetGatewayRegionNameStart,endEventName:o.a.rpaSetGatewayRegionNameEnd},r=>({actionType:a.b.SetGatewayRegionName,headers:r,parameters:null,payload:{gatewayRegionDisplayName:e}}))}},{key:"getRequestHeaders",value:function(e){return this.tokenService.getAccessToken(this.appSettings.flowAudience).then(r=>{var n;return{correlationId:e,requestId:Object(i.a)(),token:r,environmentName:this.environmentStore.currentEnvironmentName,roleInfo:{environment:this.environment,geo:(null===(n=this.environmentStore.environmentClaim)||void 0===n?void 0:n.location)||""}}})}},{key:"sendNativeMessage",value:function(e,r,n){return this.getRequestHeaders(n).then(o=>{var i={extensionGroupingId:n},a=this.loggingService.profileStart(e.startEventName,i);return this.rpaNativeClient.sendRequest(r(o)).then(r=>(this.loggingService.profileEndWithSuccess(a,e.endEventName,i),r)).catch(r=>{throw this.loggingService.profileEnd(a,e.endEventName,Object(t.y)(r),r,c(c({},i),r.data)),r})})}}])&&l(r.prototype,n),s&&l(r,s),Object.defineProperty(r,"prototype",{writable:!1}),e}()},20980:function(e,r,n){"use strict";n.d(r,"b",(function(){return g})),n.d(r,"a",(function(){return v}));var t=n(13009),o=n(20981),i=n(13031),a=n(15997);function s(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function c(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?s(Object(n),!0).forEach((function(r){u(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function u(e,r,n){return(r=d(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function l(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,d(t.key),t)}}function d(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}var g=function(e){return e.CreateRecording="CreateRecording",e.GetRecordingActionReferencedBinary="GetRecordingActionReferencedBinary",e.GetCurrentUser="GetCurrentUser",e.SetGatewayRegionName="SetGatewayRegionName",e}({}),p=function(e){return e.sendRequest="RpaNativeClient.sendRequest",e.extensionLoaded="RpaNativeClient.extensionLoaded",e}(p||{}),f=function(e){return e.ExtensionLoaded="ExtensionLoaded",e}(f||{}),v=function(){function e(r,n,t,o){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.featureFlags=r,this.legacyFeatureFlags=n,this.loggingService=t,this.getErrorHandlingResources=o,this.extensionDetails=void 0,window.addEventListener("message",e=>this.onMessageEventListener(e),!1)}var r,n,s;return r=e,(n=[{key:"extensionId",get:function(){return localStorage.getItem(this.legacyFeatureFlags.extensionKeyName)}},{key:"sendRequest",value:function(r){var n=r&&r.actionType||"undefined",o=r&&r.headers&&r.headers.correlationId||void 0;return this.loggingService.logInfo(p.sendRequest,"Sending request for operation "+n,void 0,o),new Promise((o,i)=>{window.chrome&&window.chrome.runtime?this.extensionId?(this.logRequestResponseToConsole({isRequest:!0,actionType:n,obj:r}),window.chrome.runtime.sendMessage(this.extensionId,r,e=>{this.logRequestResponseToConsole({isRequest:!1,actionType:n,obj:e}),this.getErrorHandlingResources().then(r=>{var n=this.getErrorFromResponse(e,r);null!==n?i(n):(this.logStatusToConsole({isSuccess:!0}),o(e))})})):(this.logErrorToConsole(e.UnreachableExtensionErrorMessage),i(new t.b(t.c.rpaLocalServiceMessagingError,e.UnreachableExtensionErrorMessage))):(this.logErrorToConsole(e.UnsupportedBrowserErrorMessage),i(new t.b(t.c.rpaLocalServiceMessagingError,e.UnsupportedBrowserErrorMessage)))})}},{key:"onMessageEventListener",value:function(e){var r;if(!(e.source&&e.source!==window||0!==window.location.href.indexOf(e.origin))&&(null===(r=e.data)||void 0===r?void 0:r.type)===f.ExtensionLoaded){var n=e.data;this.extensionDetails={manifest:n.extensionDetails,extensionId:n.extensionId},this.loggingService.logInfo(p.extensionLoaded,"Extension loaded successfully",{extensionDetails:this.extensionDetails})}}},{key:"logRequestResponseToConsole",value:function(e){var{isRequest:r,actionType:n,obj:t}=e;if(this.featureFlags.enableUIFlowConsoleLog){var o=r?"-----\x3e":"<-----";console.log("".concat(o," '").concat(n,"'"),t)}}},{key:"logStatusToConsole",value:function(e){var{isSuccess:r,errorMessage:n}=e;if(this.featureFlags.enableUIFlowConsoleLog){var t=r?"OK":"Error";console.log("    [".concat(t,"]").concat(n?": ".concat(n):""))}}},{key:"logErrorToConsole",value:function(e){this.logStatusToConsole({isSuccess:!1,errorMessage:e})}},{key:"getErrorFromResponse",value:function(r,n){var s={extensionDetails:this.extensionDetails};if(void 0!==window.chrome.runtime.lastError){var u=window.chrome.runtime.lastError.message;return this.logErrorToConsole(u),new t.b(t.c.rpaLocalServiceMessagingError,u||"",null,s)}return r?r.Message&&Object(t.h)(r.Message,o.a.UIFlowServiceNotRunning,n.Flow.Error.ServiceNotRunning)?(this.logErrorToConsole(t.c.uiFlowServiceNotRunning),new t.b(t.c.uiFlowServiceNotRunning,Object(i.a)(n.Flow.Error.ServiceNotRunningWithLink,Object(a.b)()),null,s)):r.Message?(this.logErrorToConsole(r.Message),new t.a(t.c.rpaLocalServiceMessagingError,r.Message,null,s)):r.error&&r.error.code&&r.error.code===t.c.rpaSeleniumUnexpectedRequestReceivedByBrowserExtension?(this.logErrorToConsole(t.c.rpaSeleniumUnexpectedRequestReceivedByBrowserExtension),new t.b(t.c.rpaSeleniumUnexpectedRequestReceivedByBrowserExtension,n.RpaNativeClient.UnexpectedV1ExtensionError,void 0,c(c({},s),r.error))):r.error&&r.error.code&&(r.error.code===t.c.rpaAgentBusyError||r.error.code===t.c.rpaRecorderBusyError)?(this.logErrorToConsole(r.error.message),new t.b(t.c.rpaAgentBusyError,this.featureFlags.enablePADAppRenaming?n.RpaWizard.AgentBusy.PAda.Error:n.RpaWizard.AgentBusy.Error,void 0,c(c({},s),r.error))):r.error&&r.error.code===t.c.rpaUnexpectedBrowserExtensionError?(this.logErrorToConsole(r.error.message),new t.a(r.error.code,r.error.message,r.error.details,s)):null:(this.logErrorToConsole(e.ExtensionCommunicationErrorMessage),new t.b(t.c.rpaLocalServiceMessagingError,e.ExtensionCommunicationErrorMessage,r&&r.InnerException,{lastError:!r&&window.chrome.runtime.lastError,extensionDetails:this.extensionDetails}))}}])&&l(r.prototype,n),s&&l(r,s),Object.defineProperty(r,"prototype",{writable:!1}),e}();v.ExtensionCommunicationErrorMessage="Null response from native host",v.UnsupportedBrowserErrorMessage="Unsupported browser",v.UnreachableExtensionErrorMessage="Unreachable extension"},20981:function(e,r,n){"use strict";n.d(r,"a",(function(){return t}));var t=function(e){return e.UIFlowServiceNotRunning="UI Flow Service is not running",e}({})},20982:function(e,r,n){"use strict";n.d(r,"b",(function(){return i})),n.d(r,"a",(function(){return a})),n.d(r,"h",(function(){return s})),n.d(r,"c",(function(){return c})),n.d(r,"f",(function(){return u})),n.d(r,"g",(function(){return l})),n.d(r,"e",(function(){return d})),n.d(r,"d",(function(){return g}));var t=n(12339),o=n(13227),i=function(e){return e.Invalid="invalid",e.Public="public",e.Gcc="gcc",e.GccHigh="gccHigh",e.DoD="doD",e.China="china",e.Tip1="tip1",e.Tip2="tip2",e.Germany="germany",e}({}),a=function(e){return e.Public="public",e.Gcc="gcc",e.GccHigh="gcchigh",e.DoD="dod",e.China="china",e.Tip1="tip1",e.Tip2="tip2",e}({});function s(e){if(e)try{return new URL(e).protocol}catch(r){return}}function c(e,r,n,t,i){var a,s=null==r||null===(a=r.properties.cluster)||void 0===a||null===(a=a.category)||void 0===a?void 0:a.toLowerCase();if(e&&Object(o.b)(s)&&["tip1","tip2"].includes(e))switch(s){case"test":return i;case"preprod":return t;default:return n(e)}return n(e)}function u(e){switch(e){case t.a.dev:case t.a.local:case t.a.tip2:return a.Tip2;case t.a.tip1:return a.Tip1;case t.a.cn:return a.China;case t.a.dod:return a.DoD;case t.a.gcc:return a.Gcc;case t.a.gcch:return a.GccHigh;case t.a.tip0:default:return a.Public}}function l(e){switch(e){case t.a.dev:case t.a.local:case t.a.tip2:return i.Tip2;case t.a.tip1:return i.Tip1;case t.a.cn:return i.China;case t.a.dod:return i.DoD;case t.a.gcc:return i.Gcc;case t.a.gcch:return i.GccHigh;case t.a.tip0:return i.Public;default:return i.Invalid}}function d(e){switch(e){case t.a.dev:case t.a.local:case t.a.tip1:case t.a.tip2:return i.Tip1;case t.a.cn:return i.China;case t.a.dod:return i.DoD;case t.a.gcc:return i.Gcc;case t.a.gcch:return i.GccHigh;case t.a.tip0:return i.Public;default:return i.Invalid}}function g(e){switch(e){case"tie":case"test":return t.a.tip2;case"preprod":return t.a.tip1;case"preview":case"prod":return t.a.tip0;case"gov":return t.a.gcc;case"high":return t.a.gcch;case"dod":return t.a.dod;case"mooncake":return t.a.cn;case"ex":case"rx":return t.a.dod;default:return t.a.tip0}}},20983:function(e,r,n){"use strict";n.d(r,"a",(function(){return c}));var t=n(12339),o=n(20980),i=n(12999),a=n(13087),s=n(15461),c=new o.a(Object(i.a)(),Object(t.b)(),a.a,s.a)}}]);
//# sourceMappingURL=https://sourcemaps.powerapps.com/srcmaps/static/js/module/153.ff5d9a91.chunk.js.map