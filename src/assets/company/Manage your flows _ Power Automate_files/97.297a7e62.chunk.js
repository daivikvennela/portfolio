/*! For license information please see 97.297a7e62.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{18932:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,i,o,a,s=n(11773),l=n(12347),u=n(18933),c=n(18934);function d(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function m(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var v=(i=m((r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"runs",i,this),d(this,"triggerHistories",o,this),d(this,"flowRunsInKustoValidations",a,this),Object(s.runInAction)(()=>{this.runs=new l.a({getKey:t=>e.getRunEntityKey({flowName:t.flowName,runName:t.name})}),this.triggerHistories=new l.a({getKey:t=>e.getTriggerHistoryEntityKey({flowName:t.flowName,historyName:t.name})}),this.flowRunsInKustoValidations=new l.a({getKey:t=>e.getFlowRunsInKustoEntityKey({flowName:t.flowName})})})}var t,n,r;return t=e,r=[{key:"getRunEntityKey",value:function(e){var{flowName:t,runName:n}=e;return"".concat(t,"/").concat(n)}},{key:"getTriggerHistoryEntityKey",value:function(e){var{flowName:t,historyName:n}=e;return"".concat(t,"/").concat(n)}},{key:"getFlowRunsInKustoEntityKey",value:function(e){var{flowName:t}=e;return t}},{key:"getRunsCollectionType",value:function(e){var{flowName:t,status:n}=e;return"".concat(t,"/").concat(n)}},{key:"getTriggerHistoriesCollectionType",value:function(e){var{flowName:t,status:n}=e;return"".concat(t,"/").concat(n)}},{key:"getFlowRunsInKustoCollectionType",value:function(e){var{flowName:t}=e;return t}},{key:"areRunsAnalyzable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(c.a)()?t?864e5:0:108e4,r=24192e5,i=Date.now(),o=i-r,a=i-n;if(e&&e.length>0)for(var s=e.length-1;s>=0;s--){var l=Date.parse(e[s].properties.startTime),u=Date.parse(e[s].properties.endTime);if(!isNaN(l)&&l>o&&!isNaN(u)&&u<a)return!0}return!1}}],(n=[{key:"hasProcessAdvisorAnalyzableRuns",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.runs.getCollection(e.getRunsCollectionType({flowName:t,status:u.a.all})),i=null==r?void 0:r.list.map(e=>this.runs.getEntity(e)),o=null==i?void 0:i.filter(e=>e.properties.startTime&&e.properties.endTime);return e.areRunsAnalyzable(o,n)}},{key:"getPreviousTriggers",value:function(e){var t,n=null===(t=this.getTriggerHistoriesCollection(e))||void 0===t||null===(t=t.list)||void 0===t?void 0:t.map(e=>this.triggerHistories.getEntity(e)).filter(e=>!!e);return null!=n?n:[]}},{key:"getLastTriggeredRun",value:function(e){var t,n=this.getPreviousTriggers(e);if(n&&(null==n?void 0:n.length)>0)return null==n||n.sort((e,t)=>Date.parse(t.properties.startTime)-Date.parse(e.properties.startTime)),null===(t=n[0].properties)||void 0===t?void 0:t.run}},{key:"getTriggerHistoriesCollection",value:function(t){return this.triggerHistories.getCollection(e.getTriggerHistoriesCollectionType({flowName:t,status:u.b.all}))}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"runs",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=m(r.prototype,"triggerHistories",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=m(r.prototype,"flowRunsInKustoValidations",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)},18933:function(e,t,n){"use strict";var r=n(14856);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}))},18934:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11808),i=n(11876),o=()=>{var e;return null!==(e=!!Object(r.a)().enableValidateFlowsInKusto.getConfig().enableValidateFlowsInKusto)&&void 0!==e?e:i.a.enableValidateFlowsInKusto}},18965:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c}));var r=n(12331),i=n(11891),o=n(14883);function a(e,t){for(var n of t)if(e(n))return n}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r={},i=e;for(var o of t)r[o]=!0;for(var a=n;;){if(!l(r,i))return i;i="".concat(e,"_").concat(a++)}}function l(e,t){var n=(e=e||{})[t];if(void 0!==n)return n;for(var o of Object(r.a)(e))if(Object(i.a)(o,t))return e[o]}function u(e,t){if(!t)throw new Error("key required");e=e||[];var n={};for(var r of e.filter(e=>e.hasOwnProperty(t))){n[r[t]]=r}return n}function c(e,t){if(!e.ok&&!Object(o.f)(e.body))try{var n=JSON.parse(e.body);if(n&&"string"==typeof n.Message)return n.Message}catch(r){return t}return t}},20918:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(17258),i=n(20906),o=new(n(20919).a)(r.a,i.a)},20919:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g}));var r,i,o=n(11773),a=n(12347),s=n(15427);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c,d,f,p,m,v,h=(r=function(){function e(t,n){var r,s,l,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowStore=t,this.xrmSharingStore=n,r=this,s="desktopFlows",u=this,(l=i)&&Object.defineProperty(r,s,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0}),this.connectionReferencesList=void 0,Object(o.runInAction)(()=>{this.desktopFlows=new a.a({getKey:e=>e.workflowid}),this.connectionReferencesList=new a.a({getKey:e=>e.workFlowId})})}var t,n,r;return t=e,(n=[{key:"getDesktopFlowSharedWithPrincipals",value:function(e){var t;return(t=this.desktopFlows.getEntity(e))||(t=g(this.flowStore.flows.getEntity(e))),this.xrmSharingStore.getEntitySharedWithIdsWithOwner(e,t)}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),c=r.prototype,d="desktopFlows",f=[o.observable],p={configurable:!0,enumerable:!0,writable:!0,initializer:null},v={},Object.keys(p).forEach((function(e){v[e]=p[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=f.slice().reverse().reduce((function(e,t){return t(c,d,e)||e}),v),m&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(m):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(c,d,v),v=null),i=v,r);function g(e){var t,n=e&&(null===(t=e.properties.owner)||void 0===t?void 0:t.xrmSystemUserId);return e&&n?{xrmOwner:{"@odata.type":s.l.SystemUser,ownerid:n}}:void 0}},20922:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n(20923).a)},20923:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,i,o,a,s=n(11773),l=n(12348),u=n(16744);function c(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function p(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var m=(i=p((r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"runs",i,this),c(this,"runsNoContext",o,this),c(this,"additionalContext",a,this),Object(s.runInAction)(()=>{this.runs=new l.a({getKey:e=>e.flowsessionid}),this.runsNoContext=new l.a({getKey:e=>e.flowsessionid}),this.additionalContext=new l.a({getKey:e=>e.flowsessionid})})}var t,n,r;return t=e,r=[{key:"getRunEntityKey",value:function(e){var{flowName:t,runName:n}=e;return"".concat(t,"/").concat(n)}},{key:"getRunsCollectionType",value:function(e){var{flowName:t,status:n,isPaginated:r}=e;return"".concat(t,"/").concat(n,"/paginated:").concat(r)}},{key:"getRunsByParentFlowRunIdCollectionType",value:function(e){return e}},{key:"getRunsListCollectionType",value:function(e){var t=Object.keys(e).sort().map(t=>"".concat(t,"=").concat(e[t])).join("&");return"RunsList?".concat(t)}}],(n=[{key:"getUIFlowRunEntity",value:function(e,t,n){return(t&&Object(u.ab)(n.featureFlags,n.environmentStore,n.environmentCapabilityStore)?this.runsNoContext:this.runs).getEntity(e)}},{key:"getUIFlowRunEntityContext",value:function(e){return this.runs.getEntity(e)}},{key:"getUIFlowRunEntityNoContext",value:function(e){return this.runsNoContext.getEntity(e)}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"runs",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=p(r.prototype,"runsNoContext",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=p(r.prototype,"additionalContext",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)},20937:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(20938),i=n(20941),o=new r.a(i.a)},20938:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(18111),i=n.n(r),o=n(13009),a=n(13146),s=n(20939);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowRunActionHttpClient=t,this.runFirstPending=Object(a.a)()}var t,n,r;return t=e,(n=[{key:"getFlowRunActionInputFromLink",value:function(e){if(i()(e))return Promise.reject(new o.b(o.c.retrieveUIFlowIdFromInputsFailed,"inputsLink is Empty or undefined",null,{}));var t=e.split("/workflows/")[1]&&e.split("/workflows/")[1].split("/")[0],n=e.split("/runs/")[1]&&e.split("/runs/")[1].split("/")[0],r=e.split("/actions/")[1]&&e.split("/actions/")[1].split("/")[0];return i()(t)||i()(n)||i()(r)?Promise.reject(new o.b(o.c.retrieveUIFlowIdFromInputsFailed,"inputsLink does not contain flowName+RunName+ActionName",null,{inputsLink:e})):this.runFirstPending({key:"getFlowRunActionInput/flows/".concat(t,"/runs/").concat(n,"/actions/").concat(r,"/inputs"),action:()=>this.flowRunActionHttpClient.getFlowRunActionInputFromLink(e).then(e=>e.data).then(e=>Object(s.a)(e)).then(e=>i()(e)?Promise.reject(new o.b(o.c.retrieveUIFlowIdFromInputsFailed,"uiFlowId did not evaluate to a valid value",null,{flowName:t,runName:n,actionName:r})):e)})}},{key:"getFlowRunActionOutputFromLink",value:function(e){if(i()(e))return Promise.reject(new o.b(o.c.retrieveUIFlowRunIdFromOutputsFailed,"outputsLink is empty or undefined",null,{}));var t=e.split("/workflows/")[1]&&e.split("/workflows/")[1].split("/")[0],n=e.split("/runs/")[1]&&e.split("/runs/")[1].split("/")[0],r=e.split("/actions/")[1]&&e.split("/actions/")[1].split("/")[0];return i()(t)||i()(n)||i()(r)?Promise.reject(new o.b(o.c.retrieveUIFlowRunIdFromOutputsFailed,"outputsLink does not contain flowName+RunName+ActionName",null,{outputsLink:e})):this.runFirstPending({key:"getFlowRunActionInput/flows/".concat(t,"/runs/").concat(n,"/actions/").concat(r,"/outputs"),action:()=>this.flowRunActionHttpClient.getFlowRunActionOutputFromLink(e).then(e=>e.data).then(e=>Object(s.b)(e)).then(e=>i()(e)?Promise.reject(new o.b(o.c.retrieveUIFlowRunIdFromOutputsFailed,"uiFlowRunId did not evaluate to a valid value",null,{flowName:t,runName:n,actionName:r})):e)})}},{key:"getFlowActionRawInputsFromLink",value:function(e){return i()(e)?Promise.reject(new o.b(o.c.retrieveUIFlowIdFromInputsFailed,"inputsLink is empty or undefined",null,{})):this.flowRunActionHttpClient.getFlowRunActionInputFromLink(e)}},{key:"getFlowActionRawOutputsFromLink",value:function(e){return i()(e)?Promise.reject(new o.b(o.c.retrieveUIFlowRunIdFromOutputsFailed,"outputsLink is empty or undefined",null,{})):this.flowRunActionHttpClient.getFlowRunActionOutputFromLink(e)}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},20939:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));n(20940);var r=n(17227),i=n.n(r),o=n(18965);n(12367);function a(e){if(!i()(e)&&!i()(e.parameters))return Object(o.c)(e.parameters,"uiFlowId");if(!i()(e)&&!i()(e.path)){var t=Object(o.c)(e,"path");return t.split("/uiflows/")[1]&&t.split("/uiflows/")[1].split("/")[0]}}function s(e){if(!i()(e)){var t=Object(o.c)(e,"headers");if(t)return Object(o.c)(t,"x-ms-run-id")}}},20940:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.Unknown="Unknown",e.RPAV1="RPAV1",e.Selenium="Selenium",e.PAD="PAD",e.ProcessMiningRecording="ProcessMiningRecording",e}({})},20941:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13192),i=n(20942),o=n(13e3),a=n(12999),s=n(13087),l=n(13198),u=n(13206),c=new i.a(Object(a.a)(),s.a,new r.HttpClient,o.a,l.a,u.a)},20942:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(13215),i=n(12375);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var s=function(){function e(t,n,o,a,s,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.featureFlags=t,this.loggingService=n,this.httpClient=o,this.sessionStore=a,this.userContextChangeMonitoringService=s,this.userContextStore=l,[Object(r.f)(n,()=>this.sessionStore.sessionId),Object(r.d)(i.a),Object(r.j)(this.featureFlags.enableB2BLogin,this.userContextStore,this.userContextChangeMonitoringService,this.loggingService),Object(r.i)(n,this.sessionStore)].forEach(e=>this.httpClient.addRequestInterceptor(e)),this.httpClient.addResponseInterceptor(Object(r.g)(this.loggingService,this.sessionStore),Object(r.e)(this.loggingService,this.sessionStore))}var t,n,a;return t=e,(n=[{key:"getFlowRunActionInputFromLink",value:function(e){return this.httpClient.get({eventName:"PROCESSSIMPLE:POST/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/RUNS/ACTIONS/INPUTSFROMLINK",url:e})}},{key:"getFlowRunActionOutputFromLink",value:function(e){return this.httpClient.get({eventName:"PROCESSSIMPLE:POST/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/RUNS/ACTIONS/OUTPUTSFROMLINK",url:e})}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},20943:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(20944),i=n(12345),o=n(20948),a=n(17258),s=n(20949),l=n(20951),u=n(20941),c=n(13230),d=n(13087),f=n(15463),p=new r.a(l.a,o.a,a.a,u.a,s.a,i.a,d.a,c.a,f.a)},20944:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var r=n(16700),i=n(11773),o=n(13154),a=n(20945),s=n(20946),l=n(12364),u=n(18933),c=n(18932),d=n(17226),f=n(13146),p=n(14835),m=n(13009),v=n(13192),h=n(11806),g=n(20947);function w(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){w(o,r,i,a,s,"next",e)}function s(e){w(o,r,i,a,s,"throw",e)}a(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var R=function(){function e(t,n,r,i,o,s,l,c,d){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowRunsHttpClient=t,this.flowRunsStore=n,this.flowStore=r,this.flowRunActionHttpClient=i,this.flowRunsTriggerOutputsStore=o,this.environmentStore=s,this.loggingService=l,this.getFlowServiceClientResources=c,this.xrmWorkflowHttpClient=d,this.runFirstPending=Object(f.a)(),this.shouldSimulateRun=(e,t)=>t&&!!e&&Object(p.R)(Object(p.v)(e)||void 0),this.simulateNotAllowed=e=>!!e&&Object(p.bb)(e),this.mapXrmFlowRunToFlowRunEntity=e=>{var t,n,r,i,o,s;return new a.a({id:"/flows/".concat(null==e?void 0:e.workflowid,"/runs/").concat(null==e?void 0:e.flowrunid),name:null==e?void 0:e.name,type:"Microsoft.Flow/environments/flows/runs",properties:{startTime:null!==(t=e.starttime)&&void 0!==t?t:"",endTime:null!==(n=e.endtime)&&void 0!==n?n:"",status:null!==(r=e.status)&&void 0!==r?r:u.a.all,workflow:{id:null==e?void 0:e.workflowid,name:null!==(i=null==e?void 0:e._workflow_value)&&void 0!==i?i:"",type:""},error:{code:null!==(o=e.errorcode)&&void 0!==o?o:"",message:null!==(s=e.errormessage)&&void 0!==s?s:""}}})}}var t,n,w;return t=e,(n=[{key:"getFlowRun",value:function(e){var{environmentName:t,flowName:n,flowRunName:r,forceRefresh:i,parameters:o}=e,s=c.a.getRunEntityKey({flowName:n,runName:r}),u=this.flowRunsStore.runs.getEntityStatus(s),d=u&&u.lastFetched,f="true"===(null==o?void 0:o.isMigrationSource);return i||Object(l.d)(d)?this.runFirstPending({key:"getFlowRun/environments/".concat(t,"/flows/").concat(n,"/runs/").concat(r,"?").concat(Object(h.b)(null!=o?o:{})),action:()=>(this.flowRunsStore.runs.entities.setEntityFetching(s),this.flowRunsHttpClient.getFlowRun({environmentName:t,flowName:n,flowRunName:r,parameters:o}).then(e=>{f&&e.data&&(e.data.isMigrationSource=!0);var t=new a.a(e.data);this.flowRunsStore.runs.addEntity(t,l.a),this.flowRunsStore.runs.entities.setEntitySuccess(s)}).catch(e=>{throw this.flowRunsStore.runs.entities.setEntityError(s,e),e}))}):Promise.resolve()}},{key:"getFlowRuns",value:function(e){var{environmentName:t,flowName:n,status:r,forceRefresh:i}=e,o=c.a.getRunsCollectionType({flowName:n,status:r}),s=this.flowRunsStore.runs.getCollection(o),u=s&&s.lastFetched;return i||Object(l.d)(u)?this.runFirstPending({key:"getFlowRuns/environments/".concat(t,"/flows/").concat(n,"/").concat(r),action:()=>(this.flowRunsStore.runs.setCollectionLoading(o),this.flowRunsHttpClient.getFlowRuns({environmentName:t,flowName:n,status:r}).then(e=>{this.flowRunsStore.runs.setCollectionLoaded(o,Object(d.e)(e,a.a),{nextLink:e.data&&e.data.nextLink,resetList:!0,replaceDupe:l.a})}).catch(e=>{throw this.flowRunsStore.runs.setCollectionError(o,e),e}))}):Promise.resolve()}},{key:"getCopilotFlowRun",value:function(e){var{flowName:t,flowRunName:n,forceRefresh:r}=e,i=c.a.getRunEntityKey({flowName:t,runName:n}),o=this.flowRunsStore.runs.getEntityStatus(i),a=o&&o.lastFetched;return r||Object(l.d)(a)?this.runFirstPending({key:"getCopilotFlowRun/flows/".concat(t,"/runs/").concat(n),action:()=>(this.flowRunsStore.runs.entities.setEntityFetching(i),this.xrmWorkflowHttpClient.getCopilotFlowRun(t,n).then(e=>{var t=this.mapXrmFlowRunToFlowRunEntity(e.data.value[0]);this.flowRunsStore.runs.addEntity(t,l.a),this.flowRunsStore.runs.entities.setEntitySuccess(i)}).catch(e=>{throw this.flowRunsStore.runs.entities.setEntityError(i,e),e}))}):Promise.resolve()}},{key:"getCopilotFlowRuns",value:function(e){var{flowName:t,status:n,forceRefresh:r}=e,i=c.a.getRunsCollectionType({flowName:t,status:n}),o=this.flowRunsStore.runs.getCollection(i),a=o&&o.lastFetched;return r||Object(l.d)(a)?this.runFirstPending({key:"getCopilotFlowRuns/flows/".concat(t),action:()=>(this.flowRunsStore.runs.setCollectionLoading(i),this.xrmWorkflowHttpClient.getCopilotFlowRuns(t,n,Object(g.a)()).then(e=>{this.flowRunsStore.runs.setCollectionLoaded(i,e.data.value.map(e=>this.mapXrmFlowRunToFlowRunEntity(e)),{nextLink:e.data&&e.data.nextLink,resetList:!0,replaceDupe:l.a})}).catch(e=>{throw this.flowRunsStore.runs.setCollectionError(i,e),e}))}):Promise.resolve()}},{key:"getMoreFlowRuns",value:function(e){var{environmentName:t,flowName:n,status:r,nextLink:i}=e,o=c.a.getRunsCollectionType({flowName:n,status:r});return this.flowRunsStore.runs.setCollectionLoading(o),this.runFirstPending({key:"getMoreFlowRuns/environments/".concat(t,"/flows/").concat(n,"/status/").concat(r),action:()=>this.flowRunsHttpClient.getMoreFlowRuns(i).then(e=>{this.flowRunsStore.runs.setCollectionLoaded(o,Object(d.e)(e,a.a),{nextLink:e.data&&e.data.nextLink,resetList:!1,replaceDupe:l.a})}).catch(e=>{throw this.flowRunsStore.runs.setCollectionError(o,e),e})})}},{key:"getTriggerHistory",value:function(e){var{environmentName:t,flowName:n,triggerName:r,historyName:i,forceRefresh:o}=e,a=c.a.getTriggerHistoryEntityKey({flowName:n,historyName:i}),u=this.flowRunsStore.triggerHistories.getEntityStatus(a),d=u&&u.lastFetched;return o||Object(l.d)(d)?this.runFirstPending({key:"getTriggerHistory/environments/".concat(t,"/flows/").concat(n,"/triggers/").concat(r,"/histories/").concat(i),action:()=>(this.flowRunsStore.triggerHistories.entities.setEntityFetching(a),this.flowRunsHttpClient.getTriggerHistory({environmentName:t,flowName:n,triggerName:r,historyName:i}).then(e=>{var t=new s.a(e.data);this.flowRunsStore.triggerHistories.addEntity(t,l.a),this.flowRunsStore.triggerHistories.entities.setEntitySuccess(a)}).catch(e=>{throw this.flowRunsStore.triggerHistories.entities.setEntityError(a,e),e}))}):Promise.resolve()}},{key:"getTriggerHistories",value:function(e){var{environmentName:t,flowName:n,triggerName:r,status:i,forceRefresh:o}=e,a=c.a.getTriggerHistoriesCollectionType({flowName:n,status:i}),u=this.flowRunsStore.triggerHistories.getCollection(a),f=u&&u.lastFetched;return o||Object(l.d)(f)?this.runFirstPending({key:"getTriggerHistories/environments/".concat(t,"/flows/").concat(n,"/triggers/").concat(r,"/").concat(i),action:()=>(this.flowRunsStore.triggerHistories.setCollectionLoading(a),this.flowRunsHttpClient.getTriggerHistories({environmentName:t,flowName:n,triggerName:r,status:i}).then(e=>{this.flowRunsStore.triggerHistories.setCollectionLoaded(a,Object(d.e)(e,s.a),{nextLink:e.data&&e.data.nextLink,resetList:!1,replaceDupe:l.a})}).catch(e=>{throw this.flowRunsStore.triggerHistories.setCollectionError(a,e),e}))}):Promise.resolve()}},{key:"getMoreTriggerHistories",value:function(e){var{environmentName:t,flowName:n,triggerName:r,status:i,nextLink:o}=e,a=c.a.getTriggerHistoriesCollectionType({flowName:n,status:i});return this.flowRunsStore.triggerHistories.setCollectionLoading(a),this.runFirstPending({key:"getTriggerHistories/environments/".concat(t,"/flows/").concat(n,"/triggers/").concat(r,"/").concat(i),action:()=>this.flowRunsHttpClient.getMoreTriggerHistories(o).then(e=>{this.flowRunsStore.triggerHistories.setCollectionLoaded(a,Object(d.e)(e,s.a),{nextLink:e.data&&e.data.nextLink,resetList:!1,replaceDupe:l.a})}).catch(e=>{throw this.flowRunsStore.triggerHistories.setCollectionError(a,e),e})})}},{key:"resubmit",value:function(e){var{environmentName:t,flowName:n,triggerName:i,historyName:o,isTestRun:a,shouldFetchFlowDefinition:s}=e;return this.runFirstPending({key:"resubmitRun/environments/".concat(t,"/flows/").concat(n,"/triggers/").concat(i,"/histories/").concat(o),action:()=>this.flowRunsHttpClient.resubmit({environmentName:t,flowName:n,triggerName:i,historyName:o,isTestRun:a}).then(e=>{if(e){var l=[r.c.Actions,r.c.FlowDefinition];this.getFlowRun({environmentName:t,flowName:n,flowRunName:e,parameters:s?{$expand:l.join(","),include:"repetitionCount"}:void 0}),this.getTriggerHistory({environmentName:t,flowName:n,triggerName:i,historyName:e})}else this.loggingService.logWarning("FlowRunsService.resubmit","Resubmission was successful but did not return a flow run name.",{environmentName:t,flowName:n,hasTriggerName:!!i,historyName:o,isTestRun:a})})})}},{key:"cancel",value:function(e){var{environmentName:t,flowName:n,runName:r,isMigrationSource:o,onStart:a,onSuccess:s,onError:l}=e,d=c.a.getRunEntityKey({flowName:n,runName:r});return this.flowRunsStore.runs.hasEntity(d)&&this.flowRunsStore.runs.entities.setEntityUpdating(d),this.runFirstPending({key:"cancelRun/environments/".concat(t,"/flows/").concat(n,"/runs/").concat(r),action:()=>(a&&a(),this.flowRunsHttpClient.cancel({environmentName:t,flowName:n,runName:r,isMigrationSource:o}).then(()=>{s&&s(),this.flowRunsStore.runs.hasEntity(d)&&Object(i.runInAction)(()=>{this.flowRunsStore.runs.getEntity(d).properties.status=u.a.cancelled,this.flowRunsStore.runs.entities.setEntitySuccess(d)})}).catch(e=>{throw l&&l(e),this.flowRunsStore.runs.hasEntity(d)&&this.flowRunsStore.runs.entities.setEntityError(d,e),e}))})}},{key:"runTrigger",value:function(e){var t,n=this,{environmentName:r,flowName:i,triggerName:o,isTestRun:a}=e;return this.runFirstPending({key:"runTrigger/flows".concat(i,"/triggers").concat(o),action:(t=y((function*(){yield n.flowRunsHttpClient.runTrigger({environmentName:r,flowName:i,triggerName:o,isTestRun:a})})),function(){return t.apply(this,arguments)})})}},{key:"submitRun",value:function(e){var t,n,r,i=this,{flowName:a,runData:s,isTestRun:l,flowRunHeaders:u}=e,c=Object(f.a)(),d=null!==(t=null===(n=this.flowStore.publishedFlows.getEntity(a))||void 0===n?void 0:n.properties.flowTriggerUri)&&void 0!==t?t:null===(r=this.flowStore.flows.getEntity(a))||void 0===r?void 0:r.properties.flowTriggerUri;return c({key:"submitRun/flows/".concat(a),action:()=>{if(!d)throw new Error("No flowTriggerUri");var e=this.environmentStore.currentEnvironmentName;return this.simulateOrSubmitRun({environmentName:e,flowName:a,runData:s,isTestRun:l,flowTriggerUri:d,flowRunHeaders:u}).catch(function(){var e=y((function*(e){if(Object(v.isHttpClientAbortError)(e)){var t=yield i.getFlowServiceClientResources();throw new m.a(m.c.flowInvokeTimeoutWaitingForRun,t.Flow.Error.TimeoutWaitingForRun,e)}var n=e.response;if(n&&502===n.status&&n.headers[o.y.workflowRunId])return n.headers[o.y.workflowRunId];throw e}));return function(t){return e.apply(this,arguments)}}())}})}},{key:"getTriggerOutputs",value:function(e){var{uri:t}=e;return this.flowRunActionHttpClient.getFlowRunActionOutputFromLink(t).then(e=>e)}},{key:"loadTriggerOutputs",value:function(e){var{runsCollectionList:t}=e,n=t.map(e=>this.flowRunsStore.runs.getEntity(e)),r=this.flowRunsTriggerOutputsStore.getOutputUrisForRunsMissingData(n).filter(Boolean).map(e=>this.getTriggerOutputs({uri:e}));return Promise.all(r).then(e=>this.flowRunsTriggerOutputsStore.setRunTriggerOutputsFromBatchResponse(e))}},{key:"getAndLoadButtonOutputsFriendlyNames",value:function(e,t,n){var r,i=this.flowStore.flows.getEntity(e);return i&&(r=Object(p.t)(i,t,n))&&this.flowRunsTriggerOutputsStore.updateButtonInputsFriendlyNameMapping(e,r),r}},{key:"getFlowTriggerName",value:function(e){var t=this.flowStore.flows.getEntity(e),n=t&&Object(p.y)(t);if(!n)throw new Error("No flow trigger name.");return n}},{key:"simulateOrSubmitRun",value:function(e){var t,{environmentName:n,flowName:r,runData:i,isTestRun:o,flowTriggerUri:a,flowRunHeaders:s}=e,l=this.flowStore.flows.getEntity(r);return n&&this.shouldSimulateRun(l,o)?this.simulateNotAllowed(l)?null!==(t=this.environmentStore.environmentClaim)&&void 0!==t&&t.isPayAsYouGoEnabled?this.getFlowServiceClientResources().then(e=>Promise.reject({code:m.c.simulateRunNotAllowed,message:e.FlowRun.SimulateRunNotAllowed})):this.flowRunsHttpClient.submitRun({flowTriggerUri:a,runData:i,isTestRun:o,flowRunHeaders:s}):this.flowRunsHttpClient.simulateRun({environmentName:n,flowName:r,triggerName:this.getFlowTriggerName(r),runData:i,isTestRun:o}):this.flowRunsHttpClient.submitRun({flowTriggerUri:a,runData:i,isTestRun:o,flowRunHeaders:s})}}])&&b(t.prototype,n),w&&b(t,w),Object.defineProperty(t,"prototype",{writable:!1}),e}()},20945:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r,i=n(13093),o=n.n(i),a=n(11773),s=n(17265),l=n(14902);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function d(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var f=(d((r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=void 0,this.name=void 0,this.contextRunProperties=void 0,this.properties=void 0,this.type=void 0,this.isMigrationSource=void 0,Object(a.extendObservable)(this,t)}var t,n,r;return t=e,(n=[{key:"toJS",value:function(){return o()(Object(a.toJS)(this),"toJS")}},{key:"flowName",get:function(){return Object(l.c)(this.id).flows}},{key:"setLastFailedAction",value:function(e){this.properties.lastFailedActionName=e.name,this.properties.error=e.error&&{code:e.error&&e.error.code||"",message:e.error&&e.error.message||""}}},{key:"setLastFailedActionName",value:function(e){this.properties.lastFailedActionName=e}},{key:"setErrorContext",value:function(e){this.properties.errorContext=e}},{key:"setDesktopV2FlowActions",value:function(e,t,n,r){this.properties.actions=e,this.properties.functions=t,this.properties.actionLinkedRunInfos=n,this.properties.childFlowLogStatus=r===s.a.stripped?s.a.stripped:s.a.default}},{key:"setActions",value:function(e,t){this.properties.actions=e,this.properties.repetitions=t}},{key:"setTriggerOutputs",value:function(e){this.properties.triggerOutputs=e}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"flowName",[a.computed],Object.getOwnPropertyDescriptor(r.prototype,"flowName"),r.prototype),d(r.prototype,"setLastFailedAction",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"setLastFailedAction"),r.prototype),d(r.prototype,"setLastFailedActionName",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"setLastFailedActionName"),r.prototype),d(r.prototype,"setErrorContext",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"setErrorContext"),r.prototype),d(r.prototype,"setDesktopV2FlowActions",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"setDesktopV2FlowActions"),r.prototype),d(r.prototype,"setActions",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"setActions"),r.prototype),d(r.prototype,"setTriggerOutputs",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"setTriggerOutputs"),r.prototype),r)},20946:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,i=n(13093),o=n.n(i),a=n(11773),s=n(14902);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c,d,f,p,m,v,h=(c=(r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=void 0,this.name=void 0,this.properties=void 0,this.type=void 0,Object(a.extendObservable)(this,t)}var t,n,r;return t=e,(n=[{key:"toJS",value:function(){return o()(Object(a.toJS)(this),"toJS")}},{key:"flowName",get:function(){return Object(s.c)(this.id).flows}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,d="flowName",f=[a.computed],p=Object.getOwnPropertyDescriptor(r.prototype,"flowName"),m=r.prototype,v={},Object.keys(p).forEach((function(e){v[e]=p[e]})),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=f.slice().reverse().reduce((function(e,t){return t(c,d,e)||e}),v),m&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(m):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(c,d,v),v=null),r)},20947:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(11808),i=()=>{var e=Object(r.a)().desktopFlowRunsHistoryPageSizeFeature.getConfig().desktopFlowRunsHistoryPageSize;return!e||e<=0?void 0:e}},20948:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n(18932).a)},20949:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n(20950).a)},20950:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(14835);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.triggerOutputs=void 0,this.buttonInputsFriendlyNameMapping={},this.getOutputUrisForRunsMissingData=e=>e.filter(e=>!this.triggerOutputs||!this.triggerOutputs[e.name]).map(e=>{var t;return null===(t=e.properties.trigger)||void 0===t||null===(t=t.outputsLink)||void 0===t?void 0:t.uri}),this.setRunTriggerOutputsFromBatchResponse=e=>{var t=this.triggerOutputs,n=e.reduce((e,t)=>{var n,r=null===(n=t.url)||void 0===n?void 0:n.match(/runs\/([^\/]+)\/contents/);return e[r&&r.length>1?r[1]:""]=this.extractTriggerOutputs(t.data),e},t||{});return this.setRunTriggerOutputs(n),n},this.updateButtonInputsFriendlyNameMapping=(e,t)=>{this.buttonInputsFriendlyNameMapping[e]=t},this.setRunTriggerOutputs=e=>{this.triggerOutputs=e}}var t,n,s;return t=e,(n=[{key:"extractTriggerOutputs",value:function(e){var t,n,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.body);return null!==(t=e.headers)&&void 0!==t&&t[r.b]&&(a[r.b]=e.headers[r.b]),null!==(n=e.headers)&&void 0!==n&&n[r.a]&&(a[r.a]=e.headers[r.a]),a}}])&&a(t.prototype,n),s&&a(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},20951:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(20952),i=n(12339),o=n(17907),a=new r.a(Object(i.b)(),o.a)},20952:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(13154),i=n(13192),o=n(13144),a=n(15455),s=n(17297),l=n(12381),u=n(18933);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appSettings=t,this.httpClient=n,this.getRuns=e=>{var t=e.map(e=>({method:"GET",url:"".concat(this.appSettings.processSimpleResourceProviderPath,"/flows/").concat(e.flowName,"/runs/").concat(e.runName)}));return this.httpClient.post({eventName:"PROCESSSIMPLE:POST/BATCH/FLOWS/RUNS",url:Object(a.b)(Object(o.c)(this.appSettings).flowRP),data:Object(a.c)(t)})}}var t,n,d;return t=e,(n=[{key:"getFlowRun",value:function(e){var{environmentName:t,flowName:n,flowRunName:r,parameters:i}=e;return this.httpClient.get({eventName:"PROCESSSIMPLE:GET/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/RUNS/",url:"".concat(this.getFlowRunsUrl({environmentName:t,flowName:n}),"/").concat(r),params:i})}},{key:"getFlowRuns",value:function(e){var{environmentName:t,flowName:n,status:r}=e;return this.httpClient.get({eventName:"PROCESSSIMPLE:GET/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/RUNS",url:this.getFlowRunsUrl({environmentName:t,flowName:n}),params:r===u.a.all?void 0:{$filter:"status eq '".concat(r,"'")}})}},{key:"getMoreFlowRuns",value:function(e){return this.httpClient.get({eventName:"PROCESSSIMPLE:GET/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/RUNS",url:e})}},{key:"getTriggerHistory",value:function(e){var{environmentName:t,flowName:n,triggerName:r,historyName:i}=e;return this.httpClient.get({eventName:"PROCESSSIMPLE:GET/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/TRIGGERS/HISTORIES/",url:"".concat(this.getTriggerHistoriesUrl({environmentName:t,flowName:n,triggerName:r}),"/").concat(i)})}},{key:"getTriggerHistories",value:function(e){var{environmentName:t,flowName:n,triggerName:r,status:i}=e;return i===u.b.all?this.httpClient.get({eventName:"PROCESSSIMPLE:GET/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/TRIGGERS/HISTORIES",url:this.getTriggerHistoriesUrl({environmentName:t,flowName:n,triggerName:r}),params:{$expand:"properties/run/properties"}}):this.httpClient.get({eventName:"PROCESSSIMPLE:GET/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/TRIGGERS/HISTORIES",url:this.getTriggerHistoriesUrl({environmentName:t,flowName:n,triggerName:r}),params:{$expand:"properties/run/properties",$filter:"status eq '".concat(i,"'")}})}},{key:"getMoreTriggerHistories",value:function(e){return this.httpClient.get({eventName:"PROCESSSIMPLE:GET/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/TRIGGERS/HISTORIES",url:e})}},{key:"resubmit",value:function(e){var{environmentName:t,flowName:n,triggerName:o,historyName:a,isTestRun:s}=e,l={eventName:"PROCESSSIMPLE:POST/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/TRIGGERS/HISTORIES/RESUBMIT",url:"".concat(this.getTriggerHistoriesUrl({environmentName:t,flowName:n,triggerName:o}),"/").concat(a,"/resubmit")};return s&&(l=Object(i.setRequestHeader)(l,r.y.clientKeywords,r.w.testFlow)),this.httpClient.post(l).then(e=>{var t,n=null===(t=e.headers)||void 0===t?void 0:t[r.y.workflowRunId];return n?Promise.resolve(n.toString()):Promise.resolve(void 0)})}},{key:"runTrigger",value:function(e){var{environmentName:t,flowName:n,triggerName:o,isTestRun:a}=e,s={eventName:"PROCESSSIMPLE:POST/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/TRIGGERS/RUN",url:"".concat(this.getTriggerUrl({environmentName:t,flowName:n,triggerName:o}),"/run")};return a&&(s=Object(i.setRequestHeader)(s,r.y.clientKeywords,r.w.testFlow)),this.httpClient.post(s)}},{key:"submitRun",value:function(t){var{flowTriggerUri:n,runData:o={},isTestRun:a,flowRunHeaders:l}=t,u={eventName:"PROCESSSIMPLE:POST/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/TRIGGERS/",url:n,data:o};if(a&&(u=Object(i.setRequestHeader)(u,r.y.clientKeywords,r.w.testFlow)),l)for(var[c,d]of Object.entries(l))u=Object(i.setRequestHeader)(u,c,d.toUpperCase());return Object(s.a)(()=>this.httpClient.post(u),{attempts:e.RUN_FLOW_ATTEMPTS_MAX,backoffMs:e.RUN_FLOW_BACKOFF_MS},e=>Object(i.isHttpClientAbortError)(e)||Object(i.isHttpClientNetworkError)(e)||Object(i.isHttpClientFailedToFetchError)(e)).then(e=>{var t=e.headers&&e.headers[r.y.workflowRunId];return t?Promise.resolve(t.toString()):Promise.resolve(void 0)})}},{key:"simulateRun",value:function(e){var{environmentName:t,flowName:n,triggerName:o,runData:a={},isTestRun:s}=e,l={eventName:"PROCESSSIMPLE:POST/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/TRIGGERS/SIMULATE",url:"".concat(this.getFlowRpBaseUrl({environmentName:t,flowName:n}),"/triggers/").concat(o,"/simulate"),data:a};return s&&(l=Object(i.setRequestHeader)(l,r.y.clientKeywords,r.w.testFlow)),this.httpClient.post(l).then(e=>{var t=e.headers&&e.headers[r.y.workflowRunId];return t?Promise.resolve(t.toString()):Promise.resolve(void 0)})}},{key:"cancel",value:function(e){var{environmentName:t,flowName:n,runName:r,isMigrationSource:i}=e;return this.httpClient.post({eventName:"PROCESSSIMPLE:POST/PROVIDERS/MICROSOFT.PROCESSSIMPLE/ENVIRONMENTS/FLOWS/RUNS/CANCEL",url:"".concat(this.getFlowRunsUrl({environmentName:t,flowName:n}),"/").concat(r,"/cancel?isMigrationSource=").concat(i)})}},{key:"getFlowRpBaseUrl",value:function(e){var{environmentName:t,flowName:n}=e;return Object(l.b)(Object(o.b)(t,this.appSettings).flowRP,this.appSettings.processSimpleResourceProviderPath,"/environments/".concat(t,"/flows/").concat(n))}},{key:"getFlowRunsUrl",value:function(e){var{environmentName:t,flowName:n}=e;return"".concat(this.getFlowRpBaseUrl({environmentName:t,flowName:n}),"/runs")}},{key:"getTriggerUrl",value:function(e){var{environmentName:t,flowName:n,triggerName:r}=e,i=encodeURIComponent(r);return"".concat(this.getFlowRpBaseUrl({environmentName:t,flowName:n}),"/triggers/").concat(i)}},{key:"getTriggerHistoriesUrl",value:function(e){var{environmentName:t,flowName:n,triggerName:r}=e;return"".concat(this.getTriggerUrl({environmentName:t,flowName:n,triggerName:r}),"/histories")}}])&&c(t.prototype,n),d&&c(t,d),Object.defineProperty(t,"prototype",{writable:!1}),e}();f.RUN_FLOW_ATTEMPTS_MAX=2,f.RUN_FLOW_BACKOFF_MS=1e3},20985:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(20986),i=n(12999),o=n(17258),a=n(20922),s=n(20904),l=n(15459),u=n(12345),c=n(15460),d=n(15463),f=n(15461),p=n(17213),m=n(13087),v=n(20988),h=n(17448),g=n(13230),w=n(17903),y=new r.a(w.a,Object(i.a)(),a.a,o.a,s.a,d.a,c.b,p.a,m.a,v.a,u.a,l.a,h.a,f.a,g.a)},20986:function(e,t,n){"use strict";n.d(t,"a",(function(){return G})),n.d(t,"b",(function(){return K}));var r,i=n(18111),o=n.n(i),a=n(11773),s=n(17208),l=n(17264),u=n(12364),c=n(13009),d=n(18933),f=n(17212),p=n(17265),m=n(15427),v=n(20923),h=n(17226),g=n(15402),w=n(13146),y=n(17231),b=n(13085),S=n(17232),R=n(13031),O=n(13120),F=n(16744),k=n(15422),C=n(15431),E=n(15992),N=n(20987),P=n(20947),j=n(15388);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){M(o,r,i,a,s,"next",e)}function s(e){M(o,r,i,a,s,"throw",e)}a(void 0)}))}}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function x(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var U,H,W,z,_,B,G=(U=(r=function(){function e(t,n,r,i,o,a,s,u,d,p,m,v,h,g,y){var S=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.desktopFlowRuntimeHttpClient=t,this.featureFlags=n,this.uiFlowRunsStore=r,this.flowStore=i,this.xrmIdentityStore=o,this.xrmWorkflowHttpClient=a,this.xrmEntityHttpClient=s,this.flowService=u,this.loggingService=d,this.uiFlowService=p,this.environmentStore=m,this.environmentCapabilityStore=v,this.graphService=h,this.getErrorResources=g,this.getFlowServiceClientResources=y,this.runFirstPending=Object(w.a)(),this.entityManagerServiceHelper=void 0,this.toUiFlowRunEntityAndLoadThumbnail=e=>(e.owninguser&&e.owninguser.systemuserid&&this.populateOwnerAndFetchThumbnails(e.owninguser),new l.g(e)),this.loadCloudFlows=()=>{return this.runFirstPending({key:"loadCloudFlows",action:(e=L((function*(){yield Promise.all(f.b.map(S.loadFlowsOfCollectionType))})),function(){return e.apply(this,arguments)})});var e},this.loadMoreCloudFlows=()=>{return this.runFirstPending({key:"loadMoreCloudFlows",action:(e=L((function*(){yield Promise.all(f.b.map(S.loadMoreFlowsOfCollectionType))})),function(){return e.apply(this,arguments)})});var e},this.loadFlowsOfCollectionType=function(){var e=L((function*(e){var t=yield S.getFlowServiceClientResources();yield S.flowService.loadFlowList(e,t)}));return function(t){return e.apply(this,arguments)}}(),this.loadMoreFlowsOfCollectionType=function(){var e=L((function*(e){var t;null!==(t=S.flowStore.flows.getCollection(e))&&void 0!==t&&t.hasMore&&(yield S.flowService.loadFlowListMore(e))}));return function(t){return e.apply(this,arguments)}}(),this.getWorkflowWithDesktopFlowRunsList=L((function*(){var e,t=S.loggingService.profileStart(b.a.rpaXrmLoadParentCloudWorkflowsWithDesktopFlowRunsStart);try{e=S.getAlreadyKnownParentWorkflow(),yield S.fetchUnknownWorkflowIdsWithDesktopFlowRuns(e),yield Promise.all([S.flowService.loadGivenFlows(Array.from(e.ApiFlow)),S.uiFlowService.loadGivenDesktopFlowsAsync(Array.from(e.DesktopFlow),!1)]);var n=S.flattenParentFlowsWithDesktopFlowRuns(e),r=n.map(e=>S.flowStore.flows.getEntity(e)).filter(Boolean).map(e=>e).sort((e,t)=>(""+e.displayName).localeCompare(""+t.displayName));return S.loggingService.profileEndWithSuccess(t,b.a.rpaXrmLoadParentCloudWorkflowsWithDesktopFlowRunsEnd,{parentWorkflowCount:n.length,hydratableParentWorkflowCount:r}),r}catch(i){throw S.loggingService.profileEnd(t,b.a.rpaXrmLoadParentCloudWorkflowsWithDesktopFlowRunsEnd,Object(c.y)(i),i,{parentWorkflowCount:e&&e.ApiFlow.size+e.DesktopFlow.size}),i}})),this.fetchUnknownWorkflowIdsWithDesktopFlowRuns=e=>{var t=this.flattenParentFlowsWithDesktopFlowRuns(e);return this.xrmWorkflowHttpClient.fetchRunsFilteringParentWorkflowIds(t).then(n=>{var r=t.length;return n.data.value.forEach(t=>{var n=t&&t.context&&this.parseParentWorkflow(t.context);n&&e[n.parentWorkflowType].add(n.parentWorkflowId)}),r<e.ApiFlow.size+e.DesktopFlow.size&&n.data.nextLink?this.fetchUnknownWorkflowIdsWithDesktopFlowRuns(e):Promise.resolve()})},this.parseParentWorkflow=e=>{try{var t=e&&JSON.parse(e);return t&&t.parentWorkflowId?{parentWorkflowId:t.parentWorkflowId,parentWorkflowType:t.parentWorkflowType||l.d.apiFlow}:void 0}catch(n){return}},this.entityManagerServiceHelper=new j.a(d)}var t,n,r;return t=e,(n=[{key:"loadUiFlowRun",value:function(e){var{flowName:t,environmentName:n,runName:r,forceRefresh:i}=e,o=r,a=this.uiFlowRunsStore.runs.getEntityStatus(o),s=a&&a.lastFetched;if(!i&&!Object(u.d)(s))return Promise.resolve();var l=this.loggingService.profileStart(b.a.rpaXrmLoadRunStart,{flowName:t,environmentName:n,runName:r});return this.uiFlowRunsStore.runs.entities.setEntityFetching(o),this.xrmEntityHttpClient.retrieveRecord("flowsessions",r,{$select:this.getXrmFlowSessionSelectQueryParameter(),$expand:m.j.expandParams}).then(e=>{this.uiFlowRunsStore.runs.entities.addEntity(this.toUiFlowRunEntityAndLoadThumbnail(e.data),u.a),this.uiFlowRunsStore.runs.entities.setEntitySuccess(o),this.loggingService.profileEndWithSuccess(l,b.a.rpaXrmLoadRunEnd)}).catch(e=>{throw this.uiFlowRunsStore.runs.entities.setEntityError(o,e),this.loggingService.profileEnd(l,b.a.rpaXrmLoadRunEnd,Object(c.y)(e),e),e})}},{key:"populateOwnerAndFetchThumbnails",value:function(e){Object(u.b)(this.xrmIdentityStore.xrmUsers.entities,e),e.azureactivedirectoryobjectid&&this.graphService.getThumbnailPhoto(e.azureactivedirectoryobjectid)}},{key:"loadRunsList",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v.a.getRunsListCollectionType(t),i=arguments.length>4?arguments[4]:void 0,o=this.uiFlowRunsStore.runs.getCollection(r),a=o&&o.lastFetched;return n||Object(u.d)(a)?(this.uiFlowRunsStore.runs.setCollectionLoading(r),Object(F.s)(this.featureFlags)&&this.loggingService.logInfo("loadRunsList","Retry activated on get runs"),this.runFirstPending({key:"loadRunsList/environments/".concat(e,"/collections/").concat(r),action:()=>{var n=this.xrmWorkflowHttpClient.getRuns(t,void 0,Object(F.s)(this.featureFlags),Object(P.a)()).then(e=>this.storeUiFlowRuns(e,r,!0)).catch(e=>{throw this.uiFlowRunsStore.runs.setCollectionError(r,e),e});return Object(g.b)({promise:n,loggingService:this.loggingService,eventStartName:b.a.uiFlowRunsXRMLoadStart,eventEndName:b.a.uiFlowRunsXRMLoadEnd,getStatus:t=>X(t,e,i),eventData:i&&V(i)})}})):Promise.resolve()}},{key:"loadRunsListNoContext",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v.a.getRunsListCollectionType(t),i=arguments.length>4?arguments[4]:void 0,o=this.uiFlowRunsStore.runsNoContext.getCollection(r),a=o&&o.lastFetched;return n||Object(u.d)(a)?(this.uiFlowRunsStore.runsNoContext.setCollectionLoading(r),Object(F.s)(this.featureFlags)&&this.loggingService.logInfo("loadRunsListNoContext","Retry activated on get runs"),this.runFirstPending({key:"loadRunsListNoContext/environments/".concat(e,"/collections/").concat(r),action:()=>{var n=this.xrmWorkflowHttpClient.getRuns(t,void 0,Object(F.s)(this.featureFlags),Object(P.a)()).then(e=>this.storeUiFlowRuns(e,r,!0,this.uiFlowRunsStore.runsNoContext)).catch(e=>{throw this.uiFlowRunsStore.runsNoContext.setCollectionError(r,e),e});return Object(g.b)({promise:n,loggingService:this.loggingService,eventStartName:b.a.uiFlowRunsXRMLoadStartNoContext,eventEndName:b.a.uiFlowRunsXRMLoadEndNoContext,getStatus:t=>X(t,e,i),eventData:i&&V(i)})}})):Promise.resolve()}},{key:"loadRunsListMore",value:function(e,t,n){return this.uiFlowRunsStore.runs.setCollectionLoading(t),this.runFirstPending({key:"loadRunsList/environments/".concat(e,"/collections/").concat(t),action:()=>{var e=this.xrmWorkflowHttpClient.getMoreRuns(n,Object(P.a)()).then(e=>this.storeUiFlowRuns(e,t,!1)).catch(e=>{throw this.uiFlowRunsStore.runs.getCollection(t).setLoading(!1),e});return Object(g.b)({promise:e,loggingService:this.loggingService,eventStartName:b.a.uiFlowRunsXRMLoadStart,eventEndName:b.a.uiFlowRunsXRMLoadEnd})}})}},{key:"loadRunsListMoreNoContext",value:function(e,t,n){return this.uiFlowRunsStore.runsNoContext.setCollectionLoading(t),this.runFirstPending({key:"loadRunsList/environments/".concat(e,"/collections/").concat(t),action:()=>{var e=this.xrmWorkflowHttpClient.getMoreRuns(n,Object(P.a)()).then(e=>this.storeUiFlowRuns(e,t,!1,this.uiFlowRunsStore.runsNoContext)).catch(e=>{throw this.uiFlowRunsStore.runsNoContext.getCollection(t).setLoading(!1),e});return Object(g.b)({promise:e,loggingService:this.loggingService,eventStartName:b.a.uiFlowRunsXRMLoadMoreStartNoContext,eventEndName:b.a.uiFlowRunsXRMLoadMoreEndNoContext})}})}},{key:"storeUiFlowRuns",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.uiFlowRunsStore.runs;e.data.value.forEach(e=>{if(e.regardingobjectid_process){var t=this.flowStore.flows.entities.addEntity(new s.a(Object(y.g)(e.regardingobjectid_process,this.xrmIdentityStore)),u.a);this.flowStore.flows.entities.setEntitySuccess(t)}});var i=I(I({},e),{},{data:{value:e.data.value,nextLink:e.data.nextLink}});r.setCollectionLoaded(t,Object(h.e)(i,l.g),{nextLink:i.data&&i.data.nextLink,resetList:n,replaceDupe:u.a})}},{key:"getFlowRuns",value:function(e,t,n,r,i){var o=n||d.a.all,a=v.a.getRunsCollectionType({flowName:e,status:o,isPaginated:!!i}),s=this.uiFlowRunsStore.runs.getCollection(a),f=s&&s.lastFetched;if(r||Object(u.d)(f)){var p=this.loggingService.profileStart(b.a.rpaXrmLoadRunStart,{flowName:e,environmentName:t});return this.uiFlowRunsStore.runs.setCollectionLoading(a),this.runFirstPending({key:"getUIFlowRuns/environments/".concat(t,"/flows/").concat(e,"/").concat(n),action:()=>this.xrmWorkflowHttpClient.getWorkflowRuns(e,N.a[o],i?50:void 0,{$select:this.getXrmFlowSessionSelectQueryParameter()}).then(e=>{var t=I(I({},e),{},{data:{value:e.data.value,nextLink:e.data.nextLink}});this.uiFlowRunsStore.runs.setCollectionLoaded(a,Object(h.e)(t,l.g),{nextLink:t.data&&t.data.nextLink,resetList:!0,replaceDupe:u.a}),this.loggingService.profileEndWithSuccess(p,b.a.rpaXrmLoadRunEnd)}).catch(e=>{throw this.uiFlowRunsStore.runs.setCollectionError(a,e),this.loggingService.profileEnd(p,b.a.rpaXrmLoadRunEnd,Object(c.y)(e),e),e})})}return Promise.resolve()}},{key:"getMoreFlowRuns",value:function(e){var{environmentName:t,flowName:n,status:r,nextLink:i}=e,o=v.a.getRunsCollectionType({flowName:n,status:r,isPaginated:!0});return this.uiFlowRunsStore.runs.setCollectionLoading(o),this.runFirstPending({key:"getMoreFlowRuns/environments/".concat(t,"/flows/").concat(n,"/status/").concat(r),action:()=>{var e=this.loggingService.profileStart(b.a.rpaXrmLoadMoreRunStart,{flowName:n,environmentName:t});return this.xrmWorkflowHttpClient.getMoreRuns(i,Object(P.a)()).then(t=>{var n=I(I({},t),{},{data:{value:t.data.value,nextLink:t.data.nextLink}});this.uiFlowRunsStore.runs.setCollectionLoaded(o,Object(h.e)(n,l.g),{nextLink:n.data&&n.data.nextLink,resetList:!1,replaceDupe:u.a}),this.loggingService.profileEndWithSuccess(e,b.a.rpaXrmLoadMoreRunEnd)}).catch(t=>{throw this.uiFlowRunsStore.runs.setCollectionError(o,t),this.loggingService.profileEnd(e,b.a.rpaXrmLoadMoreRunEnd,Object(c.y)(t),t),t})}})}},{key:"loadRunActions",value:function(e){var{flowName:t,runName:n,isDesktopV2Flow:r}=e,i=this.uiFlowRunsStore.runs.getEntity(n);if(!i)return this.getErrorResources().then(e=>Promise.reject(new c.a(c.c.rpaFlowRunEntityMissing,e.UiFlowRunService.Error.FlowRunEntityMissing,null,{flowName:t,runName:n,isDesktopV2Flow:r})));if(null===i.additionalcontext){var o=Object(l.p)(i);return this.getErrorResources().then(e=>{throw new c.b(c.c.uiFlowNotStarted,this.formatErrorMessage(e,o),o)})}var a=this.loggingService.profileStart(b.a.rpaXrmLoadRunActionsStart,{flowName:t,runName:n});return this.fetchRunActionCollection(i.flowsessionid,"desktopflowRunDetailsPage").then(()=>{var e=this.uiFlowRunsStore.additionalContext.getEntity(i.flowsessionid);return e?(e.actions.length>0&&this.loggingService.profileEndWithSuccess(a,b.a.rpaXrmLoadRunActionsEnd),this.isRpaScriptRunActionV2Collection(e,r)?(i.setDesktopV2FlowActions(Object(S.f)(e.actions),Object(S.b)(e.actions),Object(S.c)(e.actions),e.childFlowsLogStatus),e.actions):(i.setActions(Object(S.g)(e.actions),Object(S.d)(e.actions)),e.actions)):null}).then(e=>this.setupErrorContext(t,n,i,e,r)).catch(e=>{if(Object(l.n)(i))return this.getErrorResources().then(t=>{throw this.loggingService.profileEnd(a,b.a.rpaXrmLoadRunActionsEnd,c.e.Warning,e,{errorCode:c.c.uiFlowRunning,message:t.Flow.Status.Running}),new c.b(c.c.uiFlowRunning,t.Flow.Status.Running,e)});if(e&&e.response&&404===e.response.status&&i&&Object(l.l)(i))return this.getErrorResources().then(t=>{this.loggingService.profileEnd(a,b.a.rpaXrmLoadRunActionsEnd,c.e.Warning,e,{errorCode:c.c.uiFlowNotStarted,message:this.formatErrorMessage(t,e.response)});var n=Object(l.p)(i);throw new c.b(c.c.uiFlowNotStarted,this.formatErrorMessage(t,n||e.response),n||e)});throw this.loggingService.profileEnd(a,b.a.rpaXrmLoadRunActionsEnd,Object(c.y)(e),e),e})}},{key:"isRpaScriptRunActionV2Collection",value:function(e,t){return!!t}},{key:"fetchRunActionCollection",value:function(e,t){return this.entityManagerServiceHelper.fetchEntity(this.uiFlowRunsStore.additionalContext,e,()=>this.xrmEntityHttpClient.retrieveRecordFileContent("flowsessions",e,"additionalcontext").then(t=>o()(t.data)?{flowsessionid:e,actions:[]}:I(I({},t.data),{},{flowsessionid:e})),"fetchFlowSessionAdditionalContext",b.a.fetchFlowSessionAdditionalContext,t)}},{key:"getFlowRunInputs",value:function(e){return Object(g.b)({loggingService:this.loggingService,promise:this.xrmEntityHttpClient.retrieveRecordFileContent("flowsessions",e,"inputs").then(e=>e.data),eventStartName:b.a.rpaXrmGetRunOutputsStart,eventEndName:b.a.rpaXrmGetRunOutputsEnd})}},{key:"getFlowRunOutputs",value:function(e){return Object(g.b)({loggingService:this.loggingService,promise:this.xrmEntityHttpClient.retrieveRecordFileContent("flowsessions",e,"outputs").then(e=>e.data),eventStartName:b.a.rpaXrmGetRunOutputsStart,eventEndName:b.a.rpaXrmGetRunOutputsEnd})}},{key:"setupErrorContext",value:function(e,t,n,r,i){if(!r||0===r.length)return Promise.resolve();var o=r.filter(e=>e.status===p.b.Failed);if(o.length>0){var a=(o=o.sort((e,t)=>e.startTime>t.startTime?-1:0))[0];if(n.setLastFailedAction(a),i){var s=Object(S.a)(r),l=a.name;Object.keys(s).forEach(e=>{var t=s[e];t.status===a.status&&t.startTime===a.startTime&&(l=e)}),n.setLastFailedActionName(l)}return a.contextData&&0!==a.contextData.length&&a.contextData[0].valueType===p.d.BinaryReference?this.xrmWorkflowHttpClient.getBinaryDataIds(e,t,a.name).then(e=>{var t=e.data.value;t&&t.length>0&&(a.contextData[0].value=t[0].workflowbinaryid,n.setErrorContext(a.contextData))}):Promise.resolve()}return Promise.resolve()}},{key:"loadParentWorkflowsWithDesktopFlowRuns",value:function(){return this.runFirstPending({key:"loadCloudWorkflowWithDesktopFlowRuns",action:()=>{var e=f.a.flowsWithRpaRuns;return this.flowStore.flows.setCollectionLoading(e),this.getWorkflowWithDesktopFlowRunsList().then(t=>{this.flowStore.flows.setCollectionLoaded(e,t,{resetList:!0,replaceDupe:u.a})}).catch(t=>{throw this.flowStore.flows.setCollectionError(e,t),t})}})}},{key:"safeStopRun",value:function(e){var t,n=this,{flowName:r,runName:i}=e;return this.runFirstPending({key:"/flows/".concat(r,"/runs/").concat(i,"/safecancel"),action:(t=L((function*(){yield n.desktopFlowRuntimeHttpClient.safestop({flowName:r,runName:i})})),function(){return t.apply(this,arguments)})})}},{key:"getAlreadyKnownParentWorkflow",value:function(){var e,t=(null===(e=this.flowStore.flows.getCollection(f.a.flowsWithRpaRuns))||void 0===e?void 0:e.list)||[],n={ApiFlow:new Set,DesktopFlow:new Set};for(var r of t){var i=this.flowStore.flows.getEntity(r);i&&n[i.isUIFlow?l.d.desktopFlow:l.d.apiFlow].add(r)}return this.uiFlowRunsStore.runs.entities.entities.forEach(e=>{var t=e&&e.context.parentWorkflowId;t&&n[e.context.parentWorkflowType||l.d.apiFlow].add(t)}),n}},{key:"flattenParentFlowsWithDesktopFlowRuns",value:function(e){return Array.from(e.ApiFlow).concat(Array.from(e.DesktopFlow))}},{key:"formatErrorMessage",value:function(e,t){var n=Object(c.db)(t);return n?Object(R.a)(e.UIFlow.FlowRunNeverStarted.ErrorDetailGA,n):e.UIFlow.FlowRunNeverStarted.ErrorGA}},{key:"getXrmFlowSessionSelectQueryParameter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=m.j.selectParams;return this.hasEnvironmentCapability(O.b.hasFlowSessionErrorDetails)&&(t="".concat(t,",").concat(m.j.additionalFields.errorDetails)),this.hasEnvironmentCapability(O.b.hasFlowSessionInnerError)&&(t="".concat(t,",").concat(m.j.additionalFields.errorInnerError)),this.hasEnvironmentCapability(O.b.hasFlowSessionInputs)&&(t="".concat(t,",").concat(m.j.additionalFields.inputs,",").concat(m.j.additionalFields.outputs)),Object(F.t)(this.environmentStore,this.environmentCapabilityStore)&&(t="".concat(t,",").concat(m.j.additionalFields.runDetails)),Object(F.A)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)&&(t="".concat(t,",").concat(m.j.additionalFields.machinepercentramusage,",").concat(m.j.additionalFields.machineramusage,",").concat(m.j.additionalFields.machinepercentcpuusage),t="".concat(t,",").concat(m.j.additionalFields.sessionusername)),Object(F.bb)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)&&(t="".concat(t,", ").concat(m.j.additionalFields.runSessionMode)),e&&Object(F.ab)(this.featureFlags,this.environmentStore,this.environmentCapabilityStore)&&(t=t.replace("context","".concat(m.j.additionalFields.parentworkflowid,",").concat(m.j.additionalFields.runmode,",").concat(m.j.additionalFields.triggertype))),t}},{key:"hasEnvironmentCapability",value:function(e){return this.environmentCapabilityStore.isCapabilitySupported(this.environmentStore.currentEnvironmentName,e)}}])&&A(t.prototype,n),r&&A(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,H="storeUiFlowRuns",W=[a.action],z=Object.getOwnPropertyDescriptor(r.prototype,"storeUiFlowRuns"),_=r.prototype,B={},Object.keys(z).forEach((function(e){B[e]=z[e]})),B.enumerable=!!B.enumerable,B.configurable=!!B.configurable,("value"in B||B.initializer)&&(B.writable=!0),B=W.slice().reverse().reduce((function(e,t){return t(U,H,e)||e}),B),_&&void 0!==B.initializer&&(B.value=B.initializer?B.initializer.call(_):void 0,B.initializer=void 0),void 0===B.initializer&&(Object.defineProperty(U,H,B),B=null),r);function K(e){return I(I({},e),{},{filters:I(I({},e.filters),{},{fromCreationDate:e.filters.fromCreationDate?new Date(e.filters.fromCreationDate):void 0,toCreationDate:e.filters.toCreationDate?new Date(e.filters.toCreationDate):void 0,fromStartDate:e.filters.fromStartDate?new Date(e.filters.fromStartDate):void 0,toStartDate:e.filters.toStartDate?new Date(e.filters.toStartDate):void 0,machineNames:e.filters.machineNames||[],machineGroupNames:e.filters.machineGroupNames||[],combinedRunModes:e.filters.combinedRunModes||[]})})}function V(e){var t;return{filters:{fromCreationDate:e.filters.fromCreationDate,toCreationDate:e.filters.toCreationDate,fromStartDate:e.filters.fromStartDate,toStartDate:e.filters.toStartDate,statuses:e.filters.statuses.length,runModes:e.filters.runModes.length,parentWorkflowIds:e.filters.parentWorkflowIds.length,selectEmptyParentWorkflowId:e.filters.selectEmptyParentWorkflowId,parentWorkflowRunIds:e.filters.parentWorkflowRunIds.length,parentUIFlowIds:null===(t=e.filters.parentUIFlowIds)||void 0===t?void 0:t.length,machineNames:e.filters.machineNames.length,machineGroupNames:e.filters.machineGroupNames.length},orderBy:e.orderBy,pageSize:e.pageSize}}function X(e,t,n){var r=!!t&&t.startsWith("Default-"),i=Object(k.r)(e),o=function(e){var t;if(!e)return 0;return Object(C.i)([!!e.filters.fromCreationDate,!!e.filters.toCreationDate,!!e.filters.fromStartDate,!!e.filters.toStartDate,!!e.filters.statuses.length,!!e.filters.runModes.length,!!e.filters.parentWorkflowIds.length,!!e.filters.selectEmptyParentWorkflowId,!!e.filters.parentWorkflowRunIds.length,!(null===(t=e.filters.parentUIFlowIds)||void 0===t||!t.length),!!e.filters.machineNames.length,!!e.filters.machineGroupNames.length],e=>e?1:0)}(n)>2;return r&&i&&o?c.e.Warning:Object(E.i)(e)}},20987:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(15427),i=function(e){return e[e.cancelled=r.e.Canceled]="cancelled",e[e.failed=r.e.Failed]="failed",e[e.waiting=r.e.Waiting]="waiting",e[e.running=r.e.Running]="running",e[e.skipped=r.e.Skipped]="skipped",e[e.succeeded=r.e.Succeeded]="succeeded",e}({})},20988:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(13028),i=n(17260),o=n(15459),a=n(12345),s=n(17258),l=n(17150),u=n(15339),c=n(15332),d=n(15463),f=n(15461),p=n(15417),m=n(13087),v=n(16924),h=n(15464),g=n(15460),w=n(12999),y=n(20904),b=n(17448),S=n(20989),R=n(20918),O=n(20990),F=n(20906),k=n(20996),C=n(20995),E=new i.d(s.a,R.a,m.a,d.a,S.a,k.a,g.b,y.a,h.a,b.a,a.a,c.a,u.a,l.a,v.a,o.a,p.a,Object(r.a)(),f.a,Object(w.a)(),O.a,F.a,C.a)},20989:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(17267),i=n(15460),o=new r.a(i.b)},20996:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(20904),i=n(20997),o=n(21007),a=n(17448),s=n(13087),l=n(21009),u=n(15332),c=n(12999),d=new i.a(o.a,l.a,r.a,a.a,s.a,u.a,Object(c.a)())},20997:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(12364),i=n(13009),o=n(13143),a=n(15422),s=n(15992),l=n(15388),u=n(17275),c=n(15396),d=n(20994),f=n(20998),p=n(20999),m=n(21e3),v=n(21001);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var w=function(){function e(t,n,r,u,v,h,g){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.httpClient=t,this.store=n,this.xrmIdentityStore=r,this.graphService=u,this.loggingService=v,this.userDetailsStore=h,this.featureFlags=g,this.entityManagerServiceHelper=void 0,this.fetchDesktopFlowModule=(e,t,n)=>this.entityManagerServiceHelper.fetchEntity(this.store.desktopFlowModules,e,()=>this.httpClient.getDesktopFlowModule(e).then(e=>this.toDesktopFlowModuleAndLoadThumbnail(e.data)),"fetchDesktopFlowModule",d.b.FetchDesktopFlowModule,t,n,void 0,s.i),this.updateDesktopFlowModule=(e,t,n,r)=>this.entityManagerServiceHelper.updateEntity(this.store.desktopFlowModules,e,()=>this.httpClient.updateDesktopFlowModule(e,t,n).then(e=>this.toDesktopFlowModuleAndLoadThumbnail(e.data)),"updateDesktopFlowModuleDetails",d.b.UpdateDesktopFlowModule,r),this.updateCustomActionsGroupFile=(e,t,n)=>this.entityManagerServiceHelper.updateEntity(this.store.desktopFlowModules,e,()=>this.httpClient.uploadDesktopFlowModuleFile(e,t).then(()=>this.httpClient.getDesktopFlowModule(e).then(e=>this.toDesktopFlowModuleAndLoadThumbnail(e.data))),"updateCustomActionFile",d.b.UpdateFileCustomActionGroup,n),this.createCustomActionsGroup=(e,t,n)=>{var r=this.httpClient.createDesktopFlowModuleRecord(e,t,p.d.CustomModule).then(e=>{var t=e.data.desktopflowmoduleid;return this.httpClient.uploadDesktopFlowModuleFile(t,n).catch(e=>this.httpClient.deleteDesktopFlowModuleRecord(t).then(()=>Promise.reject(e)).catch(()=>Promise.reject(e))).then(()=>{this.store.invalidateModuleListCollections()})});return Object(c.d)({loggingService:this.loggingService,eventName:d.b.UploadCustomActionsGroup,sourcePage:d.a.CustomActionsPage,promise:r,getStatus:this.getCreateDesktopFlowModuleErrorStatus})},this.deleteDesktopFlowModule=(e,t)=>this.entityManagerServiceHelper.deleteEntity(this.store.desktopFlowModules,e,()=>this.httpClient.deleteDesktopFlowModuleRecord(e),"deleteDesktopFlowModule",d.b.DeleteDesktopFlowModule,t,!1,e=>this.getDeleteDesktopFlowModuleErrorStatus(e)),this.saveAsDesktopFlowModule=(e,t,n)=>{var r=this.httpClient.saveAsDesktopFlowModule(e,t).then(()=>{this.store.invalidateModuleListCollections()});return Object(c.d)({loggingService:this.loggingService,eventName:f.a.SaveAsUIElementsCollection,sourcePage:n,promise:r})},this.toDesktopFlowModuleAndLoadThumbnail=e=>(e.owninguser.systemuserid&&this.populateOwnerAndFetchThumbnails(e.owninguser),Object(m.a)(e)),this.getCreateDesktopFlowModuleErrorStatus=e=>{var t=Object(i.cb)(e);if(t&&o.a.has(t))return i.e.Warning;var n=Object(i.y)(e);return n!==i.e.Failure?n:Object(a.j)(e)?i.e.Warning:i.e.Failure},this.getDeleteDesktopFlowModuleErrorStatus=e=>{if(Object(i.cb)(e)===o.b.DeleteFlowWithDeclaredDependenciesXrmError)return i.e.Warning;var t=Object(i.y)(e);return t!==i.e.Failure?t:i.e.Failure},this.entityManagerServiceHelper=new l.a(v)}var t,n,g;return t=e,(n=[{key:"fetchDesktopFlowModulesList",value:function(e,t,n){var r=v.a.getModuleListCollectionKey(e);return this.entityManagerServiceHelper.fetchCollection(this.store.desktopFlowModules,r,()=>this.httpClient.getDesktopFlowModuleList([],e,this.userDetailsStore.xrmUserInfo).then(e=>{var t;return{value:e.data.value.map(this.toDesktopFlowModuleAndLoadThumbnail),nextLink:null===(t=e.data)||void 0===t?void 0:t.nextLink}}),"fetchDesktopFlowModulesList",d.b.FetchDesktopFlowModulesList,t,n)}},{key:"fetchDesktopFlowModulesListUsedByDesktopFlow",value:function(e,t,n,r){var i=v.a.getModuleByDesktopFlowCollectionKey(e);if(0===t.length)return this.store.desktopFlowModules.setCollectionLoading(i),this.store.desktopFlowModules.setCollectionLoaded(i,[],{}),Promise.resolve();var o={filters:{accessType:void 0,moduleType:this.featureFlags.enableUIElementsCollection?void 0:p.d.CustomModule},orderBy:{key:"name",direction:u.a.asc}};return this.entityManagerServiceHelper.fetchCollection(this.store.desktopFlowModules,i,()=>this.httpClient.getDesktopFlowModuleList(t,o,void 0).then(e=>{var n=e.data.value.map(this.toDesktopFlowModuleAndLoadThumbnail);if(n.length<t.length){var r=n.map(e=>e.id);t.filter(e=>!r.includes(e)).forEach(e=>{n.push({id:e,isUnknown:!0})})}return{value:n}}),"fetchDesktopFlowModulesListUsedByDesktopFlow",d.b.FetchDesktopFlowModulesListUsedByDesktopFlow,n,r)}},{key:"fetchMoreDesktopFlowModules",value:function(e,t){var n=v.a.getModuleListCollectionKey(e),r=this.store.desktopFlowModules.getCollection(n),i=null==r?void 0:r.nextLink;return i?this.entityManagerServiceHelper.fetchCollection(this.store.desktopFlowModules,n,()=>this.httpClient.fetchMoreDesktopFlowModules(i).then(e=>({value:e.data.value.map(this.toDesktopFlowModuleAndLoadThumbnail),nextLink:e.data.nextLink})),"fetchMoreDesktopFlowModules",d.b.FetchMoreDesktopFlowModules,t,!0,void 0,{resetList:!1}):Promise.reject("No more items")}},{key:"populateOwnerAndFetchThumbnails",value:function(e){Object(r.b)(this.xrmIdentityStore.xrmUsers.entities,e),e.azureactivedirectoryobjectid&&this.graphService.getThumbnailPhoto(e.azureactivedirectoryobjectid)}}])&&h(t.prototype,n),g&&h(t,g),Object.defineProperty(t,"prototype",{writable:!1}),e}()},20998:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(15419),i=function(e){return e.UIElementsCollectionsPage="UIElementsCollectionsPage",e.UIElementsCollectionsDetailsPage="UIElementsCollectionsDetailsPage",e}({}),o=function(e){return e.UIElementsCollectionsListPage="DF_Page_UIElementsCollectionsListPage",e.UIElementsCollectionsDetailsPage="DF_Page_UIElementsCollectionsDetailsPage",e.UIElementsCollectionsDetailsList="DF_Page_UIElementsCollectionsDetailsList",e[e.GetCurrentUserPrivilegeByName=r.b.GetCurrentUserPrivilegeByName]="GetCurrentUserPrivilegeByName",e.FetchUIElementsCollectionsCapabilities="DF_Fetch_UIElementsCollectionsCapabilities",e.UIElementsCollectionsDetailsCard="DF_UI_UIElementsCollectionsDetailsCard",e.UIElementsCollectionsDetailsSharedWithCard="DF_UI_UIElementsCollectionsDetailsSharedWithCard",e.UIElementsCollectionsDetailsManageAccess_Clicked="DF_UI_UIElementsCollectionsDetailsManageAccess_Clicked",e.UIElementsCollectionsSolutionReferenceCardEnd="DF_UI_UIElementsCollectionsSolutionReferenceCardEnd",e.UIElementsCollectionsSolutionReferenceCardStart="DF_UI_UIElementsCollectionsSolutionReferenceCardStart",e.EditUIElementsCollectionPanel_Save="DF_UI_EditUIElementsCollectionPanel_Save_Clicked",e.SaveAsUIElementsCollectionPanel_Save="DF_UI_SaveAsUIElementsCollectionPanel_Save_Clicked",e.SaveAsUIElementsCollection="DF_UI_SaveAsUIElements",e.ShareUIElementsCollectionCommandBarButton_Clicked="DF_UI_CommandBar_ShareUIElementsCollection_Clicked",e.DeleteUIElementsCollectionCommandBarButton_Clicked="DF_UI_CommandBar_DeleteUIElementsCollection_Clicked",e.EditUIElementsCollectionCommandBarButton_Clicked="DF_UI_CommandBar_EditUIElementsCollection_Clicked",e.SaveAsUIElementsCollectionCommandBarButton_Clicked="DF_UI_CommandBar_SaveAsUIElementsCollection_Clicked",e.ManualRefreshUIElementsCollection_Clicked="DF_UI_CommandBar_ManualRefreshUIElementsCollection_Clicked",e}({})},20999:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return w}));var r=n(12362),i=n.n(r),o=n(12366),a=n(20707),s=n(17268),l=n(17275);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=["desktopflowmoduleid","name","description","modifiedon","type"];return e&&(t=[...t,"ismanaged","iscustomizable","solutionid"]),t}var p=function(e){return e.name="name",e.modifiedon="modifiedon",e}({}),m=function(e){return e[e.CustomModule=0]="CustomModule",e[e.UIElementsCollection=1]="UIElementsCollection",e}({}),v={searchText:void 0,filters:{accessType:void 0,moduleType:m.CustomModule},orderBy:{key:p.modifiedon,direction:l.a.desc}},h={searchText:void 0,filters:{accessType:void 0,moduleType:m.UIElementsCollection},orderBy:{key:p.modifiedon,direction:l.a.desc}},g=e=>({$select:f(e).join(","),$expand:"".concat(s.d,", desktopflowmodule_FileAttachments($select=filesizeinbytes,createdon,filename)")}),w=(e,t,n,r,i)=>c(c(c({},g(r)),y(e,t,n,i)),{},{$orderby:b(t)}),y=(e,t,n,r)=>{var s={};null!=t&&t.searchText&&(s=Object(a.a)(t.searchText,["name"]));var l=s.$filter?[s.$filter]:[],u=null==t?void 0:t.filters.accessType;if(u&&u!==o.a.All&&r){var c="eq";u===o.a.SharedWithMe&&(c="ne"),l.push("(_owninguser_value ".concat(c," '").concat(r.userId,"')"))}if(n&&void 0!==(null==t?void 0:t.filters.moduleType)&&l.push("(type eq ".concat(t.filters.moduleType,")")),e&&e.length>0){var d=i()(e).sort().map(e=>"'".concat(e,"'")).join(",");l.push("Microsoft.Dynamics.CRM.In(PropertyName='desktopflowmoduleid',PropertyValues=[".concat(d,"])"))}var f=l.filter(Boolean).sort().join(" and ");return f&&(s.$filter=f),s},b=e=>"".concat(e.orderBy.key," ").concat(e.orderBy.direction)},21e3:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(15427);function i(e){var t=function(e){return e.desktopflowmodule_FileAttachments.length>0?e.desktopflowmodule_FileAttachments[0]:void 0}(e);return{id:e.desktopflowmoduleid,name:e.name,modifiedOn:e.modifiedon,description:e.description||void 0,type:e.type||void 0,fileSize:null==t?void 0:t.filesizeinbytes,uploadedOn:null==t?void 0:t.createdon,fileName:null==t?void 0:t.filename,isUnknown:!1,xrmOwner:{"@odata.type":r.l.SystemUser,ownerid:e.owninguser.systemuserid},isManaged:e.ismanaged,isCustomizable:e.iscustomizable,solutionId:e.solutionid}}},21001:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,i,o,a,s=n(11773),l=n(12348),u=n(21002),c=n(15021);function d(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function m(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var v=((a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"desktopFlowModules",i,this),d(this,"selectedDesktopFlowModuleId",o,this),this.selection=new c.a({onSelectionChanged:()=>{this.setSelected(this.selection)},getKey:e=>e}),this.invalidateModuleListCollections=()=>{this.desktopFlowModules.collections.forEach((t,n)=>{if(!n.startsWith(e.desktopFlowModuleByDesktopFlowIdCollectionKeyPrefix))return t.invalidateCache()})},Object(s.runInAction)(()=>{this.desktopFlowModules=new l.a({getKey:e=>e.id})})}var t,n,r;return t=e,(n=[{key:"setSelected",value:function(e){var t=e.getSelection();this.selectedDesktopFlowModuleId=t&&t.length>0?t[0]:void 0}},{key:"getDependenciesPropsItems",value:function(t,n,r){var i=e.getModuleByDesktopFlowCollectionKey(t),o=this.desktopFlowModules.getCollection(i);return null!=o&&o.list&&o.list.map(e=>this.desktopFlowModules.getEntity(e)).map(e=>Object(u.b)(e,n,r))||[]}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()).desktopFlowModuleByDesktopFlowIdCollectionKeyPrefix="DesktopFlowModulesByDesktopFlowId",a.getModuleListCollectionKey=e=>{var t="DesktopFlowModules";return null!=e&&e.searchText&&(t+="?searchText=".concat(e.searchText)),null!=e&&e.filters.accessType&&(t+="?accessType=".concat(e.filters.accessType)),void 0!==(null==e?void 0:e.filters.moduleType)&&(t+="?moduleType=".concat(e.filters.moduleType)),null!=e&&e.orderBy&&(t+="?orderBy=".concat(e.orderBy.key,":").concat(e.orderBy.direction)),t},a.getModuleByDesktopFlowCollectionKey=e=>"".concat(a.desktopFlowModuleByDesktopFlowIdCollectionKeyPrefix,"(").concat(e,")"),i=m((r=a).prototype,"desktopFlowModules",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=m(r.prototype,"selectedDesktopFlowModuleId",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m(r.prototype,"setSelected",[s.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelected"),r.prototype),r)},21002:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return v}));var r=n(14950),i=n(16873),o=n(14028),a=n(14678),s=n(11766),l=n.n(s),u=n(21003),c=n(16833),d=n(21004),f=n(20999);function p(e,t){return e.type===f.d.UIElementsCollection?t.Monitor.Target.Properties.DependenciesCard.UIElementsCollectionsType:t.Monitor.Target.Properties.DependenciesCard.CustomModuleType}function m(e,t,n){var r=n.enableUIElementsCollection?t.Monitor.Target.Properties.DependenciesCardWithUIEC:t.Monitor.Target.Properties.DependenciesCard;return{iconAriaLabel:r.IconAriaLabel,dependencyType:p(e,t),dependencyName:e.isUnknown?r.UnknownDependency:e.name,isUnknown:e.isUnknown,isUnknownIconAriaLabel:r.UnknownIconAriaLabel,desktopFlowModuleId:e.id,unknownTooltip:r.UnknownTooltip,desktopFlowModuleType:e.type}}var v=e=>{var{assetService:t,flowServiceClientResources:n,telemetryService:s,routeCrafter:f,featureFlags:p}=Object(c.a)(),m=Object(i.a)().palette,v=p.enableUIElementsCollection?n.Monitor.Target.Properties.DependenciesCardWithUIEC:n.Monitor.Target.Properties.DependenciesCard;return l.a.createElement(l.a.Fragment,null,!e.isInError&&l.a.createElement(o.a,{items:e.items,onRenderCell:(t,n)=>((t,n)=>t?l.a.createElement(d.a,{iconAriaLabel:t.iconAriaLabel,dependencyName:t.dependencyName,dependencyType:t.dependencyType,desktopFlowModuleType:t.desktopFlowModuleType,isUnknown:t.isUnknown,isUnknownIconAriaLabel:t.isUnknownIconAriaLabel,unknownTooltip:t.unknownTooltip,desktopFlowModuleId:t.desktopFlowModuleId,hasLink:e.hasLinks,styles:n&&n>0?{root:{borderTop:"1px solid ".concat(m.neutralLighter)}}:void 0,telemetryService:s,routeCrafter:f}):null)(t,n),"data-automation-id":a.a.lists.dependencyList.root}),e.isInError&&l.a.createElement(r.a,{primaryMessage:v.Error.PrimaryMessage,icon:{imageProps:{src:t.connectionReferenceCardError}},styles:u.a,"data-automation-id":a.a.emptyStates.dependencyListErrorEmptyState.root}))}},21003:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(12754),i=n(14962),o=()=>({root:{border:"none",borderRadius:i.b,boxShadow:i.n,"&:hover":{boxShadow:i.n},".ba-CardHeader":{borderBottom:"1px solid #EDEBE9",padding:"0px 15px",width:"100%",minHeight:"40px"}},contentArea:{padding:0},shimmerContentArea:{padding:16},actionsContainer:{display:"inline-flex",alignItems:"center",width:"100%"}}),a=Object(r.db)({root:{margin:"40px auto"},primaryMessage:{marginTop:20},secondaryMessage:{marginBottom:0}})},21004:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(12706),i=n(12728),o=n(12720),a=n(11766),s=n(21005),l=n(12743),u=n(16833),c=n(13260),d=n(21006),f=n(14678),p=n(13259),m=n(13272),v=n(13240),h=n(14346),g=n(14901),w=n(13031),y=n(14350),b=n(14354),S=n(12858),R=n(20999),O=Object(r.a)(),F=f.a.dependencyItem;var k=Object(o.a)(e=>{var{iconAriaLabel:t,dependencyName:n,desktopFlowModuleId:r,dependencyType:o,isUnknown:s,isUnknownIconAriaLabel:f,unknownTooltip:k,hasLink:C,styles:E,telemetryService:N,routeCrafter:P,isLoading:j,loadingAriaLabel:T,hideType:I,desktopFlowModuleType:D}=e,M=O(E),L=Object(l.a)("CustomActionIconTooltip"),A=Object(l.a)("UnknownCustomActionTooltip"),{assetService:x}=Object(u.a)(),U=D===R.d.UIElementsCollection?x.uiElementsCollectionIcon:x.customGroupAction,H=D===R.d.UIElementsCollection?g.G:g.k;return j?a.createElement("div",{className:M.root,"data-automation-id":F.root},a.createElement(y.a,{"data-automation-id":F.shimmer,"aria-label":T,title:T,shimmerElements:[{type:b.a.line,width:20,height:20},{type:b.a.gap,width:8,height:20},{type:b.a.line,width:250,height:20}]})):s?a.createElement("div",{className:M.root,"data-automation-id":F.root},a.createElement("span",{className:M.iconAndName},a.createElement(c.b,{text:t,id:L,styles:{root:M.icon}},a.createElement(S.a,{imageProps:{src:U},"aria-label":t,"data-automation-id":F.icon,className:M.unknownIcon})),a.createElement("div",{className:M.nameContainer},a.createElement(c.b,{id:A,text:Object(w.a)(k,r)},a.createElement("div",{className:M.dependencyUnknownName,"data-automation-id":F.nameText,"aria-disabled":!0},n))),a.createElement(p.a,{iconName:m.a.Info,title:f,className:M.unknownIconInfo,dataAutomationId:F.unknownIcon})),!I&&a.createElement("span",{className:M.dependencyTypeContainer},a.createElement(d.a,{text:o,className:M.dependencyTypeLabel,textAutomationId:F.typeText}))):a.createElement("div",{className:M.root,"data-automation-id":F.root,"data-automation-resource-id":r},a.createElement("span",{className:M.iconAndName},a.createElement(c.b,{text:t,id:L,styles:{root:M.icon}},a.createElement(S.a,{imageProps:{src:U},"aria-label":t,"data-automation-id":F.icon})),a.createElement("div",{className:M.nameContainer},function(e,t,n,r,o,s,l){var u=O(l),f=s(o,{desktopFlowModuleId:n}),p=Object(i.a)("fl-dependencyItemName-tooltip");return e?a.createElement(c.b,{id:p,text:t},a.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis"}},a.createElement(h.a,{href:f,onClick:r,dataAutomationId:F.nameAnchor},t))):a.createElement(d.a,{text:t,className:u.dependencyName,textAutomationId:F.nameText})}(C,n,r,()=>{N.tagEvent(v.c.DesktopFlowDetailsCustomActionClicked)},P,H,E))),!I&&a.createElement("span",{className:M.dependencyTypeContainer},a.createElement(d.a,{text:o,className:M.dependencyTypeLabel,textAutomationId:F.typeText})))},s.a)},21005:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(12754),i=()=>{var e=Object(r.Y)().palette;return{root:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",height:40},iconAndName:{display:"flex",flexDirection:"row",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",marginRight:8},dependencyName:{color:"".concat(e.neutralPrimary," !important"),fontSize:r.k.medium,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},dependencyUnknownName:{color:Object(r.Y)().semanticColors.disabledText,fontSize:r.k.medium,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},nameContainer:{display:"flex",flexDirection:"column",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},dependencyTypeLabel:{fontSize:r.k.small,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},dependencyTypeContainer:{display:"flex",flexDirection:"row",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",fontSize:r.k.icon,marginRight:8},icon:{marginRight:8,paddingTop:6,fontSize:r.k.icon},unknownIconInfo:{color:Object(r.Y)().semanticColors.disabledText},unknownIcon:{opacity:"0.3",filter:"grayscale(100%)"}}}},21007:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(21008),i=n(15459),o=n(12345),a=n(15460),s=n(12999),l=new r.a(a.b,i.a,o.a,Object(s.a)())},21008:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(15420),i=n(16744),o=n(20999);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var d={"odata-maxversion":"4.0","odata-version":"4.0"},f={$select:"desktopflowmoduleid"},p=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.environmentCapabilityStore=n,this.environmentStore=r,this.featureFlags=i,this._xrmHttpClient=void 0,this._xrmHttpClient=t}var t,n,a;return t=e,(n=[{key:"getDesktopFlowModuleList",value:function(e,t,n){return this._xrmHttpClient.retrieveMultiple("desktopflowmodules",Object(o.f)(e,t,this.environmentCapabilityStore.isDesktopFlowModuleTypeSupported(this.environmentStore.currentEnvironmentName),this.isManagedSupportEnabled,n),s(s({},d),{},{Prefer:"odata.maxpagesize=".concat(50)})).then(e=>Object(r.g)(e))}},{key:"fetchMoreDesktopFlowModules",value:function(e){return this._xrmHttpClient.retrieveMore(e,s(s({},d),{},{Prefer:"odata.maxpagesize=".concat(50)}))}},{key:"getDesktopFlowModule",value:function(e){return this._xrmHttpClient.retrieveRecord("desktopflowmodules",e,Object(o.e)(this.isManagedSupportEnabled))}},{key:"createDesktopFlowModuleRecord",value:function(e,t,n){var r={name:e,description:t,type:n};return this._xrmHttpClient.createRecord("desktopflowmodules",r,f,!0)}},{key:"updateDesktopFlowModule",value:function(e,t,n){var r={name:t,description:n};return this._xrmHttpClient.updateRecord("desktopflowmodules",e,r,Object(o.e)(this.isManagedSupportEnabled),!0)}},{key:"uploadDesktopFlowModuleFile",value:function(e,t){return this._xrmHttpClient.updateRecordFile("desktopflowmodules",e,"data",t,t.name)}},{key:"deleteDesktopFlowModuleRecord",value:function(e){return this._xrmHttpClient.deleteRecord("desktopflowmodules",e)}},{key:"saveAsDesktopFlowModule",value:function(e,t){return this._xrmHttpClient.postCustomActionOnRecord("Microsoft.Dynamics.CRM.SaveAsDesktopFlowModule","SaveAsDesktopFlowModule","desktopflowmodules",e,{desktopFlowModuleName:t})}},{key:"isManagedSupportEnabled",get:function(){return Object(i.fb)(this.featureFlags)}}])&&u(t.prototype,n),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},21009:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n(21001).a)},21010:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(21011),i=n(13028),o=n(12339),a=n(21013),s=n(12345),l=n(13e3),u=n(20982),c=n(11795),d=n(15461),f=n(13087),p=n(12999),m=n(21015),v=new r.a(Object(o.b)(),Object(u.d)(Object(c.h)().region),Object(i.a)(),a.a,f.a,l.a,s.a,Object(p.a)(),m.a,d.a)},21011:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(14940),i=n(13009),o=n(13085),a=n(11806),s=n(13223),l=n(20982),u=n(15402),c=n(21012);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var h=function(){function e(t,n,r,i,o,a,s,l,u,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.appSettings=t,this.environment=n,this.clientResources=r,this.cancelTokenStore=i,this.loggingService=o,this.sessionStore=a,this.environmentStore=s,this.featureFlags=l,this.winAutomationStore=u,this.getErrorResources=c}var t,n,d;return t=e,(n=[{key:"launchApp",value:function(e){var t,n,{createNew:r,workflowId:u,solutionId:c,processName:d,eventData:p={}}=e,{appSettings:{launchWinAutomationAppUri:m},clientResources:v,environmentStore:h,featureFlags:g,environment:w}=this;if(null===(t=h.environmentClaim)||void 0===t||!t.hasXrmInstance)return this.getErrorResources().then(e=>{var t=new i.b(i.c.MicrosoftDataverseNotFound,e.Rpa.Error.MissingXrmInstanceApiUrlGA);return this.loggingService.logError(o.a.PADAppLaunchStart,t),Promise.reject(t)});var y=Object(s.a)(),b={crmOrg:null===(n=h.environmentClaim)||void 0===n?void 0:n.xrmInstanceApiUrl,workflowId:u||Object(s.a)(),createNew:r||!1,upn:this.userDisplayName,processName:d||v.Common.Untitled,environmentId:h.currentEnvironmentName,clientSessionId:y};this.sessionStore.user&&this.sessionStore.user.isOrgDomain&&(b.tenantId=this.sessionStore.user.tenantId),c&&(b.solutionId=c),"dev"!==this.environment&&"tip1"!==this.environment&&"tip2"!==this.environment||(b.tip1=!0),g.enablePADCloudTypeParam&&(g.enableBestMatchingCloudTypeForTest?b.cloudType=Object(l.c)(w,h.currentEnvironment,l.f,l.a.Tip1,l.a.Tip2):b.cloudType=Object(l.f)(this.environment));var S="".concat(m,"?").concat(Object(a.b)(b));return this.launch(S,o.a.PADAppLaunchStart,o.a.PADAppLaunchEnd,f(f({},p),{},{padSessionId:y}))}},{key:"launchAppConsole",value:function(e){var{appSettings:{launchWinAutomationAppConsoleUri:t},featureFlags:n}=this,r=Object(s.a)(),i=f(f({},e),{},{upn:this.userDisplayName,clientSessionId:r});this.sessionStore.user&&this.sessionStore.user.isOrgDomain&&(i.tenantId=this.sessionStore.user.tenantId),"dev"!==this.environment&&"tip1"!==this.environment&&"tip2"!==this.environment||(i.tip1="true"),n.enablePADCloudTypeParam&&(n.enableBestMatchingCloudTypeForTest?i.cloudType=Object(l.c)(this.environment,this.environmentStore.currentEnvironment,l.f,l.a.Tip1,l.a.Tip2):i.cloudType=Object(l.f)(this.environment));var u="".concat(t,"?").concat(Object(a.b)(i));return this.launch(u,o.a.PADConsoleLaunchStart,o.a.PADConsoleLaunchEnd,{padSessionId:r})}},{key:"launchMachineRegistration",value:function(){var{appSettings:{launchWinAutomationRegistrationAppCreateMachineUri:e},environmentStore:t,featureFlags:n}=this,r=Object(s.a)(),i={environmentId:t.currentEnvironmentName,upn:this.userDisplayName,clientSessionId:r,tenantId:this.userTenantId,cloudType:Object(l.e)(this.environment)};n.enableRegistrationAppCloudTypeParam&&(n.enableBestMatchingCloudTypeForTest?i.cloudType=Object(l.c)(this.environment,this.environmentStore.currentEnvironment,l.g,l.b.Tip1,l.b.Tip2):i.cloudType=Object(l.g)(this.environment));var u="".concat(e,"?").concat(Object(a.b)(i));return this.launch(u,o.a.PADRegistrationAppLaunchStart,o.a.PADRegistrationAppLaunchEnd,{padSessionId:r})}},{key:"launchJoinMachineGroup",value:function(e){var{appSettings:{launchWinAutomationRegistrationAppJoinGroupUri:t},environmentStore:n,featureFlags:r}=this,i=Object(s.a)(),u={environmentId:n.currentEnvironmentName,upn:this.userDisplayName,clientSessionId:i,tenantId:this.userTenantId,cloudType:Object(l.e)(this.environment)};r.enableRegistrationAppCloudTypeParam&&(r.enableBestMatchingCloudTypeForTest?u.cloudType=Object(l.c)(this.environment,this.environmentStore.currentEnvironment,l.g,l.b.Tip1,l.b.Tip2):u.cloudType=Object(l.g)(this.environment)),e&&(u.groupId=e);var c="".concat(t,"?").concat(Object(a.b)(u));return this.launch(c,o.a.PADRegistrationAppLaunchStart,o.a.PADRegistrationAppLaunchEnd,{padSessionId:i})}},{key:"launch",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=Object(r.a)(),s=new Promise((t,n)=>{this.winAutomationStore.setLaunchCallFetching(),this.cancelTokenStore.registerTokenToSkipConfirm(a.token),Object(c.a)(e,()=>{this.loggingService.logInfo("WinAutomationService.launch",Object(l.h)(e)+" is installed and will launch"),this.winAutomationStore.updateLaunchCall(!0,void 0),t()},()=>{var t=new i.b(i.c.winAutomationServiceLaunchAppError,Object(l.h)(e)+" is not installed on the machine (or did not launch in time)");this.winAutomationStore.updateLaunchCall(!1,t),n(t)},()=>{var t=new i.a(i.c.winAutomationServiceLaunchAppError,"Unknown protocol '".concat(Object(l.h)(e),"', could not open WinAutomation app"));this.winAutomationStore.updateLaunchCall(!1,t),n(t)},()=>{var t=new i.b(i.c.winAutomationServiceLaunchAppTimeout,"'".concat(Object(l.h)(e),"' did not launch in time"));this.winAutomationStore.updateLaunchCall(!1,t),n(t)})}).finally(()=>a.cancel("Canceled as launch is finished"));return Object(u.b)({loggingService:this.loggingService,eventStartName:t,eventEndName:n,eventData:f({launchLink:e},o),promise:s})}},{key:"userDisplayName",get:function(){var e;return(null===(e=this.sessionStore.user)||void 0===e?void 0:e.displayName)||""}},{key:"userTenantId",get:function(){var e;return(null===(e=this.sessionStore.user)||void 0===e?void 0:e.tenantId)||""}}])&&m(t.prototype,n),d&&m(t,d),Object.defineProperty(t,"prototype",{writable:!1}),e}()},21012:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e,t,n,r,i){var o,a,s,l,u,c,d;function f(e){"function"==typeof e&&e()}function p(){return o||(o=document.body),(s=document.createElement("iframe")).style.display="none",o.appendChild(s),s}function m(){s&&(o||(o=document.body),o.removeChild(s),s=null)}var v={isChrome:!1,isFirefox:!1,isIE:!1};if(window.chrome&&!navigator.userAgent.match(/Opera|OPR\//)?v.isChrome=!0:"undefined"!=typeof InstallTrigger?v.isFirefox=!0:"ActiveXObject"in window&&(v.isIE=!0),navigator.msLaunchUri)navigator.msLaunchUri(e,t,n);else if(v.isChrome)c=function(){window.clearTimeout(u),window.removeEventListener("blur",c),f(t)},d=function(){window.removeEventListener("blur",c),f(null!=i?i:n)},window.addEventListener("blur",c),u=window.setTimeout(d,2e3),window.location.href=e;else if(v.isFirefox){s=p();try{s.contentWindow.location.href=e,f(t)}catch(h){"NS_ERROR_UNKNOWN_PROTOCOL"===h.name?f(n):f(r)}finally{m()}}else if(v.isIE){(a=window.open("","launcher","width=0,height=0")).location.href=e;try{a.location.href="about:blank",f(t),l=window.setInterval(()=>{a.close(),a.closed&&window.clearInterval(l)},2e3)}catch(h){(a=window.open("about:blank","launcher")).close(),f(n)}}else(s=p()).contentWindow.location.href=e,window.setTimeout(()=>{m(),f(r)},2e3)}},21013:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n(21014).a)},21014:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}n.d(t,"a",(function(){return o}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cancelTokens=[]}var t,n,i;return t=e,(n=[{key:"registerTokenToSkipConfirm",value:function(e){this.cancelTokens.push(e)}},{key:"hasRegisteredTokensToSkipConfirm",value:function(){return this.cancelTokens=this.cancelTokens.filter(e=>!e.reason),!!this.cancelTokens.length}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},21015:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=new(n(21016).a)},21016:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r,i,o=n(11773);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var u=(i=l((r=function(){function e(){var t,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="callResult",o=this,(r=i)&&Object.defineProperty(t,n,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}var t,n,r;return t=e,(n=[{key:"setLaunchCallFetching",value:function(){this.callResult.isLoading=!0}},{key:"updateLaunchCall",value:function(e,t){this.callResult.isLoading=!1,this.callResult.isSuccess=e,this.callResult.exception=t}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()).prototype,"callResult",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isLoading:!1,isSuccess:!1,exception:void 0}}}),l(r.prototype,"setLaunchCallFetching",[o.action],Object.getOwnPropertyDescriptor(r.prototype,"setLaunchCallFetching"),r.prototype),l(r.prototype,"updateLaunchCall",[o.action],Object.getOwnPropertyDescriptor(r.prototype,"updateLaunchCall"),r.prototype),r)}}]);
//# sourceMappingURL=https://sourcemaps.powerapps.com/srcmaps/static/js/module/97.297a7e62.chunk.js.map